{"version":3,"sources":["../node_modules/browser-pack/_prelude.js","src/color_picker/color_picker.ts","src/controls.ts","src/dependencies/translate.ts","src/image_slider/image_slider.ts","src/image_slider/image_slider_service.ts","src/image_slider/slider_button.ts","src/image_slider/slider_indicator.ts","src/markdown/markdown.ts","src/popover/popover.ts","src/popover/popover_service.ts","src/progress/routing_progress.ts","src/toast/toasts.ts","temp/pip-webui-controls-html.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length","1","module","thisModule","angular","directive","restrict","scope","ngDisabled","colors","currentColor","colorChange","templateUrl","controller","$scope","$element","$attrs","$timeout","DEFAULT_COLORS","class","_","isArray","currentColorIndex","indexOf","disabled","selectColor","index","$apply","enterSpacePress","event","filter","$injector","pipTranslate","has","get","key","translate","sliderIndex","$parse","$interval","$pipImageSlider","setIndex","pipImageIndex","startInterval","timePromises","newIndex","blocks","direction","throttled","interval","DEFAULT_INTERVAL","stopInterval","cancel","restartInterval","type","pipAnimationType","pipAnimationInterval","addClass","swipeStart","find","$","throttle","toBlock","nextBlock","prevBlock","slideTo","nextIndex","id","registerSlider","on","removeSlider","service","register","sliderId","sliderScope","sliders","remove","getSlider","nextCarousel","removeClass","prevCarousel","oldIndex","blockIndex","getSliderScope","pipButtonType","pipSliderId","pipSlideTo","css","run","setTranslations","MARKDOWN_ATTACHMENTS","checklist","documents","pictures","location","time","link","describeAttachments","array","attachString","attachTypes","each","attach","push","toBoolean","value","toString","toLowerCase","bindText","textString","isClamped","height","options","obj","item","text","pipLineCount","isNumber","clampGetter","gfm","tables","breaks","sanitize","pedantic","smartLists","smartypents","marked","html","listGetter","attr","append","textGetter","pipText","pipList","pipRebind","$watch","newValue","$on","$rootScope","$compile","init","backdropElement","focus","params","timeout","closePopover","backdropClick","cancelCallback","onPopoverClick","$e","stopPropagation","position","element","pos","offset","width","docWidth","document","docHeight","popover","left","top","calcHeight","title","footer","content","contentHeight","outerHeight","Math","max","onResize","responsive","template","defaults","$parent","window","resize","onShow","p","onHide","$new","isObject","locals","popoverTemplate","$broadcast","show","hide","replace","showProgress","logoUrl","loadProgressImage","image","children","$mdToast","toast","pipErrorDetailsDialog","message","actions","actionLenght","showDetails","onDetails","error","ok","noop","onAction","action","showNextToast","toasts","splice","showToast","currentToast","hideDelay","duration","SHOW_TIMEOUT","sounds","then","successCallback","addToast","removeToasts","result","cloneDeep","removeToastsById","getToastById","onStateChangeSuccess","reject","onClearToasts","clearToasts","showNotification","SHOW_TIMEOUT_NOTIFICATIONS","showMessage","showError","hideAllToasts","$templateCache","put"],"mappings":"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","file":"pip-webui-controls.min.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipColorPicker', [ 'pipControls.Templates']); // 'pipFocused',\r\n\r\n    thisModule.directive('pipColorPicker',\r\n        function () {\r\n            return {\r\n                restrict: 'EA',\r\n                scope: {\r\n                    ngDisabled: '&',\r\n                    colors: '=pipColors',\r\n                    currentColor: '=ngModel',\r\n                    colorChange: '&ngChange'\r\n                },\r\n                templateUrl: 'color_picker/color_picker.html',\r\n                controller: 'pipColorPickerController'\r\n            };\r\n        }\r\n    );\r\n    thisModule.controller('pipColorPickerController',\r\n        function ($scope, $element, $attrs, $timeout) {\r\n            var\r\n                DEFAULT_COLORS = ['purple', 'lightgreen', 'green', 'darkred', 'pink', 'yellow', 'cyan'];\r\n\r\n            $scope.class = $attrs.class || '';\r\n\r\n            if (!$scope.colors || _.isArray($scope.colors) && $scope.colors.length === 0) {\r\n                $scope.colors = DEFAULT_COLORS;\r\n            }\r\n\r\n            $scope.currentColor = $scope.currentColor || $scope.colors[0];\r\n            $scope.currentColorIndex = $scope.colors.indexOf($scope.currentColor);\r\n\r\n            $scope.disabled = function () {\r\n                if ($scope.ngDisabled) {\r\n                    return $scope.ngDisabled();\r\n                }\r\n\r\n                return true;\r\n            };\r\n\r\n            $scope.selectColor = function (index) {\r\n                if ($scope.disabled()) {\r\n                    return;\r\n                }\r\n                $scope.currentColorIndex = index;\r\n\r\n                $scope.currentColor = $scope.colors[$scope.currentColorIndex];\r\n\r\n                $timeout(function () {\r\n                    $scope.$apply();\r\n                });\r\n\r\n                if ($scope.colorChange) {\r\n                    $scope.colorChange();\r\n                }\r\n            };\r\n\r\n            $scope.enterSpacePress = function (event) {\r\n                $scope.selectColor(event.index);\r\n            };\r\n        }\r\n    );\r\n\r\n})();\r\n","﻿/// <reference path=\"../typings/tsd.d.ts\" />\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    angular.module('pipControls', [\r\n        'pipMarkdown',\r\n        'pipColorPicker',\r\n        'pipRoutingProgress',\r\n        'pipPopover',\r\n        'pipImageSlider',\r\n        'pipToasts',\r\n        'pipControls.Translate'\r\n    ]);\r\n\r\n})();\r\n\r\n","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipControls.Translate', []);\r\n\r\n    thisModule.filter('translate', function ($injector) {\r\n        var pipTranslate = $injector.has('pipTranslate') \r\n            ? $injector.get('pipTranslate') : null;\r\n\r\n        return function (key) {\r\n            return pipTranslate  ? pipTranslate.translate(key) || key : key;\r\n        }\r\n    });\r\n\r\n})();\r\n","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipImageSlider', ['pipSliderButton', 'pipSliderIndicator', 'pipImageSlider.Service']);\r\n\r\n    thisModule.directive('pipImageSlider',\r\n        function () {\r\n            return {\r\n                scope: {\r\n                    sliderIndex: '=pipImageIndex'\r\n                },\r\n                controller: function ($scope, $element, $attrs, $parse, $timeout, $interval, $pipImageSlider) {\r\n                    var blocks,\r\n                        index = 0, newIndex,\r\n                        direction,\r\n                        type = $parse($attrs.pipAnimationType)($scope),\r\n                        DEFAULT_INTERVAL = 4500,\r\n                        interval = $parse($attrs.pipAnimationInterval)($scope),\r\n                        timePromises,\r\n                        throttled;\r\n\r\n                    $element.addClass('pip-image-slider');\r\n                    $element.addClass('pip-animation-' + type);\r\n\r\n                    $scope.swipeStart = 0;\r\n                    /*\r\n                     if ($swipe)\r\n                     $swipe.bind($element, {\r\n                     'start': function(coords) {\r\n                     if (coords) $scope.swipeStart = coords.x;\r\n                     else $scope.swipeStart = 0;\r\n                     },\r\n                     'end': function(coords) {\r\n                     var delta;\r\n                     if (coords) {\r\n                     delta = $scope.swipeStart - coords.x;\r\n                     if (delta > 150)  $scope.nextBlock();\r\n                     if (delta < -150)  $scope.prevBlock();\r\n                     $scope.swipeStart = 0;\r\n                     } else $scope.swipeStart = 0;\r\n                     }\r\n                     });\r\n                     */\r\n                    setIndex();\r\n\r\n                    $timeout(function () {\r\n                        blocks = $element.find('.pip-animation-block');\r\n                        if (blocks.length > 0) {\r\n                            $(blocks[0]).addClass('pip-show');\r\n                        }\r\n                    });\r\n\r\n                    startInterval();\r\n                    throttled = _.throttle(function () {\r\n                        $pipImageSlider.toBlock(type, blocks, index, newIndex, direction);\r\n                        index = newIndex;\r\n                        setIndex();\r\n                    }, 700);\r\n\r\n                    $scope.nextBlock = function () {\r\n                        restartInterval();\r\n                        newIndex = index + 1 === blocks.length ? 0 : index + 1;\r\n                        direction = 'next';\r\n                        throttled();\r\n                    };\r\n\r\n                    $scope.prevBlock = function () {\r\n                        restartInterval();\r\n                        newIndex = index - 1 < 0 ? blocks.length - 1 : index - 1;\r\n                        direction = 'prev';\r\n                        throttled();\r\n                    };\r\n\r\n                    $scope.slideTo = function (nextIndex) {\r\n                        if (nextIndex === index || nextIndex > blocks.length - 1) {\r\n                            return;\r\n                        }\r\n\r\n                        restartInterval();\r\n                        newIndex = nextIndex;\r\n                        direction = nextIndex > index ? 'next' : 'prev';\r\n                        throttled();\r\n                    };\r\n                    \r\n                    if ($attrs.id) $pipImageSlider.registerSlider($attrs.id, $scope);\r\n\r\n                    function setIndex() {\r\n                        if ($attrs.pipImageIndex) $scope.sliderIndex = index;\r\n                    }\r\n\r\n                    function startInterval() {\r\n                        timePromises = $interval(function () {\r\n                            newIndex = index + 1 === blocks.length ? 0 : index + 1;\r\n                            direction = 'next';\r\n                            throttled();\r\n                        }, interval || DEFAULT_INTERVAL);\r\n                    }\r\n\r\n                    function stopInterval() {\r\n                        $interval.cancel(timePromises);\r\n                    }\r\n\r\n                    $element.on('$destroy', function () {\r\n                        stopInterval();\r\n                        $pipImageSlider.removeSlider($attrs.id);\r\n                    });\r\n\r\n                    function restartInterval() {\r\n                        stopInterval();\r\n                        startInterval();\r\n                    }\r\n                }\r\n            };\r\n        }\r\n    );\r\n\r\n})();\r\n","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipImageSlider.Service', []);\r\n\r\n    thisModule.service('$pipImageSlider',\r\n        function ($timeout) {\r\n\r\n            var ANIMATION_DURATION = 550,\r\n                sliders = {};\r\n\r\n            return {\r\n                nextCarousel: nextCarousel,\r\n                prevCarousel: prevCarousel,\r\n                toBlock: toBlock,\r\n                registerSlider: register,\r\n                removeSlider: remove,\r\n                getSliderScope: getSlider\r\n            };\r\n\r\n            function register(sliderId, sliderScope) {\r\n                sliders[sliderId] = sliderScope;\r\n            }\r\n            \r\n            function remove(sliderId) {\r\n                delete sliders[sliderId];\r\n            }\r\n\r\n            function getSlider(sliderId) {\r\n                return sliders[sliderId];\r\n            }\r\n\r\n            function nextCarousel(nextBlock, prevBlock) {\r\n                nextBlock.addClass('pip-next');\r\n                \r\n                $timeout(function () {\r\n                    nextBlock.addClass('animated').addClass('pip-show').removeClass('pip-next');\r\n                    prevBlock.addClass('animated').removeClass('pip-show');\r\n                }, 100);\r\n            }\r\n\r\n            function prevCarousel(nextBlock, prevBlock) {\r\n                $timeout(function () {\r\n                    nextBlock.addClass('animated').addClass('pip-show');\r\n                    prevBlock.addClass('animated').addClass('pip-next').removeClass('pip-show');\r\n                }, 100);\r\n            }\r\n\r\n            function toBlock(type, blocks, oldIndex, nextIndex, direction) {\r\n                var prevBlock = $(blocks[oldIndex]),\r\n                    blockIndex = nextIndex,\r\n                    nextBlock = $(blocks[blockIndex]);\r\n\r\n                if (type === 'carousel') {\r\n                    $(blocks).removeClass('pip-next').removeClass('pip-prev').removeClass('animated');\r\n\r\n                    if (direction && (direction === 'prev' || direction === 'next')) {\r\n                        if (direction === 'prev') {\r\n                            prevCarousel(nextBlock, prevBlock);\r\n                        } else {\r\n                            nextCarousel(nextBlock, prevBlock);\r\n                        }\r\n                    } else {\r\n                        if (nextIndex && nextIndex < oldIndex) {\r\n                            prevCarousel(nextBlock, prevBlock);\r\n                        } else {\r\n                            nextCarousel(nextBlock, prevBlock);\r\n                        }\r\n                    }\r\n                } else {\r\n                    prevBlock.addClass('animated').removeClass('pip-show');\r\n                    nextBlock.addClass('animated').addClass('pip-show');\r\n                }\r\n            }\r\n        }\r\n    );\r\n\r\n})();\r\n","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipSliderButton', []);\r\n\r\n    thisModule.directive('pipSliderButton',\r\n        function () {\r\n            return {\r\n                scope: {},\r\n                controller: function ($scope, $element, $parse, $attrs, $pipImageSlider) {\r\n                    var type = $parse($attrs.pipButtonType)($scope),\r\n                        sliderId = $parse($attrs.pipSliderId)($scope);\r\n\r\n                    $element.on('click', function () {\r\n                        if (!sliderId || !type) {\r\n                            return;\r\n                        }\r\n\r\n                        $pipImageSlider.getSliderScope(sliderId)[type + 'Block']();\r\n                    });\r\n                }\r\n            };\r\n        }\r\n    );\r\n\r\n})();\r\n","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipSliderIndicator', []);\r\n\r\n    thisModule.directive('pipSliderIndicator',\r\n        function () {\r\n            return {\r\n                scope: false,\r\n                controller: function ($scope, $element, $parse, $attrs, $pipImageSlider) {\r\n                    var sliderId = $parse($attrs.pipSliderId)($scope),\r\n                        slideTo = $parse($attrs.pipSlideTo)($scope);\r\n\r\n                    $element.css('cursor', 'pointer');\r\n                    $element.on('click', function () {\r\n                        if (!sliderId || slideTo && slideTo < 0) {\r\n                            return;\r\n                        }\r\n\r\n                        $pipImageSlider.getSliderScope(sliderId).slideTo(slideTo);\r\n                    });\r\n                }\r\n            };\r\n        }\r\n    );\r\n\r\n})();\r\n","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\ndeclare var marked: any;\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipMarkdown', ['ngSanitize']);\r\n\r\n    thisModule.run(function ($injector) {\r\n        var pipTranslate = $injector.has('pipTranslate') ? $injector.get('pipTranslate') : null;\r\n\r\n        if (pipTranslate) {\r\n            pipTranslate.setTranslations('en', {\r\n                'MARKDOWN_ATTACHMENTS': 'Attachments:',\r\n                'checklist': 'Checklist',\r\n                'documents': 'Documents',\r\n                'pictures': 'Pictures',\r\n                'location': 'Location',\r\n                'time': 'Time'\r\n            });\r\n            pipTranslate.setTranslations('ru', {\r\n                'MARKDOWN_ATTACHMENTS': 'Вложения:',\r\n                'checklist': 'Список',\r\n                'documents': 'Документы',\r\n                'pictures': 'Изображения',\r\n                'location': 'Местонахождение',\r\n                'time': 'Время'\r\n            });\r\n        }\r\n    });\r\n\r\n    thisModule.directive('pipMarkdown',\r\n        function ($parse, $injector) {\r\n            var pipTranslate = $injector.has('pipTranslate') ? $injector.get('pipTranslate') : null;\r\n\r\n            return {\r\n                restrict: 'EA',\r\n                scope: false,\r\n                link: function ($scope: any, $element, $attrs: any) {\r\n                    var\r\n                        textGetter = $parse($attrs.pipText),\r\n                        listGetter = $parse($attrs.pipList),\r\n                        clampGetter = $parse($attrs.pipLineCount);\r\n\r\n                    function describeAttachments(array) {\r\n                        var attachString = '',\r\n                            attachTypes = [];\r\n\r\n                        _.each(array, function (attach) {\r\n                            if (attach.type && attach.type !== 'text') {\r\n                                if (attachString.length === 0 && pipTranslate) {\r\n                                    attachString = pipTranslate.translate('MARKDOWN_ATTACHMENTS');\r\n                                }\r\n\r\n                                if (attachTypes.indexOf(attach.type) < 0) {\r\n                                    attachTypes.push(attach.type);\r\n                                    attachString += attachTypes.length > 1 ? ', ' : ' ';\r\n                                    if (pipTranslate)\r\n                                        attachString += pipTranslate.translate(attach.type);\r\n                                }\r\n                            }\r\n                        });\r\n\r\n                        return attachString;\r\n                    }\r\n\r\n                    function toBoolean(value) {\r\n                        if (value == null) return false;\r\n                        if (!value) return false;\r\n                        value = value.toString().toLowerCase();\r\n                        return value == '1' || value == 'true';\r\n                    }\r\n\r\n                    function bindText(value) {\r\n                        var textString, isClamped, height, options, obj;\r\n\r\n                        if (_.isArray(value)) {\r\n                            obj = _.find(value, function (item: any) {\r\n                                return item.type === 'text' && item.text;\r\n                            });\r\n\r\n                            textString = obj ? obj.text : describeAttachments(value);\r\n                        } else {\r\n                            textString = value;\r\n                        }\r\n\r\n                        isClamped = $attrs.pipLineCount && _.isNumber(clampGetter());\r\n                        isClamped = isClamped && textString && textString.length > 0;\r\n                        options = {\r\n                            gfm: true,\r\n                            tables: true,\r\n                            breaks: true,\r\n                            sanitize: true,\r\n                            pedantic: true,\r\n                            smartLists: true,\r\n                            smartypents: false\r\n                        };\r\n                        textString = marked(textString || '', options);\r\n                        if (isClamped) {\r\n                            height = 1.5 * clampGetter();\r\n                        }\r\n                        // Assign value as HTML\r\n                        $element.html('<div' + (isClamped ? listGetter() ? 'class=\"pip-markdown-content ' +\r\n                            'pip-markdown-list\" style=\"max-height: ' + height + 'em\">'\r\n                                : ' class=\"pip-markdown-content\" style=\"max-height: ' + height + 'em\">' : listGetter()\r\n                                ? ' class=\"pip-markdown-list\">' : '>') + textString + '</div>');\r\n                        $element.find('a').attr('target', 'blank');\r\n                        if (!listGetter() && isClamped) {\r\n                            $element.append('<div class=\"pip-gradient-block\"></div>');\r\n                        }\r\n                    }\r\n\r\n                    // Fill the text\r\n                    bindText(textGetter($scope));\r\n\r\n                    // Also optimization to avoid watch if it is unnecessary\r\n                    if (toBoolean($attrs.pipRebind)) {\r\n                        $scope.$watch(textGetter, function (newValue) {\r\n                            bindText(newValue);\r\n                        });\r\n                    }\r\n\r\n                    $scope.$on('pipWindowResized', function () {\r\n                        bindText(textGetter($scope));\r\n                    });\r\n\r\n                    // Add class\r\n                    $element.addClass('pip-markdown');\r\n                }\r\n            };\r\n        }\r\n    );\r\n\r\n})();\r\n\r\n","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipPopover', ['pipPopover.Service']);\r\n\r\n    thisModule.directive('pipPopover', function () {\r\n        return {\r\n            restrict: 'EA',\r\n            scope: true,\r\n            templateUrl: 'popover/popover.html',\r\n            controller: function ($scope, $rootScope, $element, $timeout, $compile) {\r\n                var backdropElement, content;\r\n\r\n                backdropElement = $('.pip-popover-backdrop');\r\n                backdropElement.on('click keydown scroll', backdropClick);\r\n                backdropElement.addClass($scope.params.responsive !== false ? 'pip-responsive' : '');\r\n\r\n                $timeout(function () {\r\n                    position();\r\n                    if ($scope.params.template) {\r\n                        content = $compile($scope.params.template)($scope);\r\n                        $element.find('.pip-popover').append(content);\r\n                    }\r\n\r\n                    init();\r\n                });\r\n\r\n                $timeout(function () {\r\n                    calcHeight();\r\n                }, 200);\r\n\r\n                $scope.onPopoverClick = onPopoverClick;\r\n                $scope = _.defaults($scope, $scope.$parent);    // eslint-disable-line \r\n\r\n                $rootScope.$on('pipPopoverResize', onResize);\r\n                $(window).resize(onResize);\r\n\r\n                function init() {\r\n                    backdropElement.addClass('opened');\r\n                    $('.pip-popover-backdrop').focus();\r\n                    if ($scope.params.timeout) {\r\n                        $timeout(function () {\r\n                            closePopover();\r\n                        }, $scope.params.timeout);\r\n                    }\r\n                }\r\n\r\n                function backdropClick() {\r\n                    if ($scope.params.cancelCallback) {\r\n                        $scope.params.cancelCallback();\r\n                    }\r\n\r\n                    closePopover();\r\n                }\r\n\r\n                function closePopover() {\r\n                    backdropElement.removeClass('opened');\r\n                    $timeout(function () {\r\n                        backdropElement.remove();\r\n                    }, 100);\r\n                }\r\n\r\n                function onPopoverClick($e) {\r\n                    $e.stopPropagation();\r\n                }\r\n\r\n                function position() {\r\n                    if ($scope.params.element) {\r\n                        var element = $($scope.params.element),\r\n                            pos = element.offset(),\r\n                            width = element.width(),\r\n                            height = element.height(),\r\n                            docWidth = $(document).width(),\r\n                            docHeight = $(document).height(),\r\n                            popover = backdropElement.find('.pip-popover');\r\n\r\n                        if (pos) {\r\n                            popover\r\n                                .css('max-width', docWidth - (docWidth - pos.left))\r\n                                .css('max-height', docHeight - (pos.top + height) - 32, 0)\r\n                                .css('left', pos.left - popover.width() + width / 2)\r\n                                .css('top', pos.top + height + 16);\r\n                        }\r\n                    }\r\n                }\r\n\r\n                function calcHeight() {\r\n                    if ($scope.params.calcHeight === false) { return; }\r\n\r\n                    var popover = backdropElement.find('.pip-popover'),\r\n                        title = popover.find('.pip-title'),\r\n                        footer = popover.find('.pip-footer'),\r\n                        content = popover.find('.pip-content'),\r\n                        contentHeight = popover.height() - title.outerHeight(true) - footer.outerHeight(true);\r\n\r\n                    content.css('max-height', Math.max(contentHeight, 0) + 'px').css('box-sizing', 'border-box');\r\n                }\r\n\r\n                function onResize() {\r\n                    backdropElement.find('.pip-popover').find('.pip-content').css('max-height', '100%');\r\n                    position();\r\n                    calcHeight();\r\n                }\r\n            }\r\n        };\r\n    });\r\n\r\n})();\r\n","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipPopover.Service', []);\r\n\r\n    thisModule.service('pipPopoverService',\r\n        function ($compile, $rootScope, $timeout) {\r\n            var popoverTemplate;\r\n\r\n            popoverTemplate = \"<div class='pip-popover-backdrop {{ params.class }}' ng-controller='params.controller'\" +\r\n                \" tabindex='1'> <pip-popover pip-params='params'> </pip-popover> </div>\";\r\n\r\n            return {\r\n                show: onShow,\r\n                hide: onHide,\r\n                resize: onResize\r\n            };\r\n\r\n            function onShow(p) {\r\n                var element, scope, params, content;\r\n\r\n                element = $('body');\r\n                if (element.find('md-backdrop').length > 0) { return; }\r\n                onHide();\r\n                scope = $rootScope.$new();\r\n                params = p && _.isObject(p) ? p : {};\r\n                scope.params = params;\r\n                scope.locals = params.locals;\r\n                content = $compile(popoverTemplate)(scope);\r\n                element.append(content);\r\n            }\r\n\r\n            function onHide() {\r\n                var backdropElement = $('.pip-popover-backdrop');\r\n\r\n                backdropElement.removeClass('opened');\r\n                $timeout(function () {\r\n                    backdropElement.remove();\r\n                }, 100);\r\n            }\r\n\r\n            function onResize() {\r\n                $rootScope.$broadcast('pipPopoverResize');\r\n            }\r\n\r\n        }\r\n    );\r\n\r\n})();\r\n","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipRoutingProgress', ['ngMaterial']);\r\n\r\n    thisModule.directive('pipRoutingProgress', function () {\r\n        return {\r\n            restrict: 'EA',\r\n            replace: true,\r\n            scope: {\r\n                    showProgress: '&',\r\n                    logoUrl: '@'\r\n                },\r\n            templateUrl: 'progress/routing_progress.html',\r\n            controller: 'pipRoutingProgressController'\r\n        };\r\n    });\r\n\r\n    thisModule.controller('pipRoutingProgressController',\r\n        function ($scope, $element, $attrs) {\r\n            var  image = $element.children('img');          \r\n\r\n            loadProgressImage();\r\n\r\n            return;\r\n\r\n            function loadProgressImage() {\r\n                if ($scope.logoUrl) {\r\n                    image.attr('src', $scope.logoUrl);\r\n                }\r\n            }\r\n\r\n        }\r\n    );\r\n\r\n})();\r\n","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\n(function () {\r\n    'use strict';\r\n    var thisModule = angular.module('pipToasts', ['ngMaterial', 'pipControls.Translate']);\r\n\r\n    thisModule.controller('pipToastController',\r\n        function ($scope, $mdToast, toast, $injector) {\r\n            var pipErrorDetailsDialog = $injector.has('pipErrorDetailsDialog') \r\n                ? $injector.get('pipErrorDetailsDialog') : null;\r\n\r\n            // if (toast.type && sounds['toast_' + toast.type]) {\r\n            //     sounds['toast_' + toast.type].play();\r\n            // }\r\n\r\n            $scope.message = toast.message;\r\n            $scope.actions = toast.actions;\r\n            $scope.toast = toast;\r\n            \r\n            if (toast.actions.length === 0) {\r\n                $scope.actionLenght = 0;\r\n            } else if (toast.actions.length === 1) {\r\n                $scope.actionLenght = toast.actions[0].toString().length;\r\n            } else {\r\n                $scope.actionLenght = null;\r\n            }\r\n\r\n            $scope.showDetails = pipErrorDetailsDialog != null;\r\n            $scope.onDetails = function () {\r\n                $mdToast.hide();\r\n\r\n                if (pipErrorDetailsDialog) {\r\n                    pipErrorDetailsDialog.show(\r\n                        {\r\n                            error: $scope.toast.error,\r\n                            ok: 'Ok'\r\n                        },\r\n                        angular.noop,\r\n                        angular.noop\r\n                    );\r\n                }\r\n            };\r\n\r\n            $scope.onAction = function (action) {\r\n                $mdToast.hide(\r\n                    {\r\n                        action: action,\r\n                        id: toast.id,\r\n                        message: toast.message\r\n                    });\r\n            };\r\n        }\r\n    );\r\n\r\n    thisModule.service('pipToasts',\r\n        function ($rootScope, $mdToast) {\r\n            var\r\n                SHOW_TIMEOUT = 20000,\r\n                SHOW_TIMEOUT_NOTIFICATIONS = 20000,\r\n                toasts = [],\r\n                currentToast,\r\n                sounds = {};\r\n\r\n            /** pre-load sounds for notifications */\r\n                // sounds['toast_error'] = ngAudio.load('sounds/fatal.mp3');\r\n                // sounds['toast_notification'] = ngAudio.load('sounds/error.mp3');\r\n                // sounds['toast_message'] = ngAudio.load('sounds/warning.mp3');\r\n\r\n                // Remove error toasts when page is changed\r\n            $rootScope.$on('$stateChangeSuccess', onStateChangeSuccess);\r\n            $rootScope.$on('pipSessionClosed', onClearToasts);\r\n            $rootScope.$on('pipIdentityChanged', onClearToasts);\r\n\r\n            return {\r\n                showNotification: showNotification,\r\n                showMessage: showMessage,\r\n                showError: showError,\r\n                hideAllToasts: hideAllToasts,\r\n                clearToasts: clearToasts,\r\n                removeToastsById: removeToastsById,\r\n                getToastById: getToastById\r\n            };\r\n\r\n            // Take the next from queue and show it\r\n            function showNextToast() {\r\n                var toast;\r\n\r\n                if (toasts.length > 0) {\r\n                    toast = toasts[0];\r\n                    toasts.splice(0, 1);\r\n                    showToast(toast);\r\n                }\r\n            }\r\n\r\n            // Show toast\r\n            function showToast(toast) {\r\n                currentToast = toast;\r\n\r\n                $mdToast.show({\r\n                    templateUrl: 'toast/toast.html',\r\n                    hideDelay: toast.duration || SHOW_TIMEOUT,\r\n                    position: 'bottom left',\r\n                    controller: 'pipToastController',\r\n                    locals: {\r\n                        toast: currentToast,\r\n                        sounds: sounds\r\n                    }\r\n                })\r\n                    .then(\r\n                    function showToastOkResult(action) {\r\n                        if (currentToast.successCallback) {\r\n                            currentToast.successCallback(action);\r\n                        }\r\n                        currentToast = null;\r\n                        showNextToast();\r\n                    },\r\n                    function showToastCancelResult(action) {\r\n                        if (currentToast.cancelCallback) {\r\n                            currentToast.cancelCallback(action);\r\n                        }\r\n                        currentToast = null;\r\n                        showNextToast();\r\n                    }\r\n                );\r\n            }\r\n\r\n            function addToast(toast) {\r\n                if (currentToast && toast.type !== 'error') {\r\n                    toasts.push(toast);\r\n                } else {\r\n                    showToast(toast);\r\n                }\r\n            }\r\n\r\n            function removeToasts(type) {\r\n                var result = [];\r\n\r\n                _.each(toasts, function (toast) {\r\n                    if (!toast.type || toast.type !== type) {\r\n                        result.push(toast);\r\n                    }\r\n                });\r\n                toasts = _.cloneDeep(result);\r\n            }\r\n\r\n            function removeToastsById(id) {\r\n                _.remove(toasts, {id: id});\r\n            }\r\n\r\n            function getToastById(id) {\r\n                return _.find(toasts, {id: id});\r\n            }\r\n\r\n            function onStateChangeSuccess() {\r\n                toasts = _.reject(toasts, function (toast) {\r\n                    return toast.type === 'error';\r\n                });\r\n\r\n                if (currentToast && currentToast.type === 'error') {\r\n                    $mdToast.cancel();\r\n                    showNextToast();\r\n                }\r\n            }\r\n\r\n            function onClearToasts() {\r\n                clearToasts();\r\n            }\r\n\r\n            // Show new notification toast at the top right\r\n            function showNotification(message, actions, successCallback, cancelCallback, id) {\r\n                // pipAssert.isDef(message, 'pipToasts.showNotification: message should be defined');\r\n                // pipAssert.isString(message, 'pipToasts.showNotification: message should be a string');\r\n                // pipAssert.isArray(actions || [], 'pipToasts.showNotification: actions should be an array');\r\n                // if (successCallback) {\r\n                //     pipAssert.isFunction(successCallback, 'showNotification: successCallback should be a function');\r\n                // }\r\n                // if (cancelCallback) {\r\n                //     pipAssert.isFunction(cancelCallback, 'showNotification: cancelCallback should be a function');\r\n                // }\r\n\r\n                addToast({\r\n                    id: id || null,\r\n                    type: 'notification',\r\n                    message: message,\r\n                    actions: actions || ['ok'],\r\n                    successCallback: successCallback,\r\n                    cancelCallback: cancelCallback,\r\n                    duration: SHOW_TIMEOUT_NOTIFICATIONS\r\n                });\r\n            }\r\n\r\n            // Show new message toast at the top right\r\n            function showMessage(message, successCallback, cancelCallback, id) {\r\n                // pipAssert.isDef(message, 'pipToasts.showMessage: message should be defined');\r\n                // pipAssert.isString(message, 'pipToasts.showMessage: message should be a string');\r\n                // if (successCallback) {\r\n                //     pipAssert.isFunction(successCallback, 'pipToasts.showMessage:successCallback should be a function');\r\n                // }\r\n                // if (cancelCallback) {\r\n                //     pipAssert.isFunction(cancelCallback, 'pipToasts.showMessage: cancelCallback should be a function');\r\n                // }\r\n\r\n                addToast({\r\n                    id: id || null,\r\n                    type: 'message',\r\n                    message: message,\r\n                    actions: ['ok'],\r\n                    successCallback: successCallback,\r\n                    cancelCallback: cancelCallback\r\n                });\r\n            }\r\n\r\n            // Show error toast at the bottom right after error occured\r\n            function showError(message, successCallback, cancelCallback, id, error) {\r\n                // pipAssert.isDef(message, 'pipToasts.showError: message should be defined');\r\n                // pipAssert.isString(message, 'pipToasts.showError: message should be a string');\r\n                // if (successCallback) {\r\n                //     pipAssert.isFunction(successCallback, 'pipToasts.showError: successCallback should be a function');\r\n                // }\r\n                // if (cancelCallback) {\r\n                //     pipAssert.isFunction(cancelCallback, 'pipToasts.showError: cancelCallback should be a function');\r\n                // }\r\n\r\n                addToast({\r\n                    id: id || null,\r\n                    error: error,\r\n                    type: 'error',\r\n                    message: message,\r\n                    actions: ['ok'],\r\n                    successCallback: successCallback,\r\n                    cancelCallback: cancelCallback\r\n                });\r\n            }\r\n\r\n            // Hide and clear all toast when user signs out\r\n            function hideAllToasts() {\r\n                $mdToast.cancel();\r\n                toasts = [];\r\n            }\r\n\r\n            // Clear toasts by type\r\n            function clearToasts(type?: any) {\r\n                if (type) {\r\n                    // pipAssert.isString(type, 'pipToasts.clearToasts: type should be a string');\r\n                    removeToasts(type);\r\n                } else {\r\n                    $mdToast.cancel();\r\n                    toasts = [];\r\n                }\r\n            }\r\n        }\r\n    );\r\n\r\n})();\r\n","(function(module) {\ntry {\n  module = angular.module('pipControls.Templates');\n} catch (e) {\n  module = angular.module('pipControls.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('color_picker/color_picker.html',\n    '<ul class=\"pip-color-picker {{class}}\" pip-selected=\"currentColorIndex\" pip-enter-space-press=\"enterSpacePress($event)\">\\n' +\n    '    <li tabindex=\"-1\" ng-repeat=\"color in colors track by color\">\\n' +\n    '        <md-button  tabindex=\"-1\" class=\"md-icon-button pip-selectable\" ng-click=\"selectColor($index)\" aria-label=\"color\" ng-disabled=\"disabled()\">\\n' +\n    '            <md-icon ng-style=\"{\\'color\\': color}\" md-svg-icon=\"icons:{{ color == currentColor ? \\'circle\\' : \\'radio-off\\' }}\">\\n' +\n    '            </md-icon>\\n' +\n    '        </md-button>\\n' +\n    '    </li>\\n' +\n    '</ul>\\n' +\n    '');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipControls.Templates');\n} catch (e) {\n  module = angular.module('pipControls.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('popover/popover.html',\n    '<div ng-if=\"params.templateUrl\" class=\\'pip-popover flex layout-column\\'\\n' +\n    '     ng-click=\"onPopoverClick($event)\" ng-include=\"params.templateUrl\">\\n' +\n    '</div>\\n' +\n    '\\n' +\n    '<div ng-if=\"params.template\" class=\\'pip-popover\\' ng-click=\"onPopoverClick($event)\">\\n' +\n    '</div>\\n' +\n    '');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipControls.Templates');\n} catch (e) {\n  module = angular.module('pipControls.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('progress/routing_progress.html',\n    '<div class=\"pip-routing-progress layout-column layout-align-center-center\"\\n' +\n    '        ng-show=\"showProgress()\">\\n' +\n    '     <!--ng-show=\"$routing || $reset || toolInitialized\">-->\\n' +\n    '    <div class=\"loader\">\\n' +\n    '        <svg class=\"circular\" viewBox=\"25 25 50 50\">\\n' +\n    '            <circle class=\"path\" cx=\"50\" cy=\"50\" r=\"20\" fill=\"none\" stroke-width=\"2\" stroke-miterlimit=\"10\"/>\\n' +\n    '        </svg>\\n' +\n    '    </div>\\n' +\n    '\\n' +\n    '    <img src=\"\"  height=\"40\" width=\"40\" class=\"pip-img\">\\n' +\n    '\\n' +\n    '    <md-progress-circular md-diameter=\"96\"\\n' +\n    '                          class=\"fix-ie\"></md-progress-circular>\\n' +\n    '\\n' +\n    '</div>\\n' +\n    '');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipControls.Templates');\n} catch (e) {\n  module = angular.module('pipControls.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('toast/toast.html',\n    '<md-toast class=\"md-action pip-toast\"\\n' +\n    '          ng-class=\"{\\'pip-error\\': toast.type==\\'error\\',\\n' +\n    '          \\'pip-column-toast\\': toast.type == \\'error\\' || toast.actions.length > 1 || actionLenght > 4,\\n' +\n    '          \\'pip-no-action-toast\\': actionLenght == 0}\"\\n' +\n    '          style=\"height:initial; max-height: initial; \">\\n' +\n    '\\n' +\n    '    <span class=\"flex-var pip-text\" ng-bind-html=\"message\"></span>\\n' +\n    '    <div class=\"layout-row layout-align-end-start\" class=\"pip-actions\" ng-if=\"actions.length > 0 || (toast.type==\\'error\\' && toast.error)\">\\n' +\n    '        <md-button class=\"flex-fixed pip-toast-button\" ng-if=\"toast.type==\\'error\\' && toast.error && showDetails\" ng-click=\"onDetails()\">Details</md-button>\\n' +\n    '        <md-button class=\"flex-fixed pip-toast-button\"\\n' +\n    '                   ng-click=\"onAction(action)\"\\n' +\n    '                   ng-repeat=\"action in actions\"\\n' +\n    '                   aria-label=\"{{::action| translate}}\">\\n' +\n    '            {{::action| translate}}\\n' +\n    '        </md-button>\\n' +\n    '    </div>\\n' +\n    '\\n' +\n    '</md-toast>');\n}]);\n})();\n\n//# sourceMappingURL=pip-webui-controls-html.js.map\n"]}