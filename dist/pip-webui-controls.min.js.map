{"version":3,"sources":["color_picker/color_picker.html","popover/popover.html","progress/routing_progress.html","toast/toast.html","controls.ts","color_picker/color_picker.ts","dependencies/translate.ts","image_slider/image_slider.ts","image_slider/image_slider_service.ts","image_slider/slider_button.ts","image_slider/slider_indicator.ts","markdown/markdown.ts","popover/popover.ts","popover/popover_service.ts","progress/routing_progress.ts","toast/toasts.ts"],"names":["module","angular","e","run","$templateCache","put","thisModule","directive","restrict","scope","ngDisabled","colors","currentColor","colorChange","templateUrl","controller","$scope","$element","$attrs","$timeout","DEFAULT_COLORS","class","_","isArray","length","currentColorIndex","indexOf","disabled","selectColor","index","$apply","enterSpacePress","event","filter","$injector","pipTranslate","has","get","key","translate","sliderIndex","$parse","$interval","$pipImageSlider","setIndex","pipImageIndex","startInterval","timePromises","newIndex","blocks","direction","throttled","interval","DEFAULT_INTERVAL","stopInterval","cancel","restartInterval","type","pipAnimationType","pipAnimationInterval","addClass","swipeStart","find","$","throttle","toBlock","nextBlock","prevBlock","slideTo","nextIndex","id","registerSlider","on","removeSlider","service","register","sliderId","sliderScope","sliders","remove","getSlider","nextCarousel","removeClass","prevCarousel","oldIndex","blockIndex","getSliderScope","pipButtonType","pipSliderId","pipSlideTo","css","setTranslations","MARKDOWN_ATTACHMENTS","checklist","documents","pictures","location","time","link","describeAttachments","array","attachString","attachTypes","each","attach","push","toBoolean","value","toString","toLowerCase","bindText","textString","isClamped","height","options","obj","item","text","pipLineCount","isNumber","clampGetter","gfm","tables","breaks","sanitize","pedantic","smartLists","smartypents","marked","html","listGetter","attr","append","textGetter","pipText","pipList","pipRebind","$watch","newValue","$on","$rootScope","$compile","init","backdropElement","focus","params","timeout","closePopover","backdropClick","cancelCallback","onPopoverClick","$e","stopPropagation","position","element","pos","offset","width","docWidth","document","docHeight","popover","left","top","calcHeight","title","footer","content","contentHeight","outerHeight","Math","max","onResize","responsive","template","defaults","$parent","window","resize","onShow","p","onHide","$new","isObject","locals","popoverTemplate","$broadcast","show","hide","replace","showProgress","logoUrl","loadProgressImage","image","children","$mdToast","toast","pipErrorDetailsDialog","message","actions","actionLenght","showDetails","onDetails","error","ok","noop","onAction","action","showNextToast","toasts","splice","showToast","currentToast","hideDelay","duration","SHOW_TIMEOUT","sounds","then","successCallback","addToast","removeToasts","result","cloneDeep","removeToastsById","getToastById","onStateChangeSuccess","reject","onClearToasts","clearToasts","showNotification","SHOW_TIMEOUT_NOTIFICATIONS","showMessage","showError","hideAllToasts"],"mappings":"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","file":"pip-webui-controls.min.js","sourcesContent":["<ul class=\"pip-color-picker {{class}}\" pip-selected=\"currentColorIndex\" pip-enter-space-press=\"enterSpacePress($event)\">\r\n    <li tabindex=\"-1\" ng-repeat=\"color in colors track by color\">\r\n        <md-button  tabindex=\"-1\" class=\"md-icon-button pip-selectable\" ng-click=\"selectColor($index)\" aria-label=\"color\" ng-disabled=\"disabled()\">\r\n            <md-icon ng-style=\"{'color': color}\" md-svg-icon=\"icons:{{ color == currentColor ? 'circle' : 'radio-off' }}\">\r\n            </md-icon>\r\n        </md-button>\r\n    </li>\r\n</ul>\r\n","<div ng-if=\"params.templateUrl\" class='pip-popover flex layout-column'\r\n     ng-click=\"onPopoverClick($event)\" ng-include=\"params.templateUrl\">\r\n</div>\r\n\r\n<div ng-if=\"params.template\" class='pip-popover' ng-click=\"onPopoverClick($event)\">\r\n</div>\r\n","<div class=\"pip-routing-progress layout-column layout-align-center-center\"\r\n        ng-show=\"showProgress()\">\r\n     <!--ng-show=\"$routing || $reset || toolInitialized\">-->\r\n    <div class=\"loader\">\r\n        <svg class=\"circular\" viewBox=\"25 25 50 50\">\r\n            <circle class=\"path\" cx=\"50\" cy=\"50\" r=\"20\" fill=\"none\" stroke-width=\"2\" stroke-miterlimit=\"10\"/>\r\n        </svg>\r\n    </div>\r\n\r\n    <img src=\"\"  height=\"40\" width=\"40\" class=\"pip-img\">\r\n\r\n    <md-progress-circular md-diameter=\"96\"\r\n                          class=\"fix-ie\"></md-progress-circular>\r\n\r\n</div>\r\n","<md-toast class=\"md-action pip-toast\"\r\n          ng-class=\"{'pip-error': toast.type=='error',\r\n          'pip-column-toast': toast.type == 'error' || toast.actions.length > 1 || actionLenght > 4,\r\n          'pip-no-action-toast': actionLenght == 0}\"\r\n          style=\"height:initial; max-height: initial; \">\r\n\r\n    <span class=\"flex-var pip-text\" ng-bind-html=\"message\"></span>\r\n    <div class=\"layout-row layout-align-end-start\" class=\"pip-actions\" ng-if=\"actions.length > 0 || (toast.type=='error' && toast.error)\">\r\n        <md-button class=\"flex-fixed pip-toast-button\" ng-if=\"toast.type=='error' && toast.error && showDetails\" ng-click=\"onDetails()\">Details</md-button>\r\n        <md-button class=\"flex-fixed pip-toast-button\"\r\n                   ng-click=\"onAction(action)\"\r\n                   ng-repeat=\"action in actions\"\r\n                   aria-label=\"{{::action| translate}}\">\r\n            {{::action| translate}}\r\n        </md-button>\r\n    </div>\r\n\r\n</md-toast>","/// <reference path=\"../typings/tsd.d.ts\" />\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    angular.module('pipControls', [\r\n        'pipMarkdown',\r\n        'pipColorPicker',\r\n        'pipRoutingProgress',\r\n        'pipPopover',\r\n        'pipImageSlider',\r\n        'pipToasts',\r\n        'pipControls.Translate'\r\n    ]);\r\n\r\n})();\r\n\r\n","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipColorPicker', [ 'pipControls.Templates']); // 'pipFocused',\r\n\r\n    thisModule.directive('pipColorPicker',\r\n        function () {\r\n            return {\r\n                restrict: 'EA',\r\n                scope: {\r\n                    ngDisabled: '&',\r\n                    colors: '=pipColors',\r\n                    currentColor: '=ngModel',\r\n                    colorChange: '&ngChange'\r\n                },\r\n                templateUrl: 'color_picker/color_picker.html',\r\n                controller: 'pipColorPickerController'\r\n            };\r\n        }\r\n    );\r\n    thisModule.controller('pipColorPickerController',\r\n        function ($scope, $element, $attrs, $timeout) {\r\n            var\r\n                DEFAULT_COLORS = ['purple', 'lightgreen', 'green', 'darkred', 'pink', 'yellow', 'cyan'];\r\n\r\n            $scope.class = $attrs.class || '';\r\n\r\n            if (!$scope.colors || _.isArray($scope.colors) && $scope.colors.length === 0) {\r\n                $scope.colors = DEFAULT_COLORS;\r\n            }\r\n\r\n            $scope.currentColor = $scope.currentColor || $scope.colors[0];\r\n            $scope.currentColorIndex = $scope.colors.indexOf($scope.currentColor);\r\n\r\n            $scope.disabled = function () {\r\n                if ($scope.ngDisabled) {\r\n                    return $scope.ngDisabled();\r\n                }\r\n\r\n                return true;\r\n            };\r\n\r\n            $scope.selectColor = function (index) {\r\n                if ($scope.disabled()) {\r\n                    return;\r\n                }\r\n                $scope.currentColorIndex = index;\r\n\r\n                $scope.currentColor = $scope.colors[$scope.currentColorIndex];\r\n\r\n                $timeout(function () {\r\n                    $scope.$apply();\r\n                });\r\n\r\n                if ($scope.colorChange) {\r\n                    $scope.colorChange();\r\n                }\r\n            };\r\n\r\n            $scope.enterSpacePress = function (event) {\r\n                $scope.selectColor(event.index);\r\n            };\r\n        }\r\n    );\r\n\r\n})();\r\n","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipControls.Translate', []);\r\n\r\n    thisModule.filter('translate', function ($injector) {\r\n        var pipTranslate = $injector.has('pipTranslate') \r\n            ? $injector.get('pipTranslate') : null;\r\n\r\n        return function (key) {\r\n            return pipTranslate  ? pipTranslate.translate(key) || key : key;\r\n        }\r\n    });\r\n\r\n})();\r\n","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipImageSlider', ['pipSliderButton', 'pipSliderIndicator', 'pipImageSlider.Service']);\r\n\r\n    thisModule.directive('pipImageSlider',\r\n        function () {\r\n            return {\r\n                scope: {\r\n                    sliderIndex: '=pipImageIndex'\r\n                },\r\n                controller: function ($scope, $element, $attrs, $parse, $timeout, $interval, $pipImageSlider) {\r\n                    var blocks,\r\n                        index = 0, newIndex,\r\n                        direction,\r\n                        type = $parse($attrs.pipAnimationType)($scope),\r\n                        DEFAULT_INTERVAL = 4500,\r\n                        interval = $parse($attrs.pipAnimationInterval)($scope),\r\n                        timePromises,\r\n                        throttled;\r\n\r\n                    $element.addClass('pip-image-slider');\r\n                    $element.addClass('pip-animation-' + type);\r\n\r\n                    $scope.swipeStart = 0;\r\n                    /*\r\n                     if ($swipe)\r\n                     $swipe.bind($element, {\r\n                     'start': function(coords) {\r\n                     if (coords) $scope.swipeStart = coords.x;\r\n                     else $scope.swipeStart = 0;\r\n                     },\r\n                     'end': function(coords) {\r\n                     var delta;\r\n                     if (coords) {\r\n                     delta = $scope.swipeStart - coords.x;\r\n                     if (delta > 150)  $scope.nextBlock();\r\n                     if (delta < -150)  $scope.prevBlock();\r\n                     $scope.swipeStart = 0;\r\n                     } else $scope.swipeStart = 0;\r\n                     }\r\n                     });\r\n                     */\r\n                    setIndex();\r\n\r\n                    $timeout(function () {\r\n                        blocks = $element.find('.pip-animation-block');\r\n                        if (blocks.length > 0) {\r\n                            $(blocks[0]).addClass('pip-show');\r\n                        }\r\n                    });\r\n\r\n                    startInterval();\r\n                    throttled = _.throttle(function () {\r\n                        $pipImageSlider.toBlock(type, blocks, index, newIndex, direction);\r\n                        index = newIndex;\r\n                        setIndex();\r\n                    }, 700);\r\n\r\n                    $scope.nextBlock = function () {\r\n                        restartInterval();\r\n                        newIndex = index + 1 === blocks.length ? 0 : index + 1;\r\n                        direction = 'next';\r\n                        throttled();\r\n                    };\r\n\r\n                    $scope.prevBlock = function () {\r\n                        restartInterval();\r\n                        newIndex = index - 1 < 0 ? blocks.length - 1 : index - 1;\r\n                        direction = 'prev';\r\n                        throttled();\r\n                    };\r\n\r\n                    $scope.slideTo = function (nextIndex) {\r\n                        if (nextIndex === index || nextIndex > blocks.length - 1) {\r\n                            return;\r\n                        }\r\n\r\n                        restartInterval();\r\n                        newIndex = nextIndex;\r\n                        direction = nextIndex > index ? 'next' : 'prev';\r\n                        throttled();\r\n                    };\r\n                    \r\n                    if ($attrs.id) $pipImageSlider.registerSlider($attrs.id, $scope);\r\n\r\n                    function setIndex() {\r\n                        if ($attrs.pipImageIndex) $scope.sliderIndex = index;\r\n                    }\r\n\r\n                    function startInterval() {\r\n                        timePromises = $interval(function () {\r\n                            newIndex = index + 1 === blocks.length ? 0 : index + 1;\r\n                            direction = 'next';\r\n                            throttled();\r\n                        }, interval || DEFAULT_INTERVAL);\r\n                    }\r\n\r\n                    function stopInterval() {\r\n                        $interval.cancel(timePromises);\r\n                    }\r\n\r\n                    $element.on('$destroy', function () {\r\n                        stopInterval();\r\n                        $pipImageSlider.removeSlider($attrs.id);\r\n                    });\r\n\r\n                    function restartInterval() {\r\n                        stopInterval();\r\n                        startInterval();\r\n                    }\r\n                }\r\n            };\r\n        }\r\n    );\r\n\r\n})();\r\n","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipImageSlider.Service', []);\r\n\r\n    thisModule.service('$pipImageSlider',\r\n        function ($timeout) {\r\n\r\n            var ANIMATION_DURATION = 550,\r\n                sliders = {};\r\n\r\n            return {\r\n                nextCarousel: nextCarousel,\r\n                prevCarousel: prevCarousel,\r\n                toBlock: toBlock,\r\n                registerSlider: register,\r\n                removeSlider: remove,\r\n                getSliderScope: getSlider\r\n            };\r\n\r\n            function register(sliderId, sliderScope) {\r\n                sliders[sliderId] = sliderScope;\r\n            }\r\n            \r\n            function remove(sliderId) {\r\n                delete sliders[sliderId];\r\n            }\r\n\r\n            function getSlider(sliderId) {\r\n                return sliders[sliderId];\r\n            }\r\n\r\n            function nextCarousel(nextBlock, prevBlock) {\r\n                nextBlock.addClass('pip-next');\r\n                \r\n                $timeout(function () {\r\n                    nextBlock.addClass('animated').addClass('pip-show').removeClass('pip-next');\r\n                    prevBlock.addClass('animated').removeClass('pip-show');\r\n                }, 100);\r\n            }\r\n\r\n            function prevCarousel(nextBlock, prevBlock) {\r\n                $timeout(function () {\r\n                    nextBlock.addClass('animated').addClass('pip-show');\r\n                    prevBlock.addClass('animated').addClass('pip-next').removeClass('pip-show');\r\n                }, 100);\r\n            }\r\n\r\n            function toBlock(type, blocks, oldIndex, nextIndex, direction) {\r\n                var prevBlock = $(blocks[oldIndex]),\r\n                    blockIndex = nextIndex,\r\n                    nextBlock = $(blocks[blockIndex]);\r\n\r\n                if (type === 'carousel') {\r\n                    $(blocks).removeClass('pip-next').removeClass('pip-prev').removeClass('animated');\r\n\r\n                    if (direction && (direction === 'prev' || direction === 'next')) {\r\n                        if (direction === 'prev') {\r\n                            prevCarousel(nextBlock, prevBlock);\r\n                        } else {\r\n                            nextCarousel(nextBlock, prevBlock);\r\n                        }\r\n                    } else {\r\n                        if (nextIndex && nextIndex < oldIndex) {\r\n                            prevCarousel(nextBlock, prevBlock);\r\n                        } else {\r\n                            nextCarousel(nextBlock, prevBlock);\r\n                        }\r\n                    }\r\n                } else {\r\n                    prevBlock.addClass('animated').removeClass('pip-show');\r\n                    nextBlock.addClass('animated').addClass('pip-show');\r\n                }\r\n            }\r\n        }\r\n    );\r\n\r\n})();\r\n","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipSliderButton', []);\r\n\r\n    thisModule.directive('pipSliderButton',\r\n        function () {\r\n            return {\r\n                scope: {},\r\n                controller: function ($scope, $element, $parse, $attrs, $pipImageSlider) {\r\n                    var type = $parse($attrs.pipButtonType)($scope),\r\n                        sliderId = $parse($attrs.pipSliderId)($scope);\r\n\r\n                    $element.on('click', function () {\r\n                        if (!sliderId || !type) {\r\n                            return;\r\n                        }\r\n\r\n                        $pipImageSlider.getSliderScope(sliderId)[type + 'Block']();\r\n                    });\r\n                }\r\n            };\r\n        }\r\n    );\r\n\r\n})();\r\n","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipSliderIndicator', []);\r\n\r\n    thisModule.directive('pipSliderIndicator',\r\n        function () {\r\n            return {\r\n                scope: false,\r\n                controller: function ($scope, $element, $parse, $attrs, $pipImageSlider) {\r\n                    var sliderId = $parse($attrs.pipSliderId)($scope),\r\n                        slideTo = $parse($attrs.pipSlideTo)($scope);\r\n\r\n                    $element.css('cursor', 'pointer');\r\n                    $element.on('click', function () {\r\n                        if (!sliderId || slideTo && slideTo < 0) {\r\n                            return;\r\n                        }\r\n\r\n                        $pipImageSlider.getSliderScope(sliderId).slideTo(slideTo);\r\n                    });\r\n                }\r\n            };\r\n        }\r\n    );\r\n\r\n})();\r\n","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\ndeclare var marked: any;\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipMarkdown', ['ngSanitize']);\r\n\r\n    thisModule.run(function ($injector) {\r\n        var pipTranslate = $injector.has('pipTranslate') ? $injector.get('pipTranslate') : null;\r\n\r\n        if (pipTranslate) {\r\n            pipTranslate.setTranslations('en', {\r\n                'MARKDOWN_ATTACHMENTS': 'Attachments:',\r\n                'checklist': 'Checklist',\r\n                'documents': 'Documents',\r\n                'pictures': 'Pictures',\r\n                'location': 'Location',\r\n                'time': 'Time'\r\n            });\r\n            pipTranslate.setTranslations('ru', {\r\n                'MARKDOWN_ATTACHMENTS': 'Вложения:',\r\n                'checklist': 'Список',\r\n                'documents': 'Документы',\r\n                'pictures': 'Изображения',\r\n                'location': 'Местонахождение',\r\n                'time': 'Время'\r\n            });\r\n        }\r\n    });\r\n\r\n    thisModule.directive('pipMarkdown',\r\n        function ($parse, $injector) {\r\n            var pipTranslate = $injector.has('pipTranslate') ? $injector.get('pipTranslate') : null;\r\n\r\n            return {\r\n                restrict: 'EA',\r\n                scope: false,\r\n                link: function ($scope: any, $element, $attrs: any) {\r\n                    var\r\n                        textGetter = $parse($attrs.pipText),\r\n                        listGetter = $parse($attrs.pipList),\r\n                        clampGetter = $parse($attrs.pipLineCount);\r\n\r\n                    function describeAttachments(array) {\r\n                        var attachString = '',\r\n                            attachTypes = [];\r\n\r\n                        _.each(array, function (attach) {\r\n                            if (attach.type && attach.type !== 'text') {\r\n                                if (attachString.length === 0 && pipTranslate) {\r\n                                    attachString = pipTranslate.translate('MARKDOWN_ATTACHMENTS');\r\n                                }\r\n\r\n                                if (attachTypes.indexOf(attach.type) < 0) {\r\n                                    attachTypes.push(attach.type);\r\n                                    attachString += attachTypes.length > 1 ? ', ' : ' ';\r\n                                    if (pipTranslate)\r\n                                        attachString += pipTranslate.translate(attach.type);\r\n                                }\r\n                            }\r\n                        });\r\n\r\n                        return attachString;\r\n                    }\r\n\r\n                    function toBoolean(value) {\r\n                        if (value == null) return false;\r\n                        if (!value) return false;\r\n                        value = value.toString().toLowerCase();\r\n                        return value == '1' || value == 'true';\r\n                    }\r\n\r\n                    function bindText(value) {\r\n                        var textString, isClamped, height, options, obj;\r\n\r\n                        if (_.isArray(value)) {\r\n                            obj = _.find(value, function (item: any) {\r\n                                return item.type === 'text' && item.text;\r\n                            });\r\n\r\n                            textString = obj ? obj.text : describeAttachments(value);\r\n                        } else {\r\n                            textString = value;\r\n                        }\r\n\r\n                        isClamped = $attrs.pipLineCount && _.isNumber(clampGetter());\r\n                        isClamped = isClamped && textString && textString.length > 0;\r\n                        options = {\r\n                            gfm: true,\r\n                            tables: true,\r\n                            breaks: true,\r\n                            sanitize: true,\r\n                            pedantic: true,\r\n                            smartLists: true,\r\n                            smartypents: false\r\n                        };\r\n                        textString = marked(textString || '', options);\r\n                        if (isClamped) {\r\n                            height = 1.5 * clampGetter();\r\n                        }\r\n                        // Assign value as HTML\r\n                        $element.html('<div' + (isClamped ? listGetter() ? 'class=\"pip-markdown-content ' +\r\n                            'pip-markdown-list\" style=\"max-height: ' + height + 'em\">'\r\n                                : ' class=\"pip-markdown-content\" style=\"max-height: ' + height + 'em\">' : listGetter()\r\n                                ? ' class=\"pip-markdown-list\">' : '>') + textString + '</div>');\r\n                        $element.find('a').attr('target', 'blank');\r\n                        if (!listGetter() && isClamped) {\r\n                            $element.append('<div class=\"pip-gradient-block\"></div>');\r\n                        }\r\n                    }\r\n\r\n                    // Fill the text\r\n                    bindText(textGetter($scope));\r\n\r\n                    // Also optimization to avoid watch if it is unnecessary\r\n                    if (toBoolean($attrs.pipRebind)) {\r\n                        $scope.$watch(textGetter, function (newValue) {\r\n                            bindText(newValue);\r\n                        });\r\n                    }\r\n\r\n                    $scope.$on('pipWindowResized', function () {\r\n                        bindText(textGetter($scope));\r\n                    });\r\n\r\n                    // Add class\r\n                    $element.addClass('pip-markdown');\r\n                }\r\n            };\r\n        }\r\n    );\r\n\r\n})();\r\n\r\n","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipPopover', ['pipPopover.Service']);\r\n\r\n    thisModule.directive('pipPopover', function () {\r\n        return {\r\n            restrict: 'EA',\r\n            scope: true,\r\n            templateUrl: 'popover/popover.html',\r\n            controller: function ($scope, $rootScope, $element, $timeout, $compile) {\r\n                var backdropElement, content;\r\n\r\n                backdropElement = $('.pip-popover-backdrop');\r\n                backdropElement.on('click keydown scroll', backdropClick);\r\n                backdropElement.addClass($scope.params.responsive !== false ? 'pip-responsive' : '');\r\n\r\n                $timeout(function () {\r\n                    position();\r\n                    if ($scope.params.template) {\r\n                        content = $compile($scope.params.template)($scope);\r\n                        $element.find('.pip-popover').append(content);\r\n                    }\r\n\r\n                    init();\r\n                });\r\n\r\n                $timeout(function () {\r\n                    calcHeight();\r\n                }, 200);\r\n\r\n                $scope.onPopoverClick = onPopoverClick;\r\n                $scope = _.defaults($scope, $scope.$parent);    // eslint-disable-line \r\n\r\n                $rootScope.$on('pipPopoverResize', onResize);\r\n                $(window).resize(onResize);\r\n\r\n                function init() {\r\n                    backdropElement.addClass('opened');\r\n                    $('.pip-popover-backdrop').focus();\r\n                    if ($scope.params.timeout) {\r\n                        $timeout(function () {\r\n                            closePopover();\r\n                        }, $scope.params.timeout);\r\n                    }\r\n                }\r\n\r\n                function backdropClick() {\r\n                    if ($scope.params.cancelCallback) {\r\n                        $scope.params.cancelCallback();\r\n                    }\r\n\r\n                    closePopover();\r\n                }\r\n\r\n                function closePopover() {\r\n                    backdropElement.removeClass('opened');\r\n                    $timeout(function () {\r\n                        backdropElement.remove();\r\n                    }, 100);\r\n                }\r\n\r\n                function onPopoverClick($e) {\r\n                    $e.stopPropagation();\r\n                }\r\n\r\n                function position() {\r\n                    if ($scope.params.element) {\r\n                        var element = $($scope.params.element),\r\n                            pos = element.offset(),\r\n                            width = element.width(),\r\n                            height = element.height(),\r\n                            docWidth = $(document).width(),\r\n                            docHeight = $(document).height(),\r\n                            popover = backdropElement.find('.pip-popover');\r\n\r\n                        if (pos) {\r\n                            popover\r\n                                .css('max-width', docWidth - (docWidth - pos.left))\r\n                                .css('max-height', docHeight - (pos.top + height) - 32, 0)\r\n                                .css('left', pos.left - popover.width() + width / 2)\r\n                                .css('top', pos.top + height + 16);\r\n                        }\r\n                    }\r\n                }\r\n\r\n                function calcHeight() {\r\n                    if ($scope.params.calcHeight === false) { return; }\r\n\r\n                    var popover = backdropElement.find('.pip-popover'),\r\n                        title = popover.find('.pip-title'),\r\n                        footer = popover.find('.pip-footer'),\r\n                        content = popover.find('.pip-content'),\r\n                        contentHeight = popover.height() - title.outerHeight(true) - footer.outerHeight(true);\r\n\r\n                    content.css('max-height', Math.max(contentHeight, 0) + 'px').css('box-sizing', 'border-box');\r\n                }\r\n\r\n                function onResize() {\r\n                    backdropElement.find('.pip-popover').find('.pip-content').css('max-height', '100%');\r\n                    position();\r\n                    calcHeight();\r\n                }\r\n            }\r\n        };\r\n    });\r\n\r\n})();\r\n","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipPopover.Service', []);\r\n\r\n    thisModule.service('pipPopoverService',\r\n        function ($compile, $rootScope, $timeout) {\r\n            var popoverTemplate;\r\n\r\n            popoverTemplate = \"<div class='pip-popover-backdrop {{ params.class }}' ng-controller='params.controller'\" +\r\n                \" tabindex='1'> <pip-popover pip-params='params'> </pip-popover> </div>\";\r\n\r\n            return {\r\n                show: onShow,\r\n                hide: onHide,\r\n                resize: onResize\r\n            };\r\n\r\n            function onShow(p) {\r\n                var element, scope, params, content;\r\n\r\n                element = $('body');\r\n                if (element.find('md-backdrop').length > 0) { return; }\r\n                onHide();\r\n                scope = $rootScope.$new();\r\n                params = p && _.isObject(p) ? p : {};\r\n                scope.params = params;\r\n                scope.locals = params.locals;\r\n                content = $compile(popoverTemplate)(scope);\r\n                element.append(content);\r\n            }\r\n\r\n            function onHide() {\r\n                var backdropElement = $('.pip-popover-backdrop');\r\n\r\n                backdropElement.removeClass('opened');\r\n                $timeout(function () {\r\n                    backdropElement.remove();\r\n                }, 100);\r\n            }\r\n\r\n            function onResize() {\r\n                $rootScope.$broadcast('pipPopoverResize');\r\n            }\r\n\r\n        }\r\n    );\r\n\r\n})();\r\n","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipRoutingProgress', ['ngMaterial']);\r\n\r\n    thisModule.directive('pipRoutingProgress', function () {\r\n        return {\r\n            restrict: 'EA',\r\n            replace: true,\r\n            scope: {\r\n                    showProgress: '&',\r\n                    logoUrl: '@'\r\n                },\r\n            templateUrl: 'progress/routing_progress.html',\r\n            controller: 'pipRoutingProgressController'\r\n        };\r\n    });\r\n\r\n    thisModule.controller('pipRoutingProgressController',\r\n        function ($scope, $element, $attrs) {\r\n            var  image = $element.children('img');          \r\n\r\n            loadProgressImage();\r\n\r\n            return;\r\n\r\n            function loadProgressImage() {\r\n                if ($scope.logoUrl) {\r\n                    image.attr('src', $scope.logoUrl);\r\n                }\r\n            }\r\n\r\n        }\r\n    );\r\n\r\n})();\r\n","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\n(function () {\r\n    'use strict';\r\n    var thisModule = angular.module('pipToasts', ['ngMaterial', 'pipControls.Translate']);\r\n\r\n    thisModule.controller('pipToastController',\r\n        function ($scope, $mdToast, toast, $injector) {\r\n            var pipErrorDetailsDialog = $injector.has('pipErrorDetailsDialog') \r\n                ? $injector.get('pipErrorDetailsDialog') : null;\r\n\r\n            // if (toast.type && sounds['toast_' + toast.type]) {\r\n            //     sounds['toast_' + toast.type].play();\r\n            // }\r\n\r\n            $scope.message = toast.message;\r\n            $scope.actions = toast.actions;\r\n            $scope.toast = toast;\r\n            \r\n            if (toast.actions.length === 0) {\r\n                $scope.actionLenght = 0;\r\n            } else if (toast.actions.length === 1) {\r\n                $scope.actionLenght = toast.actions[0].toString().length;\r\n            } else {\r\n                $scope.actionLenght = null;\r\n            }\r\n\r\n            $scope.showDetails = pipErrorDetailsDialog != null;\r\n            $scope.onDetails = function () {\r\n                $mdToast.hide();\r\n\r\n                if (pipErrorDetailsDialog) {\r\n                    pipErrorDetailsDialog.show(\r\n                        {\r\n                            error: $scope.toast.error,\r\n                            ok: 'Ok'\r\n                        },\r\n                        angular.noop,\r\n                        angular.noop\r\n                    );\r\n                }\r\n            };\r\n\r\n            $scope.onAction = function (action) {\r\n                $mdToast.hide(\r\n                    {\r\n                        action: action,\r\n                        id: toast.id,\r\n                        message: toast.message\r\n                    });\r\n            };\r\n        }\r\n    );\r\n\r\n    thisModule.service('pipToasts',\r\n        function ($rootScope, $mdToast) {\r\n            var\r\n                SHOW_TIMEOUT = 20000,\r\n                SHOW_TIMEOUT_NOTIFICATIONS = 20000,\r\n                toasts = [],\r\n                currentToast,\r\n                sounds = {};\r\n\r\n            /** pre-load sounds for notifications */\r\n                // sounds['toast_error'] = ngAudio.load('sounds/fatal.mp3');\r\n                // sounds['toast_notification'] = ngAudio.load('sounds/error.mp3');\r\n                // sounds['toast_message'] = ngAudio.load('sounds/warning.mp3');\r\n\r\n                // Remove error toasts when page is changed\r\n            $rootScope.$on('$stateChangeSuccess', onStateChangeSuccess);\r\n            $rootScope.$on('pipSessionClosed', onClearToasts);\r\n            $rootScope.$on('pipIdentityChanged', onClearToasts);\r\n\r\n            return {\r\n                showNotification: showNotification,\r\n                showMessage: showMessage,\r\n                showError: showError,\r\n                hideAllToasts: hideAllToasts,\r\n                clearToasts: clearToasts,\r\n                removeToastsById: removeToastsById,\r\n                getToastById: getToastById\r\n            };\r\n\r\n            // Take the next from queue and show it\r\n            function showNextToast() {\r\n                var toast;\r\n\r\n                if (toasts.length > 0) {\r\n                    toast = toasts[0];\r\n                    toasts.splice(0, 1);\r\n                    showToast(toast);\r\n                }\r\n            }\r\n\r\n            // Show toast\r\n            function showToast(toast) {\r\n                currentToast = toast;\r\n\r\n                $mdToast.show({\r\n                    templateUrl: 'toast/toast.html',\r\n                    hideDelay: toast.duration || SHOW_TIMEOUT,\r\n                    position: 'bottom left',\r\n                    controller: 'pipToastController',\r\n                    locals: {\r\n                        toast: currentToast,\r\n                        sounds: sounds\r\n                    }\r\n                })\r\n                    .then(\r\n                    function showToastOkResult(action) {\r\n                        if (currentToast.successCallback) {\r\n                            currentToast.successCallback(action);\r\n                        }\r\n                        currentToast = null;\r\n                        showNextToast();\r\n                    },\r\n                    function showToastCancelResult(action) {\r\n                        if (currentToast.cancelCallback) {\r\n                            currentToast.cancelCallback(action);\r\n                        }\r\n                        currentToast = null;\r\n                        showNextToast();\r\n                    }\r\n                );\r\n            }\r\n\r\n            function addToast(toast) {\r\n                if (currentToast && toast.type !== 'error') {\r\n                    toasts.push(toast);\r\n                } else {\r\n                    showToast(toast);\r\n                }\r\n            }\r\n\r\n            function removeToasts(type) {\r\n                var result = [];\r\n\r\n                _.each(toasts, function (toast) {\r\n                    if (!toast.type || toast.type !== type) {\r\n                        result.push(toast);\r\n                    }\r\n                });\r\n                toasts = _.cloneDeep(result);\r\n            }\r\n\r\n            function removeToastsById(id) {\r\n                _.remove(toasts, {id: id});\r\n            }\r\n\r\n            function getToastById(id) {\r\n                return _.find(toasts, {id: id});\r\n            }\r\n\r\n            function onStateChangeSuccess() {\r\n                toasts = _.reject(toasts, function (toast) {\r\n                    return toast.type === 'error';\r\n                });\r\n\r\n                if (currentToast && currentToast.type === 'error') {\r\n                    $mdToast.cancel();\r\n                    showNextToast();\r\n                }\r\n            }\r\n\r\n            function onClearToasts() {\r\n                clearToasts();\r\n            }\r\n\r\n            // Show new notification toast at the top right\r\n            function showNotification(message, actions, successCallback, cancelCallback, id) {\r\n                // pipAssert.isDef(message, 'pipToasts.showNotification: message should be defined');\r\n                // pipAssert.isString(message, 'pipToasts.showNotification: message should be a string');\r\n                // pipAssert.isArray(actions || [], 'pipToasts.showNotification: actions should be an array');\r\n                // if (successCallback) {\r\n                //     pipAssert.isFunction(successCallback, 'showNotification: successCallback should be a function');\r\n                // }\r\n                // if (cancelCallback) {\r\n                //     pipAssert.isFunction(cancelCallback, 'showNotification: cancelCallback should be a function');\r\n                // }\r\n\r\n                addToast({\r\n                    id: id || null,\r\n                    type: 'notification',\r\n                    message: message,\r\n                    actions: actions || ['ok'],\r\n                    successCallback: successCallback,\r\n                    cancelCallback: cancelCallback,\r\n                    duration: SHOW_TIMEOUT_NOTIFICATIONS\r\n                });\r\n            }\r\n\r\n            // Show new message toast at the top right\r\n            function showMessage(message, successCallback, cancelCallback, id) {\r\n                // pipAssert.isDef(message, 'pipToasts.showMessage: message should be defined');\r\n                // pipAssert.isString(message, 'pipToasts.showMessage: message should be a string');\r\n                // if (successCallback) {\r\n                //     pipAssert.isFunction(successCallback, 'pipToasts.showMessage:successCallback should be a function');\r\n                // }\r\n                // if (cancelCallback) {\r\n                //     pipAssert.isFunction(cancelCallback, 'pipToasts.showMessage: cancelCallback should be a function');\r\n                // }\r\n\r\n                addToast({\r\n                    id: id || null,\r\n                    type: 'message',\r\n                    message: message,\r\n                    actions: ['ok'],\r\n                    successCallback: successCallback,\r\n                    cancelCallback: cancelCallback\r\n                });\r\n            }\r\n\r\n            // Show error toast at the bottom right after error occured\r\n            function showError(message, successCallback, cancelCallback, id, error) {\r\n                // pipAssert.isDef(message, 'pipToasts.showError: message should be defined');\r\n                // pipAssert.isString(message, 'pipToasts.showError: message should be a string');\r\n                // if (successCallback) {\r\n                //     pipAssert.isFunction(successCallback, 'pipToasts.showError: successCallback should be a function');\r\n                // }\r\n                // if (cancelCallback) {\r\n                //     pipAssert.isFunction(cancelCallback, 'pipToasts.showError: cancelCallback should be a function');\r\n                // }\r\n\r\n                addToast({\r\n                    id: id || null,\r\n                    error: error,\r\n                    type: 'error',\r\n                    message: message,\r\n                    actions: ['ok'],\r\n                    successCallback: successCallback,\r\n                    cancelCallback: cancelCallback\r\n                });\r\n            }\r\n\r\n            // Hide and clear all toast when user signs out\r\n            function hideAllToasts() {\r\n                $mdToast.cancel();\r\n                toasts = [];\r\n            }\r\n\r\n            // Clear toasts by type\r\n            function clearToasts(type?: any) {\r\n                if (type) {\r\n                    // pipAssert.isString(type, 'pipToasts.clearToasts: type should be a string');\r\n                    removeToasts(type);\r\n                } else {\r\n                    $mdToast.cancel();\r\n                    toasts = [];\r\n                }\r\n            }\r\n        }\r\n    );\r\n\r\n})();\r\n"]}