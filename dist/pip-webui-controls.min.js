!function(e){"use strict";e.module("pipControls",["pipMarkdown","pipColorPicker","pipRoutingProgress","pipPopover","pipImageSlider","pipToasts","pipUnsavedChanges","pipControls.Translate","pipDraggable"])}(window.angular),function(e){try{e=angular.module("pipControls.Templates")}catch(t){e=angular.module("pipControls.Templates",[])}e.run(["$templateCache",function(e){e.put("color_picker/color_picker.html",'<ul class="pip-color-picker {{class}}" pip-selected="currentColorIndex" pip-enter-space-press="enterSpacePress($event)"><li tabindex="-1" ng-repeat="color in colors track by color"><md-button tabindex="-1" class="md-icon-button pip-selectable" ng-click="selectColor($index)" aria-label="color" ng-disabled="disabled()"><md-icon ng-style="{\'color\': color}" md-svg-icon="icons:{{ color == currentColor ? \'circle\' : \'radio-off\' }}"></md-icon></md-button></li></ul>')}])}(),function(e){try{e=angular.module("pipControls.Templates")}catch(t){e=angular.module("pipControls.Templates",[])}e.run(["$templateCache",function(e){e.put("popover/popover.html",'<div ng-if="params.templateUrl" class="pip-popover flex layout-column" ng-click="onPopoverClick($event)" ng-include="params.templateUrl"></div><div ng-if="params.template" class="pip-popover" ng-click="onPopoverClick($event)"></div>')}])}(),function(e){try{e=angular.module("pipControls.Templates")}catch(t){e=angular.module("pipControls.Templates",[])}e.run(["$templateCache",function(e){e.put("progress/routing_progress.html",'<div class="pip-routing-progress layout-column layout-align-center-center" ng-show="showProgress()"><div class="loader"><svg class="circular" viewbox="25 25 50 50"><circle class="path" cx="50" cy="50" r="20" fill="none" stroke-width="2" stroke-miterlimit="10"></circle></svg></div><img src="" height="40" width="40" class="pip-img"><md-progress-circular md-diameter="96" class="fix-ie"></md-progress-circular></div>')}])}(),function(e){try{e=angular.module("pipControls.Templates")}catch(t){e=angular.module("pipControls.Templates",[])}e.run(["$templateCache",function(e){e.put("toast/toast.html",'<md-toast class="md-action pip-toast" ng-class="{\'pip-error\': toast.type==\'error\', \'pip-column-toast\': toast.type == \'error\' || toast.actions.length > 1 || actionLenght > 4, \'pip-no-action-toast\': actionLenght == 0}" style="height:initial; max-height: initial;"><span class="flex-var pip-text" ng-bind-html="message"></span><div class="layout-row layout-align-end-start" ng-if="actions.length > 0 || (toast.type==\'error\' && toast.error)"><md-button class="flex-fixed pip-toast-button" ng-if="toast.type==\'error\' && toast.error && showDetails" ng-click="onDetails()">Details</md-button><md-button class="flex-fixed pip-toast-button" ng-click="onAction(action)" ng-repeat="action in actions" aria-label="{{::action| translate}}">{{::action| translate}}</md-button></div></md-toast>')}])}(),function(e,t){"use strict";var n=e.module("pipColorPicker",["pipControls.Templates"]);n.directive("pipColorPicker",function(){return{restrict:"EA",scope:{ngDisabled:"&",colors:"=pipColors",currentColor:"=ngModel",colorChange:"&ngChange"},templateUrl:"color_picker/color_picker.html",controller:"pipColorPickerController"}}),n.controller("pipColorPickerController",["$scope","$element","$attrs","$timeout",function(e,n,o,i){var r=["purple","lightgreen","green","darkred","pink","yellow","cyan"];e.class=o.class||"",(!e.colors||t.isArray(e.colors)&&0===e.colors.length)&&(e.colors=r),e.currentColor=e.currentColor||e.colors[0],e.currentColorIndex=e.colors.indexOf(e.currentColor),e.disabled=function(){return!e.ngDisabled||e.ngDisabled()},e.selectColor=function(t){e.disabled()||(e.currentColorIndex=t,e.currentColor=e.colors[e.currentColorIndex],i(function(){e.$apply()}),e.colorChange&&e.colorChange())},e.enterSpacePress=function(t){e.selectColor(t.index)}}])}(window.angular,window._),function(){"use strict";var e=angular.module("pipControls.Translate",[]);e.filter("translate",["$injector",function(e){var t=e.has("pipTranslate")?e.get("pipTranslate"):null;return function(e){return t?t.translate(e)||e:e}}])}(),function(){"use strict";var e=angular.module("pipDraggable",["pipUtils"]);e.service("pipDraggable",function(){var e=this;e.inputEvent=function(e){return angular.isDefined(e.touches)?e.touches[0]:angular.isDefined(e.originalEvent)&&angular.isDefined(e.originalEvent.touches)?e.originalEvent.touches[0]:e}}),e.directive("pipDrag",["$rootScope","$parse","$document","$window","pipDraggable","pipUtils",function(e,t,n,o,i,r){return{restrict:"A",link:function(a,l,s){function p(){P.left=l.css("css")||0,P.top=l.css("top")||0,P.position=l.css("position"),P.width=l.css("width")}a.value=s.ngDrag;var c,u,d,g,f,m,v,h,w=50,C=!1,$="ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch,b="touchstart mousedown",k="touchmove mousemove",y="touchend mouseup",x=a.$id,S=null,D=null,T=!1,A=null,P={},I=t(s.pipDragStart)||null,E=t(s.pipDragStop)||null,L=t(s.pipDragSuccess)||null,M=!!angular.isDefined(s.allowTransform)&&a.$eval(s.allowTransform),_=t(s.pipDragData),U=r.toBoolean(s.pipVerticalScroll)||!0,B=r.toBoolean(s.pipHorizontalScroll)||!0,R=parseFloat(s.pipActivationDistance)||75,z=parseFloat(s.pipScrollDistance)||50,j=!1,O=angular.element(window),H=t(s.pipScrollContainer),N=angular.noop,X=function(){if(l.attr("pip-draggable","false"),l[0].querySelectorAll)var e=angular.element(l[0].querySelectorAll("[pip-drag-handle]"));else var e=l.find("[pip-drag-handle]");e.length&&(h=e),Y(!0),O=j?angular.element($element.parent()):s.pipScrollContainer?angular.element(H(a)):angular.element(window)},Y=function(e){e&&(a.$on("$destroy",Q),a.$watch(s.pipDrag,W),a.$watch(s.pipCenterAnchor,F),h?h.on(b,q):l.on(b,q),$||"img"!=l[0].nodeName.toLowerCase()||l.on("mousedown",function(){return!1}))},Q=function(e){Y(!1)},W=function(e,t){T=e},F=function(e,t){angular.isDefined(e)&&(C=e||"true")},K=function(e){return angular.isDefined(angular.element(e.target).attr("pip-cancel-drag"))},q=function(e){T&&(K(e)||"mousedown"==e.type&&0!=e.button||(p(),$?(V(),A=setTimeout(function(){V(),G(e)},w),n.on(k,V),n.on(y,V)):G(e)))},V=function(){clearTimeout(A),n.off(k,V),n.off(y,V)},G=function(t){T&&(t.preventDefault(),c=l[0].getBoundingClientRect(),D=M?c:{left:document.body.scrollLeft,top:document.body.scrollTop},l.centerX=l[0].offsetWidth/2,l.centerY=l[0].offsetHeight/2,u=i.inputEvent(t).pageX,d=i.inputEvent(t).pageY,m=u-c.left,v=d-c.top,C?(g=u-l.centerX-o.pageXOffset,f=d-l.centerY-o.pageYOffset):(g=u-m-o.pageXOffset,f=d-v-o.pageYOffset),n.on(k,J),n.on(y,Z),N=e.$on("draggable:_triggerHandlerMove",function(e,t){J(t)}))},J=function(t){T&&(t.preventDefault(),l.hasClass("pip-dragging")||(S=_(a),l.addClass("pip-dragging"),e.$broadcast("draggable:start",{x:u,y:d,tx:g,ty:f,event:t,element:l,data:S}),I&&a.$apply(function(){I(a,{$data:S,$event:t})})),u=i.inputEvent(t).pageX,d=i.inputEvent(t).pageY,(B||U)&&oe(),C?(g=u-l.centerX-D.left,f=d-l.centerY-D.top):(g=u-m-D.left,f=d-v-D.top),ne(g,f),e.$broadcast("draggable:move",{x:u,y:d,tx:g,ty:f,event:t,element:l,data:S,uid:x,dragOffset:D}))},Z=function(t){T&&(t.preventDefault(),e.$broadcast("draggable:end",{x:u,y:d,tx:g,ty:f,event:t,element:l,data:S,callback:ee,uid:x}),l.removeClass("pip-dragging"),l.parent().find(".pip-drag-enter").removeClass("pip-drag-enter"),te(),n.off(k,J),n.off(y,Z),E&&a.$apply(function(){E(a,{$data:S,$event:t})}),N())},ee=function(e){L&&a.$apply(function(){L(a,{$data:S,$event:e})})},te=function(){M?l.css({transform:"","z-index":"","-webkit-transform":"","-ms-transform":""}):l.css({position:P.position,top:P.top,left:P.left,"z-index":"",width:P.width})},ne=function(e,t){var n=l.css("width");M?l.css({transform:"matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, "+e+", "+t+", 0, 1)","z-index":99999,"-webkit-transform":"matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, "+e+", "+t+", 0, 1)","-ms-transform":"matrix(1, 0, 0, 1, "+e+", "+t+")"}):l.css({left:e+"px",top:t+"px",position:"fixed","z-index":100,width:n})},oe=function(){var e=0,t=0,n=function(e){return e.offset()||{left:0,top:0}};if(B){var o=n(O).left,i=O.innerWidth(),r=o+i;u-o<R?e=-z:r-u<R&&(e=z)}if(U){var a=n(O).top,l=O.innerHeight(),s=a+l;d-a<R?t=-z+30:s-d<R&&(t=z-30)}if(0!==e||0!==t){var p=O.scrollLeft(),c=O.scrollTop();O.scrollLeft(p+e),O.scrollTop(c+t)}};X()}}}]),e.directive("pipDrop",["$parse","$timeout","$window","$document","pipDraggable",function(e,t,n,o,i){return{restrict:"A",link:function(n,i,r){n.value=r.pipDrop,n.isTouching=!1;var a=null,l=n.$id,s=!1,p=e(r.pipDropSuccess),c=e(r.pipDragStart),u=e(r.pipDragStop),d=e(r.pipDragMove),g=function(){f(!0)},f=function(e){e&&(n.$watch(r.pipDrop,v),n.$on("$destroy",m),n.$on("draggable:start",h),n.$on("draggable:move",w),n.$on("draggable:end",C))},m=function(e){f(!1)},v=function(e,t){s=e},h=function(e,o){s&&($(o.x,o.y,o.element),r.pipDragStart&&t(function(){c(n,{$data:o.data,$event:o})}))},w=function(e,o){s&&($(o.x,o.y,o.element),r.pipDragMove&&t(function(){d(n,{$data:o.data,$event:o})}))},C=function(e,o){return s&&l!==o.uid?($(o.x,o.y,o.element)&&(o.callback&&o.callback(o),r.pipDropSuccess&&t(function(){p(n,{$data:o.data,$event:o,$target:n.$eval(n.value)})})),r.pipDragStop&&t(function(){u(n,{$data:o.data,$event:o})}),void b(!1,o.element)):void b(!1,o.element)},$=function(e,t,o){var r=k(e,t);return n.isTouching=r,r&&(a=i),b(r,o),r},b=function(e,t){e?(i.addClass("pip-drag-enter"),t.addClass("pip-drag-over")):a==i&&(a=null,i.removeClass("pip-drag-enter"),t.removeClass("pip-drag-over"))},k=function(e,t){var n=i[0].getBoundingClientRect();return e-=o[0].body.scrollLeft+o[0].documentElement.scrollLeft,t-=o[0].body.scrollTop+o[0].documentElement.scrollTop,e>=n.left&&e<=n.right&&t<=n.bottom&&t>=n.top};g()}}}]),e.directive("pipPreventDrag",["$parse","$timeout",function(e,t){return{restrict:"A",link:function(e,t,n){var o=function(){t.attr("pip-draggable","false"),i(!0)},i=function(e){e&&t.on("mousedown touchstart touchmove touchend touchcancel",r)},r=function(e){var t=e.originalEvent;return t.preventDefault&&t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.cancelBubble=!0,t.returnValue=!1,!1};o()}}}]),e.directive("pipCancelDrag",function(){return{restrict:"A",link:function(e,t,n){t.find("*").attr("pip-cancel-drag","pip-cancel-drag")}}})}(),function(e,t,n){"use strict";var o=e.module("pipImageSlider",["pipSliderButton","pipSliderIndicator","pipImageSlider.Service"]);o.directive("pipImageSlider",function(){return{scope:{sliderIndex:"=pipImageIndex"},controller:["$scope","$element","$attrs","$parse","$timeout","$interval","$pipImageSlider",function(e,o,i,r,a,l,s){function p(){i.pipImageIndex&&(e.sliderIndex=w)}function c(){v=l(function(){f=w+1===g.length?0:w+1,m="next",h()},b||$)}function u(){l.cancel(v)}function d(){u(),c()}var g,f,m,v,h,w=0,C=r(i.pipAnimationType)(e),$=4500,b=r(i.pipAnimationInterval)(e);o.addClass("pip-image-slider"),o.addClass("pip-animation-"+C),e.swipeStart=0,p(),a(function(){g=o.find(".pip-animation-block"),g.length>0&&n(g[0]).addClass("pip-show")}),c(),h=t.throttle(function(){s.toBlock(C,g,w,f,m),w=f,p()},700),e.nextBlock=function(){d(),f=w+1===g.length?0:w+1,m="next",h()},e.prevBlock=function(){d(),f=w-1<0?g.length-1:w-1,m="prev",h()},e.slideTo=function(e){e===w||e>g.length-1||(d(),f=e,m=e>w?"next":"prev",h())},i.id&&s.registerSlider(i.id,e),o.on("$destroy",function(){u(),s.removeSlider(i.id)})}]}})}(window.angular,window._,window.jQuery),function(e,t,n){"use strict";var o=e.module("pipImageSlider.Service",[]);o.service("$pipImageSlider",["$timeout",function(e){function t(e,t){s[e]=t}function o(e){delete s[e]}function i(e){return s[e]}function r(t,n){t.addClass("pip-next"),e(function(){t.addClass("animated").addClass("pip-show").removeClass("pip-next"),n.addClass("animated").removeClass("pip-show")},100)}function a(t,n){e(function(){t.addClass("animated").addClass("pip-show"),n.addClass("animated").addClass("pip-next").removeClass("pip-show")},100)}function l(e,t,o,i,l){var s=n(t[o]),p=i,c=n(t[p]);"carousel"===e?(n(t).removeClass("pip-next").removeClass("pip-prev").removeClass("animated"),!l||"prev"!==l&&"next"!==l?i&&i<o?a(c,s):r(c,s):"prev"===l?a(c,s):r(c,s)):(s.addClass("animated").removeClass("pip-show"),c.addClass("animated").addClass("pip-show"))}var s={};return{nextCarousel:r,prevCarousel:a,toBlock:l,registerSlider:t,removeSlider:o,getSliderScope:i}}])}(window.angular,window._,window.jQuery),function(e,t,n){"use strict";var o=e.module("pipSliderButton",[]);o.directive("pipSliderButton",function(){return{scope:{},controller:["$scope","$element","$parse","$attrs","$pipImageSlider",function(e,t,n,o,i){var r=n(o.pipButtonType)(e),a=n(o.pipSliderId)(e);t.on("click",function(){a&&r&&i.getSliderScope(a)[r+"Block"]()})}]}})}(window.angular,window._,window.jQuery),function(e,t,n){"use strict";var o=e.module("pipSliderIndicator",[]);o.directive("pipSliderIndicator",function(){return{scope:!1,controller:["$scope","$element","$parse","$attrs","$pipImageSlider",function(e,t,n,o,i){var r=n(o.pipSliderId)(e),a=n(o.pipSlideTo)(e);t.css("cursor","pointer"),t.on("click",function(){!r||a&&a<0||i.getSliderScope(r).slideTo(a)})}]}})}(window.angular,window._,window.jQuery),function(e,t,n){"use strict";var o=e.module("pipMarkdown",["ngSanitize"]);o.run(["$injector",function(e){var t=e.has("pipTranslate")?e.get("pipTranslate"):null;t&&(t.translations("en",{MARKDOWN_ATTACHMENTS:"Attachments:",checklist:"Checklist",documents:"Documents",pictures:"Pictures",location:"Location",time:"Time"}),t.translations("ru",{MARKDOWN_ATTACHMENTS:"Вложения:",checklist:"Список",documents:"Документы",pictures:"Изображения",location:"Местонахождение",time:"Время"}))}]),o.directive("pipMarkdown",["$parse","$injector",function(e,o){var i=o.has("pipTranslate")?o.get("pipTranslate"):null;return{restrict:"EA",scope:!1,link:function(o,r,a){function l(e){var t="",o=[];return n.each(e,function(e){e.type&&"text"!==e.type&&(0===t.length&&i&&(t=i.translate("MARKDOWN_ATTACHMENTS")),o.indexOf(e.type)<0&&(o.push(e.type),t+=o.length>1?", ":" ",i&&(t+=i.translate(e.type))))}),t}function s(e){return null!=e&&(!!e&&(e=e.toString().toLowerCase(),"1"==e||"true"==e))}function p(e){var o,i,s,p,c;n.isArray(e)?(c=n.find(e,function(e){return"text"===e.type&&e.text}),o=c?c.text:l(e)):o=e,i=a.pipLineCount&&n.isNumber(d()),i=i&&o&&o.length>0,p={gfm:!0,tables:!0,breaks:!0,sanitize:!0,pedantic:!0,smartLists:!0,smartypents:!1},o=t(o||"",p),i&&(s=1.5*d()),r.html("<div"+(i?u()?'class="pip-markdown-content pip-markdown-list" style="max-height: '+s+'em">':' class="pip-markdown-content" style="max-height: '+s+'em">':u()?' class="pip-markdown-list">':">")+o+"</div>"),r.find("a").attr("target","blank"),!u()&&i&&r.append('<div class="pip-gradient-block"></div>')}var c=e(a.pipText),u=e(a.pipList),d=e(a.pipLineCount);p(c(o)),s(a.pipRebind)&&o.$watch(c,function(e){p(e)}),o.$on("pipWindowResized",function(){p(c(o))}),r.addClass("pip-markdown")}}}])}(window.angular,window.marked,window._),function(e,t,n){"use strict";var o=e.module("pipPopover",["pipPopover.Service"]);o.directive("pipPopover",function(){return{restrict:"EA",scope:!0,templateUrl:"popover/popover.html",controller:["$scope","$rootScope","$element","$timeout","$compile",function(e,o,i,r,a){function l(){f.addClass("opened"),t(".pip-popover-backdrop").focus(),e.params.timeout&&r(function(){p()},e.params.timeout)}function s(){e.params.cancelCallback&&e.params.cancelCallback(),p()}function p(){f.removeClass("opened"),r(function(){f.remove()},100)}function c(e){e.stopPropagation()}function u(){if(e.params.element){var n=t(e.params.element),o=n.offset(),i=n.width(),r=n.height(),a=t(document).width(),l=t(document).height(),s=f.find(".pip-popover");o&&s.css("max-width",a-(a-o.left)).css("max-height",l-(o.top+r)-32,0).css("left",o.left-s.width()+i/2).css("top",o.top+r+16)}}function d(){if(e.params.calcHeight!==!1){var t=f.find(".pip-popover"),n=t.find(".pip-title"),o=t.find(".pip-footer"),i=t.find(".pip-content"),r=t.height()-n.outerHeight(!0)-o.outerHeight(!0);i.css("max-height",Math.max(r,0)+"px").css("box-sizing","border-box")}}function g(){f.find(".pip-popover").find(".pip-content").css("max-height","100%"),u(),d()}var f,m;f=t(".pip-popover-backdrop"),f.on("click keydown scroll",s),f.addClass(e.params.responsive!==!1?"pip-responsive":""),r(function(){u(),e.params.template&&(m=a(e.params.template)(e),i.find(".pip-popover").append(m)),l()}),r(function(){d()},200),e.onPopoverClick=c,e=n.defaults(e,e.$parent),o.$on("pipPopoverResize",g),t(window).resize(g)}]}})}(window.angular,window.jQuery,window._),function(e,t,n){"use strict";var o=e.module("pipPopover.Service",[]);o.service("pipPopoverService",["$compile","$rootScope","$timeout",function(e,o,i){function r(i){var r,l,p,c;r=t("body"),r.find("md-backdrop").length>0||(a(),l=o.$new(),p=i&&n.isObject(i)?i:{},l.params=p,l.locals=p.locals,c=e(s)(l),r.append(c))}function a(){var e=t(".pip-popover-backdrop");e.removeClass("opened"),i(function(){e.remove()},100)}function l(){o.$broadcast("pipPopoverResize")}var s;return s="<div class='pip-popover-backdrop {{ params.class }}' ng-controller='params.controller' tabindex='1'> <pip-popover pip-params='params'> </pip-popover> </div>",{show:r,hide:a,resize:l}}])}(window.angular,window.jQuery,window._),function(e){"use strict";var t=e.module("pipRoutingProgress",["ngMaterial"]);t.directive("pipRoutingProgress",function(){return{restrict:"EA",replace:!0,scope:{showProgress:"&",logoUrl:"@"},templateUrl:"progress/routing_progress.html",controller:"pipRoutingProgressController"}}),t.controller("pipRoutingProgressController",["$scope","$element","$attrs",function(e,t,n){function o(){e.logoUrl&&i.attr("src",e.logoUrl)}var i=t.children("img");o()}])}(window.angular),function(e,t){"use strict";var n=e.module("pipToasts",["ngMaterial","pipControls.Translate"]);n.controller("pipToastController",["$scope","$mdToast","toast","$injector",function(t,n,o,i){var r=i.has("pipErrorDetailsDialog")?i.get("pipErrorDetailsDialog"):null;t.message=o.message,t.actions=o.actions,t.toast=o,0===o.actions.length?t.actionLenght=0:1===o.actions.length?t.actionLenght=o.actions[0].toString().length:t.actionLenght=null,t.showDetails=null!=r,t.onDetails=function(){n.hide(),r&&r.show({error:t.toast.error,ok:"Ok"},e.noop,e.noop)},t.onAction=function(e){n.hide({action:e,id:o.id,message:o.message})}}]),n.service("pipToasts",["$rootScope","$mdToast",function(e,n){function o(){var e;C.length>0&&(e=C[0],C.splice(0,1),i(e))}function i(e){v=e,n.show({templateUrl:"toast/toast.html",hideDelay:e.duration||h,position:"bottom left",controller:"pipToastController",locals:{toast:v,sounds:$}}).then(function(e){v.successCallback&&v.successCallback(e),v=null,o()},function(e){v.cancelCallback&&v.cancelCallback(e),v=null,o()})}function r(e){v&&"error"!==e.type?C.push(e):i(e)}function a(e){var n=[];t.each(C,function(t){t.type&&t.type===e||n.push(t)}),C=t.cloneDeep(n)}function l(e){t.remove(C,{id:e})}function s(e){return t.find(C,{id:e})}function p(){C=t.reject(C,function(e){return"error"===e.type}),v&&"error"===v.type&&(n.cancel(),o())}function c(){m()}function u(e,t,n,o,i){r({id:i||null,type:"notification",message:e,actions:t||["ok"],successCallback:n,cancelCallback:o,duration:w})}function d(e,t,n,o){r({id:o||null,type:"message",message:e,actions:["ok"],successCallback:t,cancelCallback:n})}function g(e,t,n,o,i){r({id:o||null,error:i,type:"error",message:e,actions:["ok"],successCallback:t,cancelCallback:n})}function f(){n.cancel(),C=[]}function m(e){e?a(e):(n.cancel(),C=[])}var v,h=2e4,w=2e4,C=[],$={};return e.$on("$stateChangeSuccess",p),e.$on("pipSessionClosed",c),e.$on("pipIdentityChanged",c),{showNotification:u,showMessage:d,showError:g,hideAllToasts:f,clearToasts:m,removeToastsById:l,getToastById:s}}])}(window.angular,window._),function(){"use strict";var e=angular.module("pipUnsavedChanges",[]);e.directive("pipUnsavedChanges",["$window","$rootScope",function(e,t){return{restrict:"AE",scope:{unsavedChangesAvailable:"&pipUnsavedChangesAvailable",unsavedChangesMessage:"@pipUnsavedChangesMessage",afterLeave:"&pipUnsavedChangesAfterLeave"},link:function(n){e.onbeforeunload=function(){if(n.unsavedChangesAvailable())return t.$routing=!1,n.unsavedChangesMessage};var o=n.$on("$stateChangeStart",function(o){n.unsavedChangesAvailable()&&!e.confirm(n.unsavedChangesMessage)?(t.$routing=!1,o.preventDefault()):_.isFunction(n.afterLeave)&&n.afterLeave()});n.$on("$destroy",function(){e.onbeforeunload=null,o()})}}}])}();