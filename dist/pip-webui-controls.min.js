!function(t){"use strict";t.module("pipControls",["pipMarkdown","pipToggleButtons","pipRefreshButton","pipColorPicker","pipRoutingProgress","pipPopover","pipImageSlider","pipToasts","pipTagList","pipDate","pipDateRange","pipTimeEdit","pipTimeView","pipInformationDialog","pipConfirmationDialog","pipOptionsDialog","pipOptionsBigDialog","pipConversionDialog","pipErrorDetailsDialog"]),t.module("pipBasicControls",["pipControls"])}(window.angular),function(t){try{t=angular.module("pipBasicControls.Templates")}catch(e){t=angular.module("pipBasicControls.Templates",[])}t.run(["$templateCache",function(t){t.put("color_picker/color_picker.html",'<ul class="pip-color-picker lp0 {{class}}" pip-selected="currentColorIndex" pip-enter-space-press="enterSpacePress($event)"><li tabindex="-1" ng-repeat="color in colors track by color"><md-button tabindex="-1" class="md-icon-button pip-selectable" ng-click="selectColor($index)" aria-label="color" ng-disabled="disabled()"><md-icon ng-style="{\'color\': color}" md-svg-icon="icons:{{ color == currentColor ? \'circle\' : \'radio-off\' }}"></md-icon></md-button></li></ul>')}])}(),function(t){try{t=angular.module("pipBasicControls.Templates")}catch(e){t=angular.module("pipBasicControls.Templates",[])}t.run(["$templateCache",function(t){t.put("confirmation_dialog/confirmation_dialog.html",'<md-dialog class="pip-dialog pip-confirmation-dialog" layout="column" width="400" md-theme="{{::theme}}"><div class="pip-header text-subhead1"><h3 class="m0">{{:: title | translate }}</h3></div><div class="pip-footer"><div><md-button ng-click="onCancel()">{{:: cancel | translate }}</md-button><md-button class="md-accent" ng-click="onOk()">{{:: ok | translate }}</md-button></div></div></md-dialog>')}])}(),function(t){try{t=angular.module("pipBasicControls.Templates")}catch(e){t=angular.module("pipBasicControls.Templates",[])}t.run(["$templateCache",function(t){t.put("conversion_dialog/conversion_dialog.html",'<md-dialog class="pip-dialog pip-conversion-dialog" layout="column" min-width="450" md-theme="{{theme}}"><md-dialog-content class="pip-body p0 pip-scroll"><div class="pip-header" ng-if="!withoutTitle || deleted" ng-class="{\'header-hint\': withoutTitle && deleted}"><h3 class="m0 text-title" ng-hide="withoutTitle">{{::title | translate}}</h3><p class="tp8 pip-subtitle" ng-hide="withoutTitle"><span pip-translate-html="{{::subtitle | translate}}"></span></p><div ng-show="withoutTitle && deleted" class="dialog-hint" layout="row" layout-align="start center"><div class="w40" flex-fixed=""><md-icon md-svg-icon="icons:info-circle-outline"></md-icon></div><div>{{::withoutTitle | translate}}</div></div></div><div class="pip-divider" ng-if="!withoutTitle"></div><div class="h8" ng-if="withoutTitle"></div><div class="pip-content"><div class="pip-list md-primary" md-no-ink="true" ng-keydown="onKeyDown($event)" ng-keypress="onKeyPress($event)" tabindex="0"><div ng-repeat="option in options" class="pip-list-item" md-ink-ripple="" ui-event="{ click: \'onOptionSelect($event, option)\' }" ng-class="{ selected: option.name == selectedOptionName, \'divider-bottom\': $index < options.length - 1 }"><div class="pip-content lp24-flex rp24-flex" flex=""><div class="pip-title" ng-if="option.title">{{::option.title | translate}}</div><div class="pip-subtitle" ng-if="option.subtitle"><span pip-translate-html="{{::option.subtitle | translate}}"></span></div><div class="pip-text" ng-if="option.text"><span pip-translate-html="{{::option.text | translate}}"></span></div></div></div></div></div><div class="h8"></div></md-dialog-content></md-dialog>')}])}(),function(t){try{t=angular.module("pipBasicControls.Templates")}catch(e){t=angular.module("pipBasicControls.Templates",[])}t.run(["$templateCache",function(t){t.put("date/date.html",'<div class="pip-date" tabindex="-1" layout="row" flex=""><md-input-container flex="" class="tm0"><md-select class="pip-date-day tm0" ng-disabled="disableControls" ng-model="day" placeholder="{{dayLabel}}" ng-change="onDayChanged()" flex=""><md-option ng-value="opt" ng-repeat="opt in days track by opt">{{:: opt }}</md-option></md-select></md-input-container><div class="w16 flex-fixed"></div><md-input-container flex="" class="tm0"><md-select class="pip-date-month tm0" ng-disabled="disableControls" ng-model="month" placeholder="{{monthLabel}}" ng-change="onMonthChanged()" flex=""><md-option ng-value="opt.id" ng-repeat="opt in months track by opt.id">{{:: opt.name }}</md-option></md-select></md-input-container><div class="w16 flex-fixed"></div><md-input-container flex="" class="tm0"><md-select class="pip-date-year tm0" ng-disabled="disableControls" ng-model="year" placeholder="{{yearLabel}}" ng-change="onYearChanged()" flex=""><md-option ng-value="opt" ng-repeat="opt in years track by opt">{{:: opt }}</md-option></md-select></md-input-container></div>')}])}(),function(t){try{t=angular.module("pipBasicControls.Templates")}catch(e){t=angular.module("pipBasicControls.Templates",[])}t.run(["$templateCache",function(t){t.put("date_range/date_range.html",'<div class="pip-date-range" tabindex="-1" layout="row" flex=""><md-input-container flex="" ng-show="isDay()" class="tm0 pip-day" ng-class="{\'flex-fixed\' : $mdMedia(\'gt-xs\')}"><md-select class="select-day w-stretch" ng-class="{\'pip-no-line\' : pipNoLine}" ng-disable="{{disableControls}}" md-on-open="onDayClick()" ng-model="day" ng-change="onDayChanged()" placeholder="{{dayLabel}}" aria-label="DAY"><md-option ng-value="opt" ng-repeat="opt in days track by opt">{{nameDays[$index]}} {{ opt }}</md-option></md-select></md-input-container><md-input-container flex="" ng-show="isWeek()" class="tm0" ng-class="{\'flex-fixed\' : $mdMedia(\'gt-xs\')}"><md-select class="select-week w-stretch" ng-class="{\'pip-no-line\' : pipNoLine}" ng-disable="{{disableControls}}" ng-model="week" ng-change="onWeekChange()" placeholder="{{weekLabel}}" aria-label="WEEK"><md-option ng-value="opt.id" ng-repeat="opt in weeks track by opt.id">{{ opt.name }}</md-option></md-select></md-input-container><div class="flex-fixed" ng-class="{\'w16\': $mdMedia(\'gt-xs\'), \'w8\': $mdMedia(\'xs\')}" ng-show="isDay() || isWeek()"></div><md-input-container flex="" ng-show="isMonth() && !monthFormatShort" class="tm0 min-w72" ng-class="{\'flex-fixed\' : $mdMedia(\'gt-xs\')}"><md-select class="select-month w-stretch" ng-class="{\'pip-no-line\' : pipNoLine}" ng-disable="{{disableControls}}" md-on-open="onMonthClick()" ng-model="month" ng-change="onMonthChanged()" placeholder="{{monthLabel}}" aria-label="MONTH"><md-option ng-value="opt.id" ng-repeat="opt in months track by opt.id">{{ opt.name }}</md-option></md-select></md-input-container><md-input-container flex="" ng-show="isMonth() && monthFormatShort" class="tm0" ng-class="{\'flex-fixed\' : $mdMedia(\'gt-xs\')}"><md-select class="select-month w-stretch" ng-class="{\'pip-no-line\' : pipNoLine}" ng-disable="{{disableControls}}" md-on-open="onMonthClick()" ng-model="month" ng-change="onMonthChanged()" placeholder="{{monthLabel}}" aria-label="MONTH"><md-option ng-value="opt.id" ng-repeat="opt in shortMonths track by opt.id">{{ opt.name }}</md-option></md-select></md-input-container><div class="flex-fixed" ng-class="{\'w16\': $mdMedia(\'gt-xs\'), \'w8\': $mdMedia(\'xs\')}" ng-show="isMonth()"></div><md-input-container flex="" class="tm0" ng-class="{\'flex-fixed\' : $mdMedia(\'gt-xs\')}"><md-select class="select-year w-stretch" ng-class="{\'pip-no-line\' : pipNoLine}" ng-disable="{{disableControls}}" md-on-open="onYearClick()" ng-model="year" ng-change="onYearChanged()" placeholder="{{yearLabel}}" aria-label="YEAR"><md-option ng-value="opt" ng-repeat="opt in years track by opt">{{ opt }}</md-option></md-select></md-input-container></div>')}])}(),function(t){try{t=angular.module("pipBasicControls.Templates")}catch(e){t=angular.module("pipBasicControls.Templates",[])}t.run(["$templateCache",function(t){t.put("error_details_dialog/error_details_dialog.html",'<md-dialog class="pip-dialog pip-details-dialog" layout="column" width="400" md-theme="{{theme}}"><div class="pip-body"><div class="pip-header p0 bp8 text-subhead1">{{::\'ERROR_DETAILS\' | translate}}</div><div layout="row" layout-align="start center" class="h48 text-body2 color-secondary-text" ng-if="error.code || (error.data && error.data.code)">{{::\'CODE\' | translate}}</div><div layout="row" layout-align="start center" ng-if="error.code || (error.data && error.data.code)">{{error.code || error.data.code}}</div><div layout="row" layout-align="start center" class="h48 text-body2 color-secondary-text" ng-if="error.path || (error.data && error.data.path)">{{::\'PATH\' | translate}}</div><div layout="row" layout-align="start center" ng-if="error.path || (error.data && error.data.path)">{{error.path || error.data.path}}</div><div layout="row" layout-align="start center" class="h48 text-body2 color-secondary-text" ng-if="error.error || (error.data && error.data.error)">{{::\'ERROR\' | translate}}</div><div layout="row" layout-align="start center" ng-if="error.error || (error.data && error.data.error)">{{error.error || error.data.error}}</div><div layout="row" layout-align="start center" class="h48 text-body2 color-secondary-text" ng-if="error.method || (error.data && error.data.method)">{{::\'METHOD\' | translate}}</div><div layout="row" layout-align="start center" ng-if="error.method || (error.data && error.data.method)">{{error.method || error.data.method}}</div><div layout="row" layout-align="start center" class="h48 text-body2 color-secondary-text" ng-if="error.message || (error.data && error.data.message)">{{::\'MESSAGE\' | translate}}</div><div layout="row" layout-align="start center" ng-if="error.message || (error.data && error.data.message)">{{error.message || error.data.message}}</div></div><div class="pip-footer rp16"><div><md-button class="md-accent m0" ng-click="onOk()">{{::\'DISMISS\' | translate }}</md-button></div></div></md-dialog>')}])}(),function(t){try{t=angular.module("pipBasicControls.Templates")}catch(e){t=angular.module("pipBasicControls.Templates",[])}t.run(["$templateCache",function(t){t.put("information_dialog/information_dialog.html",'<md-dialog class="pip-dialog pip-information-dialog" layout="column" width="400" md-theme="{{theme}}"><div class="pip-header"><h3 class="m0">{{ title | translate }}</h3></div><div class="pip-body"><div class="pip-content">{{ content }}</div></div><div class="pip-footer"><div><md-button class="md-accent" ng-click="onOk()">{{ ok | translate }}</md-button></div></div></md-dialog>')}])}(),function(t){try{t=angular.module("pipBasicControls.Templates")}catch(e){t=angular.module("pipBasicControls.Templates",[])}t.run(["$templateCache",function(t){t.put("options_dialog/options_dialog.html",'<md-dialog class="pip-dialog pip-options-dialog" layout="column" min-width="400" md-theme="{{theme}}"><md-dialog-content class="pip-body lp0 tp0 rp0 bp24 pip-scroll"><div class="pip-header"><h3 class="m0 bm16 text-title">{{::title | translate}}</h3><div ng-show="deletedTitle" class="bp16 tp8 text-subhead1 divider-bottom"><md-checkbox ng-model="deleted" aria-label="CHECKBOX" class="m0">{{::deletedTitle | translate}}</md-checkbox></div></div><div class="pip-content"><md-radio-group ng-model="selectedOptionName" class="pip-list md-primary" md-no-ink="true" ng-keypress="onKeyPress($event)" tabindex="0"><div ng-repeat="option in options" class="pip-list-item p0" md-ink-ripple="" ui-event="{ click: \'onOptionSelect($event, option)\' }" ng-class="{ selected: option.name == selectedOptionName }"><div class="pip-list-item"><md-icon class="pip-option-icon rm12" md-svg-icon="icons:{{option.icon}}" ng-if="option.icon"></md-icon><div class="pip-option-title">{{::option.title | translate}}</div><md-radio-button ng-value="option.name" tabindex="-1" aria-label="{{::option.title | translate}}"></md-radio-button></div></div></md-radio-group></div></md-dialog-content><div class="pip-footer"><div><md-button class="pip-cancel" ng-click="onCancel()">{{::\'CANCEL\' | translate}}</md-button><md-button class="pip-submit md-accent" ng-click="onSelect()">{{::applyButtonTitle | translate}}</md-button></div></div></md-dialog>')}])}(),function(t){try{t=angular.module("pipBasicControls.Templates")}catch(e){t=angular.module("pipBasicControls.Templates",[])}t.run(["$templateCache",function(t){t.put("options_dialog/options_dialog_big.html",'<md-dialog class="pip-dialog pip-options-dialog-big" layout="column" min-width="400" md-theme="{{theme}}"><md-dialog-content class="pip-body p0 pip-scroll" ng-class="{\'bp24\': !noActions}"><div class="pip-header" ng-class="{\'header-hint\': noTitle && hint}"><h3 class="m0 text-title" ng-if="!noTitle">{{::title | translate}}</h3><div ng-show="noTitle && hint" class="dialog-hint" layout="row" layout-align="start center"><div class="w40" flex-fixed=""><md-icon md-svg-icon="icons:info-circle-outline"></md-icon></div><div>{{::hint | translate}}</div></div></div><div class="pip-divider" ng-if="!noTitle"></div><div class="pip-content"><div class="h8" ng-if="noTitle && hint"></div><md-list class="pip-menu pip-ref-list w-stretch" pip-selected="optionIndex" index="{{optionIndex }}" pip-select="onSelected($event)"><md-list-item class="pip-ref-list-item pip-selectable" ng-class="{\'selected\' : option.name == selectedOptionName, \'divider-bottom\': $index != options.length - 1}" layout="row" layout-align="start center" md-ink-ripple="" xxxxng-keypress="onKeyPress($event)" ng-keyup="onKeyUp($event, $index)" ng-repeat="option in options" ng-click="onOptionSelect($event, option)"><div class="pip-content line-height-string max-w100-stretch"><p class="pip-title rp24-flex" ng-if="option.title" style="margin-bottom: 4px !important;">{{::option.title | translate}}</p><div class="pip-subtitle rp24-flex" style="height: inherit" ng-if="option.subtitle">{{::option.subtitle | translate}}</div><div class="pip-subtitle rp24-flex" style="height: inherit" ng-if="option.text" pip-translate-html="{{::option.text | translate}}"></div></div></md-list-item></md-list></div><div class="h8" ng-if="noActions"></div></md-dialog-content><div class="pip-footer" ng-if="!noActions"><div><md-button class="pip-cancel" ng-click="onCancel()">{{::\'CANCEL\' | translate}}</md-button><md-button class="pip-submit md-accent" ng-click="onSelect()" style="margin-right: -6px">{{::applyButtonTitle | translate}}</md-button></div></div></md-dialog>')}])}(),function(t){try{t=angular.module("pipBasicControls.Templates")}catch(e){t=angular.module("pipBasicControls.Templates",[])}t.run(["$templateCache",function(t){t.put("popover/popover.template.html",'<div ng-if="params.templateUrl" class="pip-popover flex layout-column" ng-click="onPopoverClick($event)" ng-include="params.templateUrl"></div><div ng-if="params.template" class="pip-popover" ng-click="onPopoverClick($event)"></div>')}])}(),function(t){try{t=angular.module("pipBasicControls.Templates")}catch(e){t=angular.module("pipBasicControls.Templates",[])}t.run(["$templateCache",function(t){t.put("progress/routing_progress.html",'<div class="pip-routing-progress" layout="column" layout-align="center center" ng-show="$routing || $reset"><div class="loader"><svg class="circular" viewbox="25 25 50 50"><circle class="path" cx="50" cy="50" r="20" fill="none" stroke-width="2" stroke-miterlimit="10"></circle></svg></div><img src="images/Logo_animation.svg" height="40" width="40" class="pip-img"><md-progress-circular md-diameter="96" class="fix-ie"></md-progress-circular></div>')}])}(),function(t){try{t=angular.module("pipBasicControls.Templates")}catch(e){t=angular.module("pipBasicControls.Templates",[])}t.run(["$templateCache",function(t){t.put("tags/tag_list.html",'<div class="pip-chip rm4 pip-type-chip pip-type-chip-left {{\'bg-\' + pipType + \'-chips\'}}" ng-if="pipType && !pipTypeLocal"><span>{{pipType.toUpperCase() | translate | uppercase}}</span></div><div class="pip-chip rm4 pip-type-chip pip-type-chip-left {{\'bg-\' + pipType + \'-chips\'}}" ng-if="pipType && pipTypeLocal"><span>{{pipTypeLocal.toUpperCase() | translate | uppercase}}</span></div><div class="pip-chip rm4" ng-repeat="tag in pipTags"><span>{{::tag}}</span></div>')}])}(),function(t){try{t=angular.module("pipBasicControls.Templates")}catch(e){t=angular.module("pipBasicControls.Templates",[])}t.run(["$templateCache",function(t){t.put("time_edit/time_edit.html",'<div layout="row" class="event-edit" layout-xs="column" flex="" layout-align="start start"><div flex="47" class="w-stretch rm24-flex0"><p class="text-caption text-grey tm0">{{startLabel}}</p><div layout="row" layout-align="space-between center"><div class="rm16 pip-datepicker-container" flex="49"><md-datepicker ng-model="data.startDate" xmd-placeholder="{{startLabel}}" ng-change="onChangeStartDate()" ng-disabled="isDisabled()" aria-label="START-DATE"></md-datepicker></div><div flex=""><md-input-container class="w-stretch tm0"><md-select aria-label="START-TIME" class="tm0 bm0" ng-model="data.startTime" ng-disabled="isDisabled()" ng-change="onChangeStartTime()"><md-option ng-value="opt.id" ng-repeat="opt in intervalTimeCollection track by opt.id">{{ opt.time }}</md-option></md-select></md-input-container></div></div></div><div flex="47" class="w-stretch"><p class="text-caption text-grey tm0">{{endLabel}}</p><div layout="row" layout-align="space-between center"><div class="rm16 pip-datepicker-container" flex="49"><md-datepicker ng-model="data.endDate" xmd-placeholder="{{endLabel}}" ng-disabled="isDisabled()" ng-change="onChangeEndDate()" aria-label="END-DATE"></md-datepicker></div><div flex=""><md-input-container class="w-stretch tm0"><md-select aria-label="END-TIME" class="tm0 bm0" ng-model="data.endTime" ng-change="onChangeEndTime()" ng-disabled="isDisabled()"><md-option ng-value="opt.id" ng-repeat="opt in intervalTimeCollection track by opt.id">{{ opt.time }}</md-option></md-select></md-input-container></div></div></div></div>')}])}(),function(t){try{t=angular.module("pipBasicControls.Templates")}catch(e){t=angular.module("pipBasicControls.Templates",[])}t.run(["$templateCache",function(t){t.put("time_view/time_view.html",'<p><span ng-if="data.start != null">{{data.start | formatShortDateTime}}</span> <span class="rm4 lm4" ng-if="data.start && data.end">-</span> <span ng-if="data.end != null">{{data.end | formatShortDateTime}}</span></p>')}])}(),function(t){try{t=angular.module("pipBasicControls.Templates")}catch(e){t=angular.module("pipBasicControls.Templates",[])}t.run(["$templateCache",function(t){t.put("toast/toast.html",'<md-toast class="md-action pip-toast" ng-class="{\'pip-error\': toast.type==\'error\', \'pip-column-toast\': toast.type == \'error\' || toast.actions.length > 1 || actionLenght > 4, \'pip-no-action-toast\': actionLenght == 0}" style="height:initial; max-height: initial;"><span class="flex-var m0 pip-text" ng-bind-html="message"></span><div layout="row" layout-align="end start" class="pip-actions" ng-if="actions.length > 0 || (toast.type==\'error\' && toast.error)"><md-button class="flex-fixed m0 lm8" ng-if="toast.type==\'error\' && toast.error" ng-click="onDetails()">Details</md-button><md-button class="flex-fixed m0 lm8" ng-click="onAction(action)" ng-repeat="action in actions" aria-label="{{::action| translate}}">{{::action| translate}}</md-button></div></md-toast>')}])}(),function(t){try{t=angular.module("pipBasicControls.Templates")}catch(e){t=angular.module("pipBasicControls.Templates",[])}t.run(["$templateCache",function(t){t.put("toggle_buttons/toggle_buttons.html",'<div class="pip-toggle-buttons flex layout-row {{class}}" pip-selected="bufButtonIndex" pip-enter-space-press="enterSpacePress($event)" ng-if="$mdMedia(\'gt-xs\')"><md-button tabindex="-1" ng-repeat="button in buttons" ng-class="{\'md-accent md-raised selected color-accent-bg\' : currentButtonIndex == $index}" ng-attr-style="{{ \'background-color:\' + (currentButtonIndex == $index ? button.backgroundColor : \'\') + \'!important\' }}" class="pip-selectable pip-chip-button flex" ng-click="buttonSelected($index, $event)" ng-disabled="button.disabled || disabled()">{{button.name || button.title | translate}} <span ng-if="button.checked || button.complete || button.filled" class="pip-tagged">*</span></md-button></div><md-input-container class="md-block" ng-if="$mdMedia(\'xs\')"><md-select ng-model="currentButtonIndex" ng-disabled="disabled()" aria-label="DROPDOWN" md-on-close="buttonSelected(currentButtonIndex)"><md-option ng-repeat="action in buttons" value="{{ ::$index }}">{{ (action.title || action.name) | translate }} <span ng-if="action.checked || action.complete || action.filled" class="pip-tagged">*</span></md-option></md-select></md-input-container>')}])}(),function(t){"use strict";var e=t.module("pipColorPicker",["pipUtils","pipFocused","pipBasicControls.Templates"]);e.directive("pipColorPicker",function(){return{restrict:"EA",scope:{ngDisabled:"&",colors:"=pipColors",currentColor:"=ngModel",colorChange:"&ngChange"},templateUrl:"color_picker/color_picker.html",controller:"pipColorPickerController"}}),e.controller("pipColorPickerController",["$scope","$element","$attrs","$timeout",function(t,e,n,a){var i=["purple","lightgreen","green","darkred","pink","yellow","cyan"];t["class"]=n["class"]||"",(!t.colors||_.isArray(t.colors)&&0===t.colors.length)&&(t.colors=i),t.currentColor=t.currentColor||t.colors[0],t.currentColorIndex=t.colors.indexOf(t.currentColor),t.disabled=function(){return!t.ngDisabled||t.ngDisabled()},t.selectColor=function(e){t.disabled()||(t.currentColorIndex=e,t.currentColor=t.colors[t.currentColorIndex],a(function(){t.$apply()}),t.colorChange&&t.colorChange())},t.enterSpacePress=function(e){t.selectColor(e.index)}}])}(window.angular),function(t){"use strict";var e=t.module("pipConfirmationDialog",["ngMaterial","pipUtils","pipTranslate","pipBasicControls.Templates"]);e.config(["pipTranslateProvider",function(t){t.translations("en",{CONFIRM_TITLE:"Confirm"}),t.translations("ru",{CONFIRM_TITLE:"Подтвердите"})}]),e.factory("pipConfirmationDialog",["$mdDialog",function(t){return{show:function(e,n,a){t.show({targetEvent:e.event,templateUrl:"confirmation_dialog/confirmation_dialog.html",controller:"pipConfirmationDialogController",locals:{params:e},clickOutsideToClose:!0}).then(function(){n&&n()},function(){a&&a()})}}}]),e.controller("pipConfirmationDialogController",["$scope","$rootScope","$mdDialog","pipTranslate","params",function(t,e,n,a,i){t.theme=e.$theme,t.title=i.title||"CONFIRM_TITLE",t.ok=i.ok||"OK",t.cancel=i.cancel||"CANCEL",t.onCancel=function(){n.cancel()},t.onOk=function(){n.hide()}}])}(window.angular),function(t,e){"use strict";var n=t.module("pipConversionDialog",["ngMaterial","pipUtils","pipTranslate","pipBasicControls.Templates"]);n.config(["pipTranslateProvider",function(t){t.translations("en",{CONVERT_PARENT_TITLE:"Choose type of the parent record",CONVERT_PARENT_SUBTITLE:"The <b>%s</b> is missing and will be created from scratch. Find and clarify it later",CONVERT_TO_GOAL_SUBTITLE:"Result that requires significant efforts",CONVERT_TO_TASK_SUBTITLE:"Simple work that doesn't need a plan",CONVERT_TO_AREA_SUBTITLE:"Area of interests or actions of any kind",CONVERT_TO_VISION_SUBTITLE:"Situation in specific time period",CONVERT_TO_CANCEL:"Do not create a parent record",CONVERT_TO_CANCEL_SUBTITLE:"The <b>%s</b> is deleted",CONVERT_RECORD_TO_GOAL:"Result that requires significant efforts",CONVERT_RECORD_TO_TASK:"Simple work that doesn't need a plan",CONVERT_RECORD_TO_EVENT:"Reminder or scheduled block of time",CONVERT_RECORD_TO_POST:"Any useful information"}),t.translations("ru",{CONVERT_PARENT_TITLE:"Определите тип родительской записи",CONVERT_PARENT_SUBTITLE:"Запись <b>%s</b> отсутствует и будет создана с нуля. Найдите и скорректируйте ее позже",CONVERT_TO_GOAL_SUBTITLE:"Результат требующий значительных усилий",CONVERT_TO_TASK_SUBTITLE:"Простая работа, для которой не нужен план",CONVERT_TO_AREA_SUBTITLE:"Область интересов или какой-либо активности",CONVERT_TO_VISION_SUBTITLE:"Ситуация в определенный промежуток времени",CONVERT_TO_CANCEL:"Не создавать родительскую запись",CONVERT_TO_CANCEL_SUBTITLE:"<b>%s</b> будет удалена",CONVERT_RECORD_TO_GOAL:"Результат требующий значительных усилий",CONVERT_RECORD_TO_TASK:"Простая работа, для которой не нужен план",CONVERT_RECORD_TO_EVENT:"Напоминание или блок времени в расписании",CONVERT_RECORD_TO_POST:"Любая полезная информация"})}]),n.factory("pipConversionDialog",["$mdDialog",function(t){return{show:function(e,n,a){function i(){e.event&&e.event.currentTarget&&e.event.currentTarget.focus()}e.event&&(e.event.stopPropagation(),e.event.preventDefault()),e.options&&0!==e.options.length&&t.show({targetEvent:e.event,templateUrl:"conversion_dialog/conversion_dialog.html",controller:"pipConversionDialogController",locals:{params:e},clickOutsideToClose:!0}).then(function(t){i(),n&&n(t)},function(){i(),a&&a()})}}}]),n.controller("pipConversionDialogController",["$scope","$rootScope","$mdDialog","params","pipUtils","pipTranslate",function(t,n,a,i,o,l){function r(){var t;t=e(".pip-conversion-dialog .pip-list"),t.focus()}t.theme=n.$theme,t.title=i.title||"CONVERT_PARENT_TITLE",t.recordName=i.recordName||"",t.subtitle=i.subtitle||o.sprintf(l.translate("CONVERT_PARENT_SUBTITLE"),t.recordName),t.withoutTitle=!!i.deleteTitle&&i.deleteTitle,t.deleted=!!i.deleted,t.options=_.cloneDeep(i.options),t.selectedIndex=-1,t.cancelConverting=t.recordName||!1,t.selectedOptionName="",t.cancelConverting&&t.options.push({name:"cancel",title:"CONVERT_TO_CANCEL",subtitle:o.sprintf(l.translate("CONVERT_TO_CANCEL_SUBTITLE"),t.recordName)}),t.onOptionSelect=function(e,n){e.stopPropagation(),t.selectedOptionName=n.name,t.onSelect()},t.onKeyPress=function(e){32!==e.keyCode&&13!==e.keyCode||(e.stopPropagation(),e.preventDefault(),t.selectedOptionName=t.selectedIndex===-1?t.options[0].name:t.options[t.selectedIndex].name,t.onSelect())},t.onKeyDown=function(e){40===e.keyCode&&(e.stopPropagation(),e.preventDefault(),t.selectedIndex+=1,t.selectedIndex=t.selectedIndex%t.options.length,t.selectedOptionName=t.options[t.selectedIndex].name),38===e.keyCode&&(e.stopPropagation(),e.preventDefault(),t.selectedIndex=t.selectedIndex<=0?t.selectedIndex=t.options.length-1:t.selectedIndex-1,t.selectedOptionName=t.options[t.selectedIndex].name)},t.onCancel=function(){a.cancel()},t.onSelect=function(){var e=_.find(t.options,{name:t.selectedOptionName});e&&"cancel"!==e.name?a.hide({option:e,deleted:t.deleted}):a.hide(null)},setTimeout(r,500)}])}(window.angular,window.jQuery),function(t,e){"use strict";var n=t.module("pipDate",["pipBasicControls.Templates"]);n.directive("pipDate",function(){return{restrict:"EA",require:"ngModel",scope:{timeMode:"@pipTimeMode",disabled:"&ngDisabled",model:"=ngModel",ngChange:"&"},templateUrl:"date/date.html",controller:"pipDateController"}}),n.controller("pipDateController",["$scope","$element","pipTranslate",function(t,n,a){function i(t,e){var n,a=31,i=[];for(4===t||6===t||9===t||11===t?a=30:2===t&&(a=e&&e%4===0?29:28),n=1;n<=a;n++)i.push(n);return i}function o(){var t,e=[];for(t=1;t<=12;t++)e.push({id:t,name:a.translate("MONTH_"+t)});return e}function l(){var e,n=(new Date).getFullYear(),a="future"===t.timeMode?n:n-100,i="past"===t.timeMode?n:n+100,o=[];if("past"===t.timeMode)for(e=i;e>=a;e--)o.push(e);else for(e=a;e<=i;e++)o.push(e);return o}function r(){var e=i(t.month,t.year);t.days.length!==e.length&&(t.day>e.length&&(t.day=e.length),t.days=e)}function s(n){var a=n?e.isDate(n)?n:new Date(n):null,o=a?a.getDate():null,l=a?a.getMonth()+1:null,r=a?a.getFullYear():null;t.month!==l&&t.year!==r&&(t.days=i(t.month,t.year)),t.day=o,t.month=l,t.year=r}function p(){var e;t.day&&t.month&&t.year&&(e=new Date(t.year,t.month-1,t.day,0,0,0,0),t.model=e,t.ngChange())}var d;t.onDayChanged=function(){p()},t.onMonthChanged=function(){r(),p()},t.onYearChanged=function(){r(),p()},d=t.model?e.isDate(t.model)?t.model:new Date(t.model):null,t.day=d?d.getDate():null,t.month=d?d.getMonth()+1:null,t.year=d?d.getFullYear():null,t.dayLabel=a.translate("DAY"),t.monthLabel=a.translate("MONTH"),t.yearLabel=a.translate("YEAR"),t.days=i(t.month,t.year),t.months=o(),t.years=l(),t.disableControls=!!t.disabled&&t.disabled(),t.$watch("model",function(t,e){s(t)}),t.$watch(t.disabled,function(e){t.disableControls=e})}])}(window.angular,window._),function(t,e){"use strict";var n=t.module("pipDateRange",[]);n.directive("pipDateRange",function(){return{restrict:"EA",require:"ngModel",scope:{timeMode:"@pipTimeMode",disabled:"&ngDisabled",model:"=ngModel",pipChanged:"&",pipDateRangeType:"@",pipDateFormat:"@",pipNoLine:"@"},templateUrl:"date_range/date_range.html",controller:"pipDateRangeController"}}),n.controller("pipDateRangeController",["$scope","$element","pipTranslate","$mdMedia","$rootScope",function(t,n,a,i,o){function l(){E.day=t.day,E.month=t.month,E.year=t.year,E.week=t.week,E.dateRangeType=t.pipDateRangeType,E.model=t.model}function r(){t.days=c(t.month,t.year),t.weeks=g(t.month,t.year),t.months=f(),t.shortMonths=f(!0),t.years=h()}function s(){(!x.model||x.model&&x.model.getTime()>=t.model.getTime())&&t.weeks&&t.weeks[t.week]&&t.weeks[t.week].id<=0&&(t.month<12?t.month+=1:(t.month=1,t.year+=1),r())}function p(){var e;e=t.model?new Date(t.model):null,t.day=e?e.getUTCDate():null,t.month=e?e.getUTCMonth()+1:null,t.year=e?e.getUTCFullYear():null,t.week=e?u(t.day,t.month-1,t.year):null,r(),"weekly"===t.pipDateRangeType?(s(),v()):T(),y()}function d(t,e){var n=31;return 4===t||6===t||9===t||11===t?n=30:2===t&&(n=e&&e%4===0?29:28),n}function c(e,n){var a,i,l,r;for(r=o.$language||"en",a=d(e,n),t.nameDays=[],i=[],l=1;l<=a;l++)i.push(l),t.nameDays.push(t.daysWeek[r][new Date(n,e-1,l).getDay()]);return i}function u(t,e,n){var a,i,o;return a=new Date(Date.UTC(n,e,t)),i=a.getUTCDay()?a.getUTCDay():7,o=1===i?t:t+1-i}function m(t,e,n){var a,i;return a=t+6>e?e-t-6:t+6,i=t>0?t:n+t,i.toString()+" - "+Math.abs(a).toString()}function g(t,e){var n,a,i,o;for(n=[],a=d(t,e),o=u(1,t-1,e),i=t-1?d(t-1,e):d(12,e-1);o<a+1;)n.push({id:o,name:m(o,a,i)}),o+=7;return n}function f(t){var e,n;for(e=[],n=1;n<=12;n++)e.push({id:n,name:a.translate("MONTH_"+n)});return e}function h(){var e,n,a,i=[];switch(t.timeMode){case"future":e=D,a=D+100;break;case"past":e=D-100,a=D;break;case"now":e=D-50,a=D+100;break;default:e=D-50,a=D+50}if("future"===t.timeMode)for(n=e;n<=a;n++)i.push(n);else for(n=a;n>=e;n--)i.push(n);return i}function T(){var e=c(t.month,t.year);switch(t.pipDateRangeType){case"monthly":t.day=1;break;case"yearly":t.month=1,t.day=1;break;default:t.days.length!==e.length&&t.day>e.length&&(t.day=e.length)}t.days=e}function v(){var e;e=g(t.month,t.year),t.week=u(t.week,t.month-1,t.year),t.weeks=e}function C(e){var n,a,i,o,l;n=e?new Date(e):null,a=n?n.getUTCDate():null,i=n?n.getUTCMonth()+1:null,o=n?n.getUTCFullYear():null,l=n?u(a,i-1,o):null,t.day===a&&t.month===i&&t.year===o&&t.week===l||(t.day=a,t.month=i,t.year=o,t.week=l,t.days=c(t.month,t.year),t.weeks=g(t.month,t.year))}function y(){var n;"weekly"===t.pipDateRangeType?(n=new Date(t.year,t.month-1,t.week,0,0,0,0),n=new Date(n.getTime()-6e4*n.getTimezoneOffset()),t.model=n):(n=new Date(t.year,t.month-1,t.day,0,0,0,0),n=new Date(n.getTime()-6e4*n.getTimezoneOffset()),t.model=n),x=e.cloneDeep(E),l(),t.onChange()}var b,D,w,k,x={},E={};b=new Date,D=b.getUTCFullYear(),w=b.getUTCMonth()+1,k=b.getUTCDate(),t.daysWeek={en:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],ru:["Вс","Пн","Вт","Ср","Чт","Пт","Сб"]},t.onDayChanged=function(){y()},t.onMonthChanged=function(){if("weekly"===t.pipDateRangeType){var e,n;e=new Date(Date.UTC(t.year,t.month-1,1)),n=e.getUTCDay()?e.getUTCDay():7,t.week=u(n,t.month-1,t.year),s(),v()}else T();y()},t.onYearChanged=function(){var e,n;e=new Date(Date.UTC(t.year,t.month-1,1)),n=e.getUTCDay()?e.getUTCDay():7,"weekly"===t.pipDateRangeType?(t.week=u(n,t.month-1,t.year),v(),s()):T(),y()},t.onWeekChange=function(){"weekly"===t.pipDateRangeType?(v(),s()):T(),y()},t.isDay=function(){return"daily"===t.pipDateRangeType;
},t.isWeek=function(){return"weekly"===t.pipDateRangeType},t.isMonth=function(){return"daily"===t.pipDateRangeType||"weekly"===t.pipDateRangeType||"monthly"===t.pipDateRangeType},t.onChange=function(){t.pipChanged&&t.pipChanged()},t.$mdMedia=i,p(),t.disableControls=!!t.disabled&&t.disabled(),t.$watch("model",function(t,e){t!==e&&C(t)}),t.$watch(t.disabled,function(e){t.disableControls=e}),t.$watch("pipDateRangeType",function(t,e){t!==e&&e&&p()}),t.onYearClick=function(){t.year||(t.year=D)},t.onMonthClick=function(){t.month||(t.month=w)},t.onDayClick=function(){t.year||(t.day=k)}}])}(window.angular,window._),function(t){"use strict";var e=t.module("pipErrorDetailsDialog",["ngMaterial","pipUtils","pipTranslate","pipBasicControls.Templates"]);e.config(["pipTranslateProvider",function(t){t.translations("en",{ERROR_DETAILS:"Error details",CODE:"Code",PATH:"Path",ERROR:"Error code",METHOD:"Method",MESSAGE:"Message"}),t.translations("ru",{ERROR_DETAILS:"Детали ошибки",CODE:"Код",PATH:"Путь",ERROR:"Код ошибки",METHOD:"Метод",MESSAGE:"Сообщение"})}]),e.factory("pipErrorDetailsDialog",["$mdDialog",function(t){return{show:function(e,n,a){t.show({targetEvent:e.event,templateUrl:"error_details_dialog/error_details_dialog.html",controller:"pipErrorDetailsDialogController",locals:{params:e},clickOutsideToClose:!0}).then(function(){n&&n()},function(){a&&a()})}}}]),e.controller("pipErrorDetailsDialogController",["$scope","$rootScope","$mdDialog","pipTranslate","params",function(t,e,n,a,i){t.error=i.error,t.ok=i.ok||"OK",t.cancel=i.cancel||"CANCEL",t.onCancel=function(){n.cancel()},t.onOk=function(){n.hide()}}])}(window.angular),function(t,e,n){"use strict";var a=t.module("pipImageSlider",[]);a.directive("pipImageSlider",function(){return{scope:!1,controller:["$scope","$element","$attrs","$parse","$timeout","$interval","$pipImageSlider",function(t,a,i,o,l,r,s){function p(){v&&v(t,C)}function d(){h=r(function(){g=C+1===m.length?0:C+1,f="next",T()},D||b)}function c(){r.cancel(h)}function u(){c(),d()}var m,g,f,h,T,v=o(i.pipImageSliderIndex).assign,C=0,y=o(i.pipAnimationType)(t),b=4500,D=o(i.pipAnimationInterval)(t);a.addClass("pip-image-slider"),a.addClass("pip-animation-"+y),t.swipeStart=0,p(),l(function(){m=a.find(".pip-animation-block"),m.length>0&&n(m[0]).addClass("pip-show")}),d(),T=e.throttle(function(){s.toBlock(y,m,C,g,f),C=g,p()},600),t.nextBlock=function(){u(),g=C+1===m.length?0:C+1,f="next",T()},t.prevBlock=function(){u(),g=C-1<0?m.length-1:C-1,f="prev",T()},t.slideTo=function(t){t===C||t>m.length-1||(u(),g=t,f=t>C?"next":"prev",T())},a.on("$destroy",function(){c()})}]}}),a.directive("pipSliderButton",function(){return{scope:{},controller:["$scope","$element","$parse","$attrs",function(e,n,a,i){var o=a(i.pipButtonType)(e),l=a(i.pipSliderId)(e);n.on("click",function(){l&&o&&t.element(document.getElementById(l)).scope()[o+"Block"]()})}]}}),a.directive("pipSliderIndicator",function(){return{scope:!1,controller:["$scope","$element","$parse","$attrs",function(e,n,a,i){var o=a(i.pipSliderId)(e),l=a(i.pipSlideTo)(e);n.css("cursor","pointer"),n.on("click",function(){!o||l&&l<0||t.element(document.getElementById(o)).scope().slideTo(l)})}]}}),a.service("$pipImageSlider",["$timeout",function(t){function e(e,n){e.removeClass("animated").addClass("pip-next"),t(function(){e.addClass("animated").addClass("pip-show").removeClass("pip-next"),n.addClass("animated").removeClass("pip-show")},100)}function a(e,n){e.removeClass("animated"),t(function(){e.addClass("animated").addClass("pip-show"),n.addClass("animated").addClass("pip-next").removeClass("pip-show"),t(function(){n.removeClass("pip-next").removeClass("animated")},o-100)},100)}function i(t,i,o,l,r){var s=n(i[o]),p=l,d=n(i[p]);"carousel"===t?(n(i).removeClass("pip-next").removeClass("pip-prev"),r&&"prev"===r&&a(d,s),r&&"next"===r&&e(d,s),(!r||"next"!==r&&"prev"!==r)&&l&&l<o?a(d,s):e(d,s)):(s.addClass("animated").removeClass("pip-show"),d.addClass("animated").addClass("pip-show"))}var o=550;return{nextCarousel:e,prevCarousel:a,toBlock:i}}])}(window.angular,window._,window.jQuery),function(t){"use strict";var e=t.module("pipInformationDialog",["ngMaterial","pipUtils","pipTranslate","pipBasicControls.Templates"]);e.config(["pipTranslateProvider",function(t){t.translations("en",{INFORMATION_TITLE:"Information"}),t.translations("ru",{INFORMATION_TITLE:"Информация"})}]),e.factory("pipInformationDialog",["$mdDialog","$timeout",function(t,e){return{show:function(e,n){t.show({targetEvent:e.event,templateUrl:"information_dialog/information_dialog.html",controller:"pipInformationDialogController",locals:{params:e},clickOutsideToClose:!0}).then(function(){n&&n()})}}}]),e.controller("pipInformationDialogController",["$scope","$rootScope","$mdDialog","pipTranslate","params","pipUtils",function(t,e,n,a,i,o){var l,r;t.theme=e.$theme,t.title=i.title||"INFORMATION_TITLE",l=a.translate(i.message),i.item&&(r=_.truncate(i.item,25),l=o.sprintf(l,r)),t.content=l,t.ok=i.ok||"OK",t.onOk=function(){n.hide()}}])}(window.angular),function(t,e){"use strict";var n=t.module("pipMarkdown",["ngSanitize","pipUtils","pipTranslate"]);n.config(["pipTranslateProvider",function(t){t.translations("en",{MARKDOWN_ATTACHMENTS:"Attachments:",checklist:"Checklist",documents:"Documents",pictures:"Pictures",location:"Location",time:"Time"}),t.translations("ru",{MARKDOWN_ATTACHMENTS:"Вложения:",checklist:"Список",documents:"Документы",pictures:"Изображения",location:"Местонахождение",time:"Время"})}]),n.directive("pipMarkdown",["$parse","pipUtils","pipTranslate",function(t,n,a){return{restrict:"EA",scope:!1,link:function(i,o,l){function r(t){var e="",n=[];return _.each(t,function(t){t.type&&"text"!==t.type&&(0===e.length&&(e=a.translate("MARKDOWN_ATTACHMENTS")),n.indexOf(t.type)<0&&(n.push(t.type),e+=n.length>1?", ":" ",e+=a.translate(t.type)))}),e}function s(t){var n,a,i,s,p;_.isArray(t)?(p=_.find(t,function(t){return"text"===t.type&&t.text}),n=p?p.text:r(t)):n=t,a=l.pipLineCount&&_.isNumber(c()),a=a&&n&&n.length>0,s={gfm:!0,tables:!0,breaks:!0,sanitize:!0,pedantic:!0,smartLists:!0,smartypents:!1},n=e(n||"",s),a&&(i=1.5*c()),o.html("<div"+(a?d()?'class="pip-markdown-content pip-markdown-list" style="max-height: '+i+'em">':' class="pip-markdown-content" style="max-height: '+i+'em">':d()?' class="pip-markdown-list">':">")+n+"</div>"),o.find("a").attr("target","blank"),!d()&&a&&o.append('<div class="pip-gradient-block"></div>')}var p=t(l.pipText),d=t(l.pipList),c=t(l.pipLineCount);s(p(i)),n.toBoolean(l.pipRebind)&&i.$watch(p,function(t){s(t)}),i.$on("pipWindowResized",function(){s(p(i))}),o.addClass("pip-markdown")}}}])}(window.angular,window.marked),function(t,e){"use strict";var n=t.module("pipOptionsDialog",["ngMaterial","pipUtils","pipTranslate","pipBasicControls.Templates"]);n.config(["pipTranslateProvider",function(t){t.translations("en",{OPTIONS_TITLE:"Choose Option"}),t.translations("ru",{OPTIONS_TITLE:"Выберите опцию"})}]),n.factory("pipOptionsDialog",["$mdDialog",function(t){return{show:function(e,n,a){function i(){e.event&&e.event.currentTarget&&e.event.currentTarget.focus()}e.event&&(e.event.stopPropagation(),e.event.preventDefault()),t.show({targetEvent:e.event,templateUrl:"options_dialog/options_dialog.html",controller:"pipOptionsDialogController",locals:{params:e},clickOutsideToClose:!0}).then(function(t){i(),n&&n(t)},function(){i(),a&&a()})}}}]),n.controller("pipOptionsDialogController",["$scope","$rootScope","$mdDialog","params",function(t,n,a,i){function o(){var t;t=e(".pip-options-dialog .pip-list"),t.focus()}t.theme=n.$theme,t.title=i.title||"OPTIONS_TITLE",t.options=i.options,t.selectedOption=_.find(i.options,{active:!0})||{},t.selectedOptionName=t.selectedOption.name,t.applyButtonTitle=i.appleButtonTitle||"SELECT",t.deleted=i.deleted,t.deletedTitle=i.deletedTitle,t.onOptionSelect=function(e,n){e.stopPropagation(),t.selectedOptionName=n.name},t.onKeyPress=function(e){32!==e.keyCode&&13!==e.keyCode||(e.stopPropagation(),e.preventDefault(),t.onSelect())},t.onCancel=function(){a.cancel()},t.onSelect=function(){var e;e=_.find(i.options,{name:t.selectedOptionName}),a.hide({option:e,deleted:t.deleted})},setTimeout(o,500)}])}(window.angular,window.jQuery),function(t,e){"use strict";var n=t.module("pipOptionsBigDialog",["ngMaterial","pipUtils","pipTranslate","pipBasicControls.Templates"]);n.config(["pipTranslateProvider",function(t){t.translations("en",{OPTIONS_TITLE:"Choose Option"}),t.translations("ru",{OPTIONS_TITLE:"Выберите опцию"})}]),n.factory("pipOptionsBigDialog",["$mdDialog",function(t){return{show:function(e,n,a){function i(){e.event&&e.event.currentTarget&&e.event.currentTarget.focus()}e.event&&(e.event.stopPropagation(),e.event.preventDefault()),t.show({targetEvent:e.event,templateUrl:"options_dialog/options_dialog_big.html",controller:"pipOptionsDialogBigController",locals:{params:e},clickOutsideToClose:!0}).then(function(t){i(),n&&n(t)},function(){i(),a&&a()})}}}]),n.controller("pipOptionsDialogBigController",["$scope","$rootScope","$mdDialog","params",function(t,n,a,i){function o(){var t;t=e(".pip-options-dialog .pip-list"),t.focus()}t.theme=n.$theme,t.title=i.title||"OPTIONS_TITLE",t.options=i.options,t.noActions=i.noActions||!1,t.noTitle=i.noTitle||!1,t.hint=i.hint||"",t.selectedOption=_.find(i.options,{active:!0})||{},t.selectedOptionName=t.selectedOption.name,t.optionIndex=_.findIndex(i.options,t.selectedOption),t.applyButtonTitle=i.applyButtonTitle||"SELECT",t.deleted=i.deleted,t.deletedTitle=i.deletedTitle,t.onOptionSelect=function(e,n){e.stopPropagation(),t.selectedOptionName=n.name,t.noActions&&t.onSelect()},t.onSelected=function(e){t.selectedOptionName=t.options[t.optionIndex].name,t.noActions},t.onKeyUp=function(e,n){32!==e.keyCode&&13!==e.keyCode||(e.stopPropagation(),e.preventDefault(),void 0!==n&&n>-1&&n<t.options.length&&(t.selectedOptionName=t.options[n].name,t.onSelect()))},t.onCancel=function(){a.cancel()},t.onSelect=function(){var e;e=_.find(t.options,{name:t.selectedOptionName}),a.hide({option:e,deleted:t.deleted})},setTimeout(o,500)}])}(window.angular,window.jQuery),function(t,e){"use strict";var n=t.module("pipPopover",["pipAssert"]);n.directive("pipPopover",function(){return{restrict:"EA",scope:!0,templateUrl:"popover/popover.template.html",controller:["$scope","$rootScope","$element","$timeout","$compile",function(t,n,a,i,o){function l(){m.addClass("opened"),e(".pip-popover-backdrop").focus(),t.params.timeout&&i(function(){s()},t.params.timeout)}function r(){t.params.cancelCallback&&t.params.cancelCallback(),s()}function s(){m.removeClass("opened"),i(function(){m.remove()},100)}function p(t){t.stopPropagation()}function d(){if(t.params.element){var n=e(t.params.element),a=n.offset(),i=n.width(),o=n.height(),l=e(document).width(),r=e(document).height(),s=m.find(".pip-popover");a&&s.css("max-width",l-(l-a.left)).css("max-height",r-(a.top+o)-32,0).css("left",a.left-s.width()+i/2).css("top",a.top+o+16)}}function c(){if(t.params.calcHeight!==!1){var e=m.find(".pip-popover"),n=e.find(".pip-title"),a=e.find(".pip-footer"),i=e.find(".pip-content"),o=e.height()-n.outerHeight(!0)-a.outerHeight(!0);i.css("max-height",Math.max(o,0)+"px").css("box-sizing","border-box")}}function u(){m.find(".pip-popover").find(".pip-content").css("max-height","100%"),d(),c()}var m,g;m=e(".pip-popover-backdrop"),m.on("click keydown scroll",r),m.addClass(t.params.responsive!==!1?"pip-responsive":""),i(function(){d(),t.params.template&&(g=o(t.params.template)(t),a.find(".pip-popover").append(g)),l()}),i(function(){c()},200),t.onPopoverClick=p,t=_.defaults(t,t.$parent),n.$on("pipPopoverResize",u),e(window).resize(u)}]}}),n.service("$pipPopover",["$compile","$rootScope","$timeout",function(t,n,a){function i(a){var i,l,s,p;i=e("body"),i.find("md-backdrop").length>0||(o(),l=n.$new(),s=a&&_.isObject(a)?a:{},l.params=s,l.locals=s.locals,p=t(r)(l),i.append(p))}function o(){var t=e(".pip-popover-backdrop");t.removeClass("opened"),a(function(){t.remove()},100)}function l(){n.$broadcast("pipPopoverResize")}var r;return r="<div class='pip-popover-backdrop {{ params.class }}' ng-controller='params.controller' tabindex='1'> <pip-popover pip-params='params'> </pip-popover> </div>",{show:i,hide:o,resize:l}}])}(window.angular,window.jQuery),function(t){"use strict";var e=t.module("pipRoutingProgress",["ngMaterial"]);e.directive("pipRoutingProgress",function(){return{restrict:"EA",replace:!0,templateUrl:"progress/routing_progress.html"}})}(window.angular),function(t){"use strict";var e=t.module("pipRefreshButton",["ngMaterial"]);e.directive("pipRefreshButton",["$parse",function(t){return{restrict:"EA",scope:!1,template:String()+'<md-button class="pip-refresh-button" tabindex="-1" ng-click="onClick($event)" aria-label="REFRESH"><md-icon md-svg-icon="icons:refresh"></md-icon><span class="pip-refresh-text"></span></md-button>',replace:!1,link:function(e,n,a){function i(){c.hide()}var o,l,r,s=t(a.pipText),p=t(a.pipVisible),d=t(a.pipRefresh),c=n.children(".md-button"),u=c.children(".pip-refresh-text");r=function(){l=s(e),u.text(l),c.show(),o=c.width(),c.css("margin-left","-"+o/2+"px")},e.onClick=function(){d(e)},e.$watch(p,function(t){t?r():i()}),e.$watch(s,function(t){u.text(t)})}}}])}(window.angular),function(t){"use strict";var e=t.module("pipTagList",["pipCore"]);e.directive("pipTagList",["$parse",function(t){return{restrict:"EA",scope:{pipTags:"=",pipType:"=",pipTypeLocal:"="},templateUrl:"tags/tag_list.html",controller:["$scope","$element","$attrs","pipUtils",function(e,n,a,i){var o;o=t(a.pipTags),n.css("display","block"),e.tags=o(e),i.toBoolean(a.pipRebind)&&e.$watch(o,function(t){e.tags=o(e)}),n.addClass("pip-tag-list")}]}}])}(window.angular),function(t){"use strict";var e=t.module("pipTimeEdit",["pipUtils","pipTranslate"]);e.directive("pipTimeEdit",function(){return{restrict:"EA",scope:{pipStartDate:"=",pipChanged:"&",pipEndDate:"=",pipStartLabel:"@",pipEndLabel:"@",disabled:"&ngDisabled",pipSize:"="},templateUrl:"time_edit/time_edit.html",controller:"pipTimeEditController"}}),e.controller("pipTimeEditController",["$scope","$element","$attrs","pipDates","pipTranslate",function(t,e,n,a,i){function o(t){var e;return e=t?new Date(t):null}function l(){var e,n;return t.data.startDate&&t.data.endDate?(e=new Date(t.data.startDate.getTime()+60*t.data.startTime*1e3),n=new Date(t.data.endDate.getTime()+60*t.data.endTime*1e3),n-e):null}function r(){var e,n,i;return t.data.startDate?(t.data.startTime||(t.data.endTime?t.data.startTime=0===t.data.endTime?0:t.data.endTime-30:(e=new Date,e=e.getTime()-a.toStartDay(e),t.data.startTime=30*Math.floor(e/18e5))),t.data.endDate?(n=new Date(t.data.startDate.getTime()+60*t.data.startTime*1e3),void(t.data.duration?(i=new Date(n.getTime()+t.data.duration),t.data.endDate=a.toStartDay(i),i=i.getTime()-t.data.endDate.getTime(),t.data.endTime=30*Math.floor(i/18e5)):(i=new Date(t.data.endDate.getTime()+60*t.data.endTime*1e3),n>=i&&(t.data.endDate=a.toStartDay(new Date(n.getTime()+18e5)),t.data.endTime=(t.data.startTime+30)%1440)))):void(t.data.endTime=null)):void(t.data.startTime=null)}function s(){var e,n,i;return t.data.endDate?(t.data.endTime||(t.data.startTime?t.data.endTime=1410===t.data.startTime?1410:t.data.startTime+30:(e=new Date,e=e.getTime()-a.toStartDay(e),t.data.endTime=30*Math.floor(e/18e5))),t.data.startDate?(n=new Date(t.data.startDate.getTime()+60*t.data.startTime*1e3),i=new Date(t.data.endDate.getTime()+60*t.data.endTime*1e3),n>=i&&(t.data.startDate=a.toStartDay(new Date(i.getTime()-18e5)),t.data.startTime=t.data.endTime%1440===0?1410:t.data.endTime-30),void(t.data.duration=l())):void(t.data.startTime=null)):void(t.data.endTime=null)}function p(){var e;t.data.bind=!1,t.data.startDate&&(e=t.data.startTime?60*t.data.startTime*1e3:0,t.pipStartDate=new Date(t.data.startDate.getTime()+e)),t.data.endDate&&(e=t.data.endTime?60*t.data.endTime*1e3:0,t.pipEndDate=new Date(t.data.endDate.getTime()+e)),t.data.bind=!0}function d(){var e,n;null!==t.pipStartDate&&void 0!==t.pipStartDate&&(e=_.isDate(t.pipStartDate)?t.pipStartDate:null,e||(e=o(t.pipStartDate)),t.data.startDate=a.toStartDay(e),t.data.startTime=(new Date(e)-t.data.startDate)/6e4),null!==t.pipEndDate&&void 0!==t.pipEndDate&&(n=_.isDate(t.pipEndDate)?t.pipEndDate:null,e||(n=o(t.pipEndDate)),t.data.endDate=a.toStartDay(n),t.data.endTime=(new Date(n)-t.data.endDate)/6e4),r(),t.data.duration=l(),p()}function c(){var t,e,n,a;for(t=[],e=0;e<24;e++)for(n=0;n<2;n++)a=30*n,t.push({id:60*e+a,time:_.pad(e.toString(),3,"0").substr(0,2)+":"+_.pad(a.toString(),2,"0")});return t}function u(){t.data.startDate=null,t.data.startTime=null,t.data.endDate=null,t.data.endTime=null,t.data.duration=null}t.intervalTimeCollection=c(),t.data={},t.startLabel=t.pipStartLabel?i.translate(t.pipStartLabel):i.translate("EVENT_NEW_START_TIME"),t.endLabel=t.pipEndLabel?i.translate(t.pipEndLabel):i.translate("EVENT_NEW_END_TIME"),u(),d(),t.onChangeStartDate=function(){r(),t.data.duration=l(),p(),t.pipChanged()},t.onChangeEndDate=function(){s(),t.data.duration=l(),p(),t.pipChanged()},t.onChangeStartTime=function(){t.data.startDate||(t.data.startDate=a.toStartDay(new Date)),r(),t.data.duration=l(),p(),t.pipChanged()},t.onChangeEndTime=function(){t.data.endDate||(t.data.endDate=a.toStartDay(new Date)),s(),t.data.duration=l(),p(),t.pipChanged()},t.isDisabled=function(){return!!t.disabled&&t.disabled()},t.$watchGroup([t.pipStartDate,t.pipEndDate],function(){t.data.bind&&(u(),d())}),t.$watch(t.disabled,function(e){t.disableControls=e}),e.addClass("pip-time-edit")}])}(window.angular),function(t){"use strict";var e=t.module("pipTimeView",["pipUtils"]);e.directive("pipTimeView",["pipUtils",function(t){return{restrict:"EA",scope:{pipStartDate:"=",pipEndDate:"="},templateUrl:"time_view/time_view.html",link:function(e,n,a){function i(t){var e=t?new Date(t):null;return e}function o(){null!==e.pipStartDate&&void 0!==e.pipStartDate&&(e.data.start=_.isDate(e.pipStartDate)?e.pipStartDate:i(e.pipStartDate))}function l(){null!==e.pipEndDate&&void 0!==e.pipEndDate&&(e.data.end=_.isDate(e.pipEndDate)?e.pipEndDate:i(e.pipEndDate))}e.data={},e.data.start=null,e.data.end=null,o(),l(),t.toBoolean(a.pipRebind)&&(e.$watch("pipStartDate",function(t){e.data.start=null,o()}),e.$watch("pipEndDate",function(t){e.data.end=null,l()})),n.addClass("pip-time-view")}}}])}(window.angular),function(t,e){"use strict";var n=t.module("pipToasts",["pipTranslate","ngMaterial","pipAssert"]);n.controller("pipToastController",["$scope","$mdToast","toast","pipErrorDetailsDialog","sounds",function(e,n,a,i,o){e.message=a.message,e.actions=a.actions,e.toast=a,0===a.actions.length&&(e.actionLenght=0),1===a.actions.length?e.actionLenght=a.actions[0].toString().length:e.actionLenght=null,e.onDetails=function(a){n.hide(),i.show({error:e.toast.error,ok:"Ok"},function(){t.noop()},function(){t.noop()})},e.onAction=function(t){n.hide({action:t,id:a.id,message:a.message})}}]),n.service("pipToasts",["$rootScope","$mdToast","pipAssert",function(t,n,a){function i(){var t;y.length>0&&(t=y[0],y.splice(0,1),o(t))}function o(t){T=t,n.show({templateUrl:"toast/toast.html",hideDelay:t.duration||v,position:"bottom left",controller:"pipToastController",locals:{toast:T,sounds:b}}).then(function(t){T.successCallback&&T.successCallback(t),T=null,i()},function(t){T.cancelCallback&&T.cancelCallback(t),T=null,i()})}function l(t){T&&"error"!==t.type?y.push(t):o(t)}function r(t){var n=[];e.each(y,function(e){e.type&&e.type===t||n.push(e)}),y=e.cloneDeep(n)}function s(t){e.remove(y,{id:t})}function p(t){return e.find(y,{id:t})}function d(t,a,o,l,r){y=e.reject(y,function(t){return"error"===t.type}),T&&"error"===T.type&&(n.cancel(),i())}function c(t){h()}function u(t,e,n,i,o){a.isDef(t,"pipToasts.showNotification: message should be defined"),a.isString(t,"pipToasts.showNotification: message should be a string"),a.isArray(e||[],"pipToasts.showNotification: actions should be an array"),n&&a.isFunction(n,"showNotification: successCallback should be a function"),i&&a.isFunction(i,"showNotification: cancelCallback should be a function"),l({id:o||null,type:"notification",message:t,actions:e||["ok"],successCallback:n,cancelCallback:i,duration:C})}function m(t,e,n,i){a.isDef(t,"pipToasts.showMessage: message should be defined"),a.isString(t,"pipToasts.showMessage: message should be a string"),e&&a.isFunction(e,"pipToasts.showMessage:successCallback should be a function"),n&&a.isFunction(n,"pipToasts.showMessage: cancelCallback should be a function"),l({id:i||null,type:"message",message:t,actions:["ok"],successCallback:e,cancelCallback:n})}function g(t,e,n,i,o){a.isDef(t,"pipToasts.showError: message should be defined"),a.isString(t,"pipToasts.showError: message should be a string"),e&&a.isFunction(e,"pipToasts.showError: successCallback should be a function"),n&&a.isFunction(n,"pipToasts.showError: cancelCallback should be a function"),l({id:i||null,error:o,type:"error",message:t,actions:["ok"],successCallback:e,cancelCallback:n})}function f(){n.cancel(),y=[]}function h(t){t?(a.isString(t,"pipToasts.clearToasts: type should be a string"),r(t)):(n.cancel(),y=[])}var T,v=2e4,C=2e4,y=[],b={};return t.$on("$stateChangeSuccess",d),t.$on("pipSessionClosed",c),{showNotification:u,showMessage:m,showError:g,hideAllToasts:f,clearToasts:h,removeToastsById:s,getToastById:p}}])}(window.angular,window._),function(t,e){"use strict";var n=t.module("pipToggleButtons",["pipBasicControls.Templates"]);n.directive("pipToggleButtons",function(){return{restrict:"EA",scope:{ngDisabled:"&",buttons:"=pipButtons",currentButtonValue:"=ngModel",currentButton:"=?pipButtonObject",change:"&ngChange"},templateUrl:"toggle_buttons/toggle_buttons.html",controller:["$scope","$element","$attrs","$mdMedia","$timeout",function(t,n,a,i,o){var l;t.$mdMedia=i,t["class"]=a["class"]||"",(!t.buttons||e.isArray(t.buttons)&&0===t.buttons.length)&&(t.buttons=[]),l=e.indexOf(t.buttons,e.find(t.buttons,{id:t.currentButtonValue})),t.currentButtonIndex=l<0?0:l,t.currentButton=t.buttons.length>0?t.buttons[t.currentButtonIndex]:t.currentButton,t.buttonSelected=function(e,n){t.disabled()||(t.currentButtonIndex=e,t.currentButton=t.buttons[t.currentButtonIndex],t.currentButtonValue=t.currentButton.id||e,o(function(){t.$apply(),t.change&&t.change()}))},t.enterSpacePress=function(e){t.buttonSelected(e.index)},t.disabled=function(){if(t.ngDisabled)return t.ngDisabled()}}],link:function(t,e,n){e.on("focusin",function(){e.addClass("focused-container")}).on("focusout",function(){e.removeClass("focused-container")})}}})}(window.angular,window._);