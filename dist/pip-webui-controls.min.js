!function(){"use strict";angular.module("pipControls",["pipMarkdown","pipToggleButtons","pipRefreshButton","pipColorPicker","pipRoutingProgress","pipPopover","pipImageSlider","pipToasts","pipTagList","pipDate","pipDateRange","pipTimeEdit","pipTimeView","pipInformationDialog","pipConfirmationDialog","pipOptionsDialog","pipOptionsBigDialog","pipConversionDialog","pipErrorDetailsDialog"]),angular.module("pipBasicControls",["pipControls"])}(),function(e){try{e=angular.module("pipBasicControls.Templates")}catch(t){e=angular.module("pipBasicControls.Templates",[])}e.run(["$templateCache",function(e){e.put("color_picker/color_picker.html",'<ul class="pip-color-picker lp0 {{class}}" pip-selected="currentColorIndex" pip-enter-space-press="enterSpacePress($event)"><li tabindex="-1" ng-repeat="color in colors"><md-button tabindex="-1" class="md-icon-button pip-selectable" ng-click="selectColor($index)" aria-label="color" ng-disabled="disabled()"><md-icon ng-style="{\'color\': color}" md-svg-icon="icons:{{ color == currentColor ? \'circle\' : \'radio-off\' }}"></md-icon></md-button></li></ul>')}])}(),function(e){try{e=angular.module("pipBasicControls.Templates")}catch(t){e=angular.module("pipBasicControls.Templates",[])}e.run(["$templateCache",function(e){e.put("confirmation_dialog/confirmation_dialog.html",'<md-dialog class="pip-dialog pip-confirmation-dialog" layout="column" width="400" md-theme="{{theme}}"><div class="pip-header text-subhead1"><h3 class="m0">{{ title | translate }}</h3></div><div class="pip-footer"><div><md-button ng-click="onCancel()">{{ cancel | translate }}</md-button><md-button class="md-accent" ng-click="onOk()">{{ ok | translate }}</md-button></div></div></md-dialog>')}])}(),function(e){try{e=angular.module("pipBasicControls.Templates")}catch(t){e=angular.module("pipBasicControls.Templates",[])}e.run(["$templateCache",function(e){e.put("conversion_dialog/conversion_dialog.html",'<md-dialog class="pip-dialog pip-conversion-dialog" layout="column" min-width="450" md-theme="{{theme}}"><md-dialog-content class="pip-body p0 pip-scroll"><div class="pip-header" ng-if="!withoutTitle || deleted" ng-class="{\'header-hint\': withoutTitle && deleted}"><h3 class="m0 text-title" ng-hide="withoutTitle">{{::title | translate}}</h3><p class="tp8 pip-subtitle" ng-hide="withoutTitle"><span pip-translate-html="{{::subtitle | translate}}"></span></p><div ng-show="withoutTitle && deleted" class="dialog-hint" layout="row" layout-align="start center"><div class="w40" flex-fixed=""><md-icon md-svg-icon="icons:info-circle-outline"></md-icon></div><div>{{::withoutTitle | translate}}</div></div></div><div class="pip-divider" ng-if="!withoutTitle"></div><div class="h8" ng-if="withoutTitle"></div><div class="pip-content"><div class="pip-list md-primary" md-no-ink="true" ng-keydown="onKeyDown($event)" ng-keypress="onKeyPress($event)" tabindex="0"><div ng-repeat="option in options" class="pip-list-item" md-ink-ripple="" ui-event="{ click: \'onOptionSelect($event, option)\' }" ng-class="{ selected: option.name == selectedOptionName, \'divider-bottom\': $index < options.length - 1 }"><div class="pip-content lp24-flex rp24-flex" flex=""><div class="pip-title" ng-if="option.title">{{::option.title | translate}}</div><div class="pip-subtitle" ng-if="option.subtitle"><span pip-translate-html="{{::option.subtitle | translate}}"></span></div><div class="pip-text" ng-if="option.text"><span pip-translate-html="{{::option.text | translate}}"></span></div></div></div></div></div><div class="h8"></div></md-dialog-content></md-dialog>')}])}(),function(e){try{e=angular.module("pipBasicControls.Templates")}catch(t){e=angular.module("pipBasicControls.Templates",[])}e.run(["$templateCache",function(e){e.put("date/date.html",'<div class="pip-date" tabindex="-1" layout="row" flex=""><md-input-container flex="" class="tm0"><md-select class="pip-date-day tm0" ng-disabled="disableControls" ng-model="day" placeholder="{{dayLabel}}" ng-change="onDayChanged()" flex=""><md-option ng-value="opt" ng-repeat="opt in days track by opt">{{ opt }}</md-option></md-select></md-input-container><div class="w16 flex-fixed"></div><md-input-container flex="" class="tm0"><md-select class="pip-date-month tm0" ng-disabled="disableControls" ng-model="month" placeholder="{{monthLabel}}" ng-change="onMonthChanged()" flex=""><md-option ng-value="opt.id" ng-repeat="opt in months track by opt.id">{{ opt.name }}</md-option></md-select></md-input-container><div class="w16 flex-fixed"></div><md-input-container flex="" class="tm0"><md-select class="pip-date-year tm0" ng-disabled="disableControls" ng-model="year" placeholder="{{yearLabel}}" ng-change="onYearChanged()" flex=""><md-option ng-value="opt" ng-repeat="opt in years track by opt">{{ opt }}</md-option></md-select></md-input-container></div>')}])}(),function(e){try{e=angular.module("pipBasicControls.Templates")}catch(t){e=angular.module("pipBasicControls.Templates",[])}e.run(["$templateCache",function(e){e.put("date_range/date_range.html",'<div class="pip-date-range" tabindex="-1" layout="row" flex=""><md-input-container flex="" ng-show="isDay()" class="tm0 pip-day"><md-select class="select-day w-stretch" ng-class="{\'pip-no-line\' : pipNoLine}" ng-disable="{{disableControls}}" md-on-open="onDayClick()" ng-model="day" ng-change="onDayChanged()" placeholder="{{dayLabel}}" aria-label="DAY"><md-option ng-value="opt" ng-repeat="opt in days track by opt">{{nameDays[$index]}} {{ opt }}</md-option></md-select></md-input-container><md-input-container flex="" ng-show="isWeek()" class="tm0"><md-select class="select-week w-stretch" ng-class="{\'pip-no-line\' : pipNoLine}" ng-disable="{{disableControls}}" ng-model="week" ng-change="onWeekChange()" placeholder="{{weekLabel}}" aria-label="WEEK"><md-option ng-value="opt.id" ng-repeat="opt in weeks track by opt.id">{{ opt.name }}</md-option></md-select></md-input-container><div class="flex-fixed" ng-class="{\'w16\': $mdMedia(\'gt-xs\'), \'w8\': $mdMedia(\'xs\')}" ng-show="isDay() || isWeek()"></div><md-input-container flex="" ng-show="isMonth() && !monthFormatShort" class="tm0 min-w72"><md-select class="select-month w-stretch" ng-class="{\'pip-no-line\' : pipNoLine}" ng-disable="{{disableControls}}" md-on-open="onMonthClick()" ng-model="month" ng-change="onMonthChanged()" placeholder="{{monthLabel}}" aria-label="MONTH"><md-option ng-value="opt.id" ng-repeat="opt in months track by opt.id">{{ opt.name }}</md-option></md-select></md-input-container><md-input-container flex="" ng-show="isMonth() && monthFormatShort" class="tm0"><md-select class="select-month w-stretch" ng-class="{\'pip-no-line\' : pipNoLine}" ng-disable="{{disableControls}}" md-on-open="onMonthClick()" ng-model="month" ng-change="onMonthChanged()" placeholder="{{monthLabel}}" aria-label="MONTH"><md-option ng-value="opt.id" ng-repeat="opt in shortMonths track by opt.id">{{ opt.name }}</md-option></md-select></md-input-container><div class="flex-fixed" ng-class="{\'w16\': $mdMedia(\'gt-xs\'), \'w8\': $mdMedia(\'xs\')}" ng-show="isMonth()"></div><md-input-container flex="" class="tm0"><md-select class="select-year w-stretch" ng-class="{\'pip-no-line\' : pipNoLine}" ng-disable="{{disableControls}}" md-on-open="onYearClick()" ng-model="year" ng-change="onYearChanged()" placeholder="{{yearLabel}}" aria-label="YEAR"><md-option ng-value="opt" ng-repeat="opt in years track by opt">{{ opt }}</md-option></md-select></md-input-container></div>')}])}(),function(e){try{e=angular.module("pipBasicControls.Templates")}catch(t){e=angular.module("pipBasicControls.Templates",[])}e.run(["$templateCache",function(e){e.put("error_details_dialog/error_details_dialog.html",'<md-dialog class="pip-dialog pip-details-dialog" layout="column" width="400" md-theme="{{theme}}"><div class="pip-body"><div class="pip-header p0 bp8 text-subhead1">{{::\'ERROR_DETAILS\' | translate}}</div><div layout="row" layout-align="start center" class="h48 text-body2 color-secondary-text" ng-if="error.code || (error.data && error.data.code)">{{::\'CODE\' | translate}}</div><div layout="row" layout-align="start center" ng-if="error.code || (error.data && error.data.code)">{{error.code || error.data.code}}</div><div layout="row" layout-align="start center" class="h48 text-body2 color-secondary-text" ng-if="error.path || (error.data && error.data.path)">{{::\'PATH\' | translate}}</div><div layout="row" layout-align="start center" ng-if="error.path || (error.data && error.data.path)">{{error.path || error.data.path}}</div><div layout="row" layout-align="start center" class="h48 text-body2 color-secondary-text" ng-if="error.error || (error.data && error.data.error)">{{::\'ERROR\' | translate}}</div><div layout="row" layout-align="start center" ng-if="error.error || (error.data && error.data.error)">{{error.error || error.data.error}}</div><div layout="row" layout-align="start center" class="h48 text-body2 color-secondary-text" ng-if="error.method || (error.data && error.data.method)">{{::\'METHOD\' | translate}}</div><div layout="row" layout-align="start center" ng-if="error.method || (error.data && error.data.method)">{{error.method || error.data.method}}</div><div layout="row" layout-align="start center" class="h48 text-body2 color-secondary-text" ng-if="error.message || (error.data && error.data.message)">{{::\'MESSAGE\' | translate}}</div><div layout="row" layout-align="start center" ng-if="error.message || (error.data && error.data.message)">{{error.message || error.data.message}}</div></div><div class="pip-footer rp16"><div><md-button class="md-accent m0" ng-click="onOk()">{{::\'DISMISS\' | translate }}</md-button></div></div></md-dialog>')}])}(),function(e){try{e=angular.module("pipBasicControls.Templates")}catch(t){e=angular.module("pipBasicControls.Templates",[])}e.run(["$templateCache",function(e){e.put("information_dialog/information_dialog.html",'<md-dialog class="pip-dialog pip-information-dialog" layout="column" width="400" md-theme="{{theme}}"><div class="pip-header"><h3 class="m0">{{ title | translate }}</h3></div><div class="pip-body"><div class="pip-content">{{ content }}</div></div><div class="pip-footer"><div><md-button class="md-accent" ng-click="onOk()">{{ ok | translate }}</md-button></div></div></md-dialog>')}])}(),function(e){try{e=angular.module("pipBasicControls.Templates")}catch(t){e=angular.module("pipBasicControls.Templates",[])}e.run(["$templateCache",function(e){e.put("options_dialog/options_dialog.html",'<md-dialog class="pip-dialog pip-options-dialog" layout="column" min-width="400" md-theme="{{theme}}"><md-dialog-content class="pip-body lp0 tp0 rp0 bp24 pip-scroll"><div class="pip-header"><h3 class="m0 bm16 text-title">{{::title | translate}}</h3><div ng-show="deletedTitle" class="bp16 tp8 text-subhead1 divider-bottom"><md-checkbox ng-model="deleted" aria-label="CHECKBOX" class="m0">{{::deletedTitle | translate}}</md-checkbox></div></div><div class="pip-content"><md-radio-group ng-model="selectedOptionName" class="pip-list md-primary" md-no-ink="true" ng-keypress="onKeyPress($event)" tabindex="0"><div ng-repeat="option in options" class="pip-list-item p0" md-ink-ripple="" ui-event="{ click: \'onOptionSelect($event, option)\' }" ng-class="{ selected: option.name == selectedOptionName }"><div class="pip-list-item"><md-icon class="pip-option-icon rm12" md-svg-icon="icons:{{option.icon}}" ng-if="option.icon"></md-icon><div class="pip-option-title">{{::option.title | translate}}</div><md-radio-button ng-value="option.name" tabindex="-1" aria-label="{{::option.title | translate}}"></md-radio-button></div></div></md-radio-group></div></md-dialog-content><div class="pip-footer"><div><md-button class="pip-cancel" ng-click="onCancel()">{{::\'CANCEL\' | translate}}</md-button><md-button class="pip-submit md-accent" ng-click="onSelect()">{{::applyButtonTitle | translate}}</md-button></div></div></md-dialog>')}])}(),function(e){try{e=angular.module("pipBasicControls.Templates")}catch(t){e=angular.module("pipBasicControls.Templates",[])}e.run(["$templateCache",function(e){e.put("options_dialog/options_dialog_big.html",'<md-dialog class="pip-dialog pip-options-dialog-big" layout="column" min-width="400" md-theme="{{theme}}"><md-dialog-content class="pip-body p0 pip-scroll" ng-class="{\'bp24\': !noActions}"><div class="pip-header" ng-class="{\'header-hint\': noTitle && hint}"><h3 class="m0 text-title" ng-if="!noTitle">{{::title | translate}}</h3><div ng-show="noTitle && hint" class="dialog-hint" layout="row" layout-align="start center"><div class="w40" flex-fixed=""><md-icon md-svg-icon="icons:info-circle-outline"></md-icon></div><div>{{::hint | translate}}</div></div></div><div class="pip-divider" ng-if="!noTitle"></div><div class="pip-content"><div class="h8" ng-if="noTitle && hint"></div><md-list class="pip-menu pip-ref-list w-stretch" pip-selected="optionIndex" index="{{optionIndex }}" pip-select="onSelected($event)"><md-list-item class="pip-ref-list-item pip-selectable" ng-class="{\'selected\' : option.name == selectedOptionName, \'divider-bottom\': $index != options.length - 1}" layout="row" layout-align="start center" md-ink-ripple="" xxxxng-keypress="onKeyPress($event)" ng-keyup="onKeyUp($event, $index)" ng-repeat="option in options" ng-click="onOptionSelect($event, option)"><div class="pip-content line-height-string max-w100-stretch"><p class="pip-title rp24-flex" ng-if="option.title" style="margin-bottom: 4px !important;">{{::option.title | translate}}</p><div class="pip-subtitle rp24-flex" style="height: inherit" ng-if="option.subtitle">{{::option.subtitle | translate}}</div><div class="pip-subtitle rp24-flex" style="height: inherit" ng-if="option.text" pip-translate-html="{{::option.text | translate}}"></div></div></md-list-item></md-list></div><div class="h8" ng-if="noActions"></div></md-dialog-content><div class="pip-footer" ng-if="!noActions"><div><md-button class="pip-cancel" ng-click="onCancel()">{{::\'CANCEL\' | translate}}</md-button><md-button class="pip-submit md-accent" ng-click="onSelect()" style="margin-right: -6px">{{::applyButtonTitle | translate}}</md-button></div></div></md-dialog>')}])}(),function(e){try{e=angular.module("pipBasicControls.Templates")}catch(t){e=angular.module("pipBasicControls.Templates",[])}e.run(["$templateCache",function(e){e.put("popover/popover.template.html",'<div ng-if="params.templateUrl" class="pip-popover flex layout-column" ng-click="onPopoverClick($event)" ng-include="params.templateUrl"></div><div ng-if="params.template" class="pip-popover" ng-click="onPopoverClick($event)"></div>')}])}(),function(e){try{e=angular.module("pipBasicControls.Templates")}catch(t){e=angular.module("pipBasicControls.Templates",[])}e.run(["$templateCache",function(e){e.put("progress/routing_progress.html",'<div class="pip-routing-progress" layout="column" layout-align="center center" ng-show="$routing || $reset"><div class="loader"><svg class="circular" viewbox="25 25 50 50"><circle class="path" cx="50" cy="50" r="20" fill="none" stroke-width="2" stroke-miterlimit="10"></circle></svg></div><img src="images/Logo_animation.svg" height="40" width="40" class="pip-img"><md-progress-circular md-diameter="96" class="fix-ie"></md-progress-circular></div>')}])}(),function(e){try{e=angular.module("pipBasicControls.Templates")}catch(t){e=angular.module("pipBasicControls.Templates",[])}e.run(["$templateCache",function(e){e.put("tags/tag_list.html",'<div class="pip-chip rm4 pip-type-chip pip-type-chip-left {{\'bg-\' + pipType + \'-chips\'}}" ng-if="pipType && !pipTypeLocal"><span>{{pipType | translate | uppercase}}</span></div><div class="pip-chip rm4 pip-type-chip pip-type-chip-left {{\'bg-\' + pipType + \'-chips\'}}" ng-if="pipType && pipTypeLocal"><span>{{pipTypeLocal | translate | uppercase}}</span></div><div class="pip-chip rm4" ng-repeat="tag in pipTags"><span>{{::tag}}</span></div>')}])}(),function(e){try{e=angular.module("pipBasicControls.Templates")}catch(t){e=angular.module("pipBasicControls.Templates",[])}e.run(["$templateCache",function(e){e.put("time_edit/time_edit.html",'<div layout="row" class="event-edit" layout-xs="column" flex="" layout-align="start start"><div flex="47" class="w-stretch rm24-flex0"><p class="text-caption text-grey tm0">{{startLabel}}</p><div layout="row" layout-align="space-between center"><div class="rm16 pip-datepicker-container" flex="49"><md-datepicker ng-model="data.startDate" xmd-placeholder="{{startLabel}}" ng-change="onChangeStartDate()" ng-disabled="isDisabled()" aria-label="START-DATE"></md-datepicker></div><div flex=""><md-input-container class="w-stretch tm0"><md-select aria-label="START-TIME" class="tm0 bm0" ng-model="data.startTime" ng-disabled="isDisabled()" ng-change="onChangeStartTime()"><md-option ng-value="opt.id" ng-repeat="opt in intervalTimeCollection track by opt.id">{{ opt.time }}</md-option></md-select></md-input-container></div></div></div><div flex="47" class="w-stretch"><p class="text-caption text-grey tm0">{{endLabel}}</p><div layout="row" layout-align="space-between center"><div class="rm16 pip-datepicker-container" flex="49"><md-datepicker ng-model="data.endDate" xmd-placeholder="{{endLabel}}" ng-disabled="isDisabled()" ng-change="onChangeEndDate()" aria-label="END-DATE"></md-datepicker></div><div flex=""><md-input-container class="w-stretch tm0"><md-select aria-label="END-TIME" class="tm0 bm0" ng-model="data.endTime" ng-change="onChangeEndTime()" ng-disabled="isDisabled()"><md-option ng-value="opt.id" ng-repeat="opt in intervalTimeCollection track by opt.id">{{ opt.time }}</md-option></md-select></md-input-container></div></div></div></div>')}])}(),function(e){try{e=angular.module("pipBasicControls.Templates")}catch(t){e=angular.module("pipBasicControls.Templates",[])}e.run(["$templateCache",function(e){e.put("time_view/time_view.html",'<p><span ng-if="data.start != null">{{data.start | formatShortDateTime}}</span> <span class="rm4 lm4" ng-if="data.start && data.end">-</span> <span ng-if="data.end != null">{{data.end | formatShortDateTime}}</span></p>')}])}(),function(e){try{e=angular.module("pipBasicControls.Templates")}catch(t){e=angular.module("pipBasicControls.Templates",[])}e.run(["$templateCache",function(e){e.put("toast/toast.html",'<md-toast class="md-action pip-toast" ng-class="{\'pip-error\': toast.type==\'error\'}" style="height:initial; max-height: initial;"><span class="flex-var m0 pip-text" ng-bind-html="message"></span><div layout="row" layout-align="end start" class="pip-actions"><md-button class="flex-fixed m0 lm8" ng-if="toast.type==\'error\' && toast.error" ng-click="onDetails()">Details</md-button><md-button class="flex-fixed m0 lm8" ng-click="onAction(action)" ng-repeat="action in actions" aria-label="{{::action| translate}}">{{::action| translate}}</md-button></div></md-toast>')}])}(),function(e){try{e=angular.module("pipBasicControls.Templates")}catch(t){e=angular.module("pipBasicControls.Templates",[])}e.run(["$templateCache",function(e){e.put("toggle_buttons/toggle_buttons.html",'<div class="pip-toggle-buttons flex layout-row {{class}}" pip-selected="bufButtonIndex" pip-enter-space-press="enterSpacePress($event)" ng-if="$mdMedia(\'gt-xs\')"><md-button tabindex="-1" ng-repeat="button in buttons" ng-class="{\'md-accent md-raised selected color-accent-bg\' : currentButtonIndex == $index}" ng-attr-style="{{ \'background-color:\' + (currentButtonIndex == $index ? button.backgroundColor : \'\') + \'!important\' }}" class="pip-selectable pip-chip-button flex" ng-click="buttonSelected($index, $event)" ng-disabled="button.disabled || disabled()">{{button.name || button.title | translate}} <span ng-if="button.checked || button.complete || button.filled" class="pip-tagged">*</span></md-button></div><md-input-container class="md-block" ng-if="$mdMedia(\'xs\')"><md-select ng-model="currentButtonIndex" ng-disabled="disabled()" aria-label="DROPDOWN" md-on-close="buttonSelected(currentButtonIndex)"><md-option ng-repeat="action in buttons" value="{{ ::$index }}">{{ (action.title || action.name) | translate }} <span ng-if="action.checked || action.complete || action.filled" class="pip-tagged">*</span></md-option></md-select></md-input-container>')}])}(),function(){"use strict";var e=angular.module("pipColorPicker",["pipUtils","pipFocused","pipBasicControls.Templates"]);e.directive("pipColorPicker",function(){return{restrict:"EA",scope:{ngDisabled:"&",colors:"=pipColors",currentColor:"=ngModel",colorChange:"&ngChange"},templateUrl:"color_picker/color_picker.html",controller:"pipColorPickerController"}}),e.controller("pipColorPickerController",["$scope","$element","$attrs","$timeout",function(e,t,n,a){var i=["purple","lightgreen","green","darkred","pink","yellow","cyan"];e["class"]=n["class"]||"",(!e.colors||_.isArray(e.colors)&&0===e.colors.length)&&(e.colors=i),e.currentColor=e.currentColor||e.colors[0],e.currentColorIndex=e.colors.indexOf(e.currentColor),e.disabled=function(){return e.ngDisabled?e.ngDisabled():!0},e.selectColor=function(t){e.disabled()||(e.currentColorIndex=t,e.currentColor=e.colors[e.currentColorIndex],a(function(){e.$apply()}),e.colorChange&&e.colorChange())},e.enterSpacePress=function(t){e.selectColor(t.index)}}])}(),function(){"use strict";var e=angular.module("pipConfirmationDialog",["ngMaterial","pipUtils","pipTranslate","pipBasicControls.Templates"]);e.config(["pipTranslateProvider",function(e){e.translations("en",{CONFIRM_TITLE:"Confirm"}),e.translations("ru",{CONFIRM_TITLE:"Подтвердите"})}]),e.factory("pipConfirmationDialog",["$mdDialog",function(e){return{show:function(t,n,a){e.show({targetEvent:t.event,templateUrl:"confirmation_dialog/confirmation_dialog.html",controller:"pipConfirmationDialogController",locals:{params:t},clickOutsideToClose:!0}).then(function(){n&&n()},function(){a&&a()})}}}]),e.controller("pipConfirmationDialogController",["$scope","$rootScope","$mdDialog","pipTranslate","params",function(e,t,n,a,i){e.theme=t.$theme,e.title=i.title||"CONFIRM_TITLE",e.ok=i.ok||"OK",e.cancel=i.cancel||"CANCEL",e.onCancel=function(){n.cancel()},e.onOk=function(){n.hide()}}])}(),function(){"use strict";var e=angular.module("pipConversionDialog",["ngMaterial","pipUtils","pipTranslate","pipBasicControls.Templates"]);e.config(["pipTranslateProvider",function(e){e.translations("en",{CONVERT_PARENT_TITLE:"Choose type of the parent record",CONVERT_PARENT_SUBTITLE:"The <b>%s</b> is missing and will be created from scratch. Find and clarify it later",CONVERT_TO_GOAL_SUBTITLE:"Result that requires significant efforts",CONVERT_TO_TASK_SUBTITLE:"Simple work that doesn't need a plan",CONVERT_TO_AREA_SUBTITLE:"Area of interests or actions of any kind",CONVERT_TO_VISION_SUBTITLE:"Situation in specific time period",CONVERT_TO_CANCEL:"Do not create a parent record",CONVERT_TO_CANCEL_SUBTITLE:"The <b>%s</b> is deleted",CONVERT_RECORD_TO_GOAL:"Result that requires significant efforts",CONVERT_RECORD_TO_TASK:"Simple work that doesn't need a pla",CONVERT_RECORD_TO_EVENT:"Reminder or scheduled block of time",CONVERT_RECORD_TO_POST:"Any useful information"}),e.translations("ru",{CONVERT_PARENT_TITLE:"Определите тип родительской записи",CONVERT_PARENT_SUBTITLE:"Запись <b>%s</b> отсутствует и будет создана с нуля. Найдите и скорректируйте ее позже",CONVERT_TO_GOAL_SUBTITLE:"Результат требующий значительных усилий",CONVERT_TO_TASK_SUBTITLE:"Простая работа, для которой не нужен план",CONVERT_TO_AREA_SUBTITLE:"Область интересов или какой-либо активности",CONVERT_TO_VISION_SUBTITLE:"Ситуация в определенный промежуток времени",CONVERT_TO_CANCEL:"Не создавать родительскую запись",CONVERT_TO_CANCEL_SUBTITLE:"<b>%s</b> будет удалена",CONVERT_RECORD_TO_GOAL:"Результат требующий значительных усилий",CONVERT_RECORD_TO_TASK:"Простая работа, для которой не нужен план",CONVERT_RECORD_TO_EVENT:"Напоминание или блок времени в расписании",CONVERT_RECORD_TO_POST:"Любая полезная информация"})}]),e.factory("pipConversionDialog",["$mdDialog",function(e){return{show:function(t,n,a){function i(){t.event&&t.event.currentTarget&&t.event.currentTarget.focus()}t.event&&(t.event.stopPropagation(),t.event.preventDefault()),t.options&&0!=t.options.length&&e.show({targetEvent:t.event,templateUrl:"conversion_dialog/conversion_dialog.html",controller:"pipConversionDialogController",locals:{params:t},clickOutsideToClose:!0}).then(function(e){i(),n&&n(e)},function(){i(),a&&a()})}}}]),e.controller("pipConversionDialogController",["$scope","$rootScope","$mdDialog","params","pipUtils","pipTranslate",function(e,t,n,a,i,o){function l(){var e=$(".pip-conversion-dialog .pip-list");e.focus()}e.theme=t.$theme,e.title=a.title||"CONVERT_PARENT_TITLE",e.recordName=a.recordName||"",e.subtitle=a.subtitle||i.sprintf(o.translate("CONVERT_PARENT_SUBTITLE"),e.recordName),e.withoutTitle=a.deleteTitle?a.deleteTitle:!1,e.deleted=!!a.deleted,e.options=_.cloneDeep(a.options),e.selectedIndex=-1,e.cancelConverting=!!e.recordName,e.selectedOptionName="",e.cancelConverting&&e.options.push({name:"cancel",title:"CONVERT_TO_CANCEL",subtitle:i.sprintf(o.translate("CONVERT_TO_CANCEL_SUBTITLE"),e.recordName)}),e.onOptionSelect=function(t,n){t.stopPropagation(),e.selectedOptionName=n.name,e.onSelect()},e.onKeyPress=function(t){return 32==t.keyCode||13==t.keyCode?(t.stopPropagation(),t.preventDefault(),e.selectedOptionName=-1==e.selectedIndex?e.options[0].name:e.options[e.selectedIndex].name,void e.onSelect()):void 0},e.onKeyDown=function(t){return 40==t.keyCode?(t.stopPropagation(),t.preventDefault(),e.selectedIndex+=1,e.selectedIndex=e.selectedIndex%e.options.length,void(e.selectedOptionName=e.options[e.selectedIndex].name)):38==t.keyCode?(t.stopPropagation(),t.preventDefault(),e.selectedIndex=e.selectedIndex<=0?e.selectedIndex=e.options.length-1:e.selectedIndex-1,void(e.selectedOptionName=e.options[e.selectedIndex].name)):void 0},e.onCancel=function(){n.cancel()},e.onSelect=function(){var t=_.find(e.options,{name:e.selectedOptionName});t&&"cancel"!=t.name?n.hide({option:t,deleted:e.deleted}):n.hide(null)},setTimeout(l,500)}])}(),function(){"use strict";var e=angular.module("pipDate",["pipBasicControls.Templates"]);e.directive("pipDate",["$parse",function(e){return{restrict:"EA",require:"ngModel",scope:{timeMode:"@pipTimeMode",disabled:"&ngDisabled",model:"=ngModel",ngChange:"&"},templateUrl:"date/date.html",controller:"pipDateController"}}]),e.controller("pipDateController",["$scope","$element","pipTranslate",function(e,t,n){function a(e,t){var n=31;4==e||6==e||9==e||11==e?n=30:2==e&&(n=t&&t%4==0?29:28);for(var a=[],i=1;n>=i;i++)a.push(i);return a}function i(){for(var e=[],t=1;12>=t;t++)e.push({id:t,name:n.translate("MONTH_"+t)});return e}function o(){var t=(new Date).getFullYear(),n="future"==e.timeMode?t:t-100,a="past"==e.timeMode?t:t+100,i=[];if("past"==e.timeMode)for(var o=a;o>=n;o--)i.push(o);else for(var o=n;a>=o;o++)i.push(o);return i}function l(){var t=a(e.month,e.year);e.days.length!=t.length&&(e.day>t.length&&(e.day=t.length),e.days=t)}function r(t){t=t?_.isDate(t)?t:new Date(t):null;var n=t?t.getDate():null,i=t?t.getMonth()+1:null,o=t?t.getFullYear():null;e.month!=i&&e.year!=o&&(e.days=a(e.month,e.year)),e.day=n,e.month=i,e.year=o}function s(){if(e.day&&e.month&&e.year){var t=new Date(e.year,e.month-1,e.day,0,0,0,0);e.model=t,e.ngChange()}}e.onDayChanged=function(){s()},e.onMonthChanged=function(){l(),s()},e.onYearChanged=function(){l(),s()};var p=e.model?_.isDate(e.model)?e.model:new Date(e.model):null;e.day=p?p.getDate():null,e.month=p?p.getMonth()+1:null,e.year=p?p.getFullYear():null,e.dayLabel=n.translate("DAY"),e.monthLabel=n.translate("MONTH"),e.yearLabel=n.translate("YEAR"),e.days=a(e.month,e.year),e.months=i(),e.years=o(),e.disableControls=e.disabled?e.disabled():!1,e.$watch("model",function(e,t){r(e)}),e.$watch(e.disabled,function(t){e.disableControls=t})}])}(),function(){"use strict";var e=angular.module("pipDateRange",[]);e.directive("pipDateRange",function(){return{restrict:"EA",require:"ngModel",scope:{timeMode:"@pipTimeMode",disabled:"&ngDisabled",model:"=ngModel",pipChanged:"&",pipDateRangeType:"@",pipDateFormat:"@",pipNoLine:"@"},templateUrl:"date_range/date_range.html",controller:"pipDateRangeController"}}),e.controller("pipDateRangeController",["$scope","$element","pipTranslate","$mdMedia","$rootScope",function(e,t,n,a,i){function o(){E.day=e.day,E.month=e.month,E.year=e.year,E.week=e.week,E.dateRangeType=e.pipDateRangeType,E.model=e.model}function l(){e.days=d(e.month,e.year),e.weeks=m(e.month,e.year),e.months=g(),e.shortMonths=g(!0),e.years=f()}function r(){(!k.model||k.model&&k.model.getTime()>=e.model.getTime())&&e.weeks&&e.weeks[e.week]&&e.weeks[e.week].id<=0&&(e.month<12?e.month+=1:(e.month=1,e.year+=1),l())}function s(){var t=e.model?new Date(e.model):null;e.day=t?t.getUTCDate():null,e.month=t?t.getUTCMonth()+1:null,e.year=t?t.getUTCFullYear():null,e.week=t?c(e.day,e.month-1,e.year):null,l(),"weekly"==e.pipDateRangeType?(r(),v()):h(),C()}function p(e,t){var n=31;return 4==e||6==e||9==e||11==e?n=30:2==e&&(n=t&&t%4==0?29:28),n}function d(t,n){var a=p(t,n);e.nameDays=[];for(var o=[],l=1;a>=l;l++)o.push(l),e.nameDays.push(e.daysWeek[i.$language||"en"][new Date(n,t-1,l).getDay()]);return o}function c(e,t,n){var a,i=new Date(Date.UTC(n,t,e)),o=i.getUTCDay()?i.getUTCDay():7;return a=1==o?e:e+1-o}function u(e,t,n){var a=e+6>t?t-e-6:e+6,i=e>0?e:n+e;return i.toString()+" - "+Math.abs(a).toString()}function m(e,t){var n,a=[],i=p(e,t),o=c(1,e-1,t);for(n=e-1?p(e-1,t):p(12,t-1);i+1>o;)a.push({id:o,name:u(o,i,n)}),o+=7;return a}function g(e){for(var t=[],a=1;12>=a;a++)t.push({id:a,name:n.translate("MONTH_"+a)});return t}function f(){var t,n,a=[];switch(e.timeMode){case"future":t=b,n=b+100;break;case"past":t=b-100,n=b;break;case"now":t=b-50,n=b+100;break;default:t=b-50,n=b+50}if("future"==e.timeMode)for(var i=t;n>=i;i++)a.push(i);else for(var i=n;i>=t;i--)a.push(i);return a}function h(){var t=d(e.month,e.year);switch(e.pipDateRangeType){case"monthly":e.day=1;break;case"yearly":e.month=1,e.day=1;break;default:e.days.length!=t.length&&e.day>t.length&&(e.day=t.length)}e.days=t}function v(){var t=m(e.month,e.year);e.week=c(e.week,e.month-1,e.year),e.weeks=t}function T(t){t=t?new Date(t):null;var n=t?t.getUTCDate():null,a=t?t.getUTCMonth()+1:null,i=t?t.getUTCFullYear():null,o=t?c(n,a-1,i):null;e.day==n&&e.month==a&&e.year==i&&e.week==o||(e.day=n,e.month=a,e.year=i,e.week=o,e.days=d(e.month,e.year),e.weeks=m(e.month,e.year))}function C(){var t;"weekly"==e.pipDateRangeType?(t=new Date(e.year,e.month-1,e.week,0,0,0,0),t=new Date(t.getTime()-6e4*t.getTimezoneOffset()),e.model=t):(t=new Date(e.year,e.month-1,e.day,0,0,0,0),t=new Date(t.getTime()-6e4*t.getTimezoneOffset()),e.model=t),k=_.cloneDeep(E),o(),e.onChange()}var y=new Date,b=y.getUTCFullYear(),D=y.getUTCMonth()+1,w=y.getUTCDate(),k={},E={};e.daysWeek={en:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],ru:["Вс","Пн","Вт","Ср","Чт","Пт","Сб"]},e.onDayChanged=function(){C()},e.onMonthChanged=function(){if("weekly"==e.pipDateRangeType){var t=new Date(Date.UTC(e.year,e.month-1,1)),n=t.getUTCDay()?t.getUTCDay():7;e.week=c(n,e.month-1,e.year),r(),v()}else h();C()},e.onYearChanged=function(){if("weekly"==e.pipDateRangeType){var t=new Date(Date.UTC(e.year,e.month-1,1)),n=t.getUTCDay()?t.getUTCDay():7;e.week=c(n,e.month-1,e.year),v(),r()}else h();C()},e.onWeekChange=function(){"weekly"==e.pipDateRangeType?(v(),r()):h(),C()},e.isDay=function(){return"daily"==e.pipDateRangeType},e.isWeek=function(){return"weekly"==e.pipDateRangeType},e.isMonth=function(){return"daily"==e.pipDateRangeType||"weekly"==e.pipDateRangeType||"monthly"==e.pipDateRangeType},e.onChange=function(){e.pipChanged&&e.pipChanged()},e.$mdMedia=a,s(),e.disableControls=e.disabled?e.disabled():!1,e.$watch("model",function(e,t){e!=t&&T(e)}),e.$watch(e.disabled,function(t){e.disableControls=t}),e.$watch("pipDateRangeType",function(e,t){e!=t&&t&&s()}),e.onYearClick=function(){null==e.year&&(e.year=b)},e.onMonthClick=function(){null==e.month&&(e.month=D)},e.onDayClick=function(){null==e.year&&(e.day=w);
}}])}(),function(){"use strict";var e=angular.module("pipErrorDetailsDialog",["ngMaterial","pipUtils","pipTranslate","pipBasicControls.Templates"]);e.config(["pipTranslateProvider",function(e){e.translations("en",{ERROR_DETAILS:"Error details",CODE:"Code",PATH:"Path",ERROR:"Error code",METHOD:"Method",MESSAGE:"Message"}),e.translations("ru",{ERROR_DETAILS:"Детали ошибки",CODE:"Код",PATH:"Путь",ERROR:"Код ошибки",METHOD:"Метод",MESSAGE:"Сообщение"})}]),e.factory("pipErrorDetailsDialog",["$mdDialog",function(e){return{show:function(t,n,a){e.show({targetEvent:t.event,templateUrl:"error_details_dialog/error_details_dialog.html",controller:"pipErrorDetailsDialogController",locals:{params:t},clickOutsideToClose:!0}).then(function(){n&&n()},function(){a&&a()})}}}]),e.controller("pipErrorDetailsDialogController",["$scope","$rootScope","$mdDialog","pipTranslate","params",function(e,t,n,a,i){e.error=i.error,e.ok=i.ok||"OK",e.cancel=i.cancel||"CANCEL",e.onCancel=function(){n.cancel()},e.onOk=function(){n.hide()}}])}(),function(){"use strict";var e=angular.module("pipImageSlider",[]);e.directive("pipImageSlider",function(){return{scope:!1,controller:["$scope","$element","$attrs","$parse","$timeout","$interval","$pipImageSlider",function(e,t,n,a,i,o,l){function r(){f&&f(e,h)}function s(){g=o(function(){u=h+1==c.length?0:h+1,m="next",y()},C||T)}function p(){o.cancel(g)}function d(){p(),s()}var c,u,m,g,f=a(n.pipImageSliderIndex).assign,h=0,v=a(n.pipAnimationType)(e),T=4500,C=a(n.pipAnimationInterval)(e);t.addClass("pip-image-slider"),t.addClass("pip-animation-"+v),e.swipeStart=0,r(),i(function(){c=t.find(".pip-animation-block"),c.length>0&&$(c[0]).addClass("pip-show")}),s();var y=_.throttle(function(){l.toBlock(v,c,h,u,m),h=u,r()},600);e.nextBlock=function(){d(),u=h+1==c.length?0:h+1,m="next",y()},e.prevBlock=function(){d(),u=0>h-1?c.length-1:h-1,m="prev",y()},e.slideTo=function(e){e==h||e>c.length-1||(d(),u=e,m=e>h?"next":"prev",y())},t.on("$destroy",function(){p()})}]}}),e.directive("pipSliderButton",function(){return{scope:{},controller:["$scope","$element","$parse","$attrs",function(e,t,n,a){var i=n(a.pipButtonType)(e),o=n(a.pipSliderId)(e);t.on("click",function(){o&&i&&angular.element(document.getElementById(o)).scope()[i+"Block"]()})}]}}),e.directive("pipSliderIndicator",function(){return{scope:!1,controller:["$scope","$element","$parse","$attrs",function(e,t,n,a){var i=n(a.pipSliderId)(e),o=n(a.pipSlideTo)(e);t.css("cursor","pointer"),t.on("click",function(){!i||o&&0>o||angular.element(document.getElementById(i)).scope().slideTo(o)})}]}}),e.service("$pipImageSlider",["$timeout",function(e){function t(t,n){t.removeClass("animated").addClass("pip-next"),e(function(){t.addClass("animated").addClass("pip-show").removeClass("pip-next"),n.addClass("animated").removeClass("pip-show")},100)}function n(t,n){t.removeClass("animated"),e(function(){t.addClass("animated").addClass("pip-show"),n.addClass("animated").addClass("pip-next").removeClass("pip-show"),e(function(){n.removeClass("pip-next").removeClass("animated")},i-100)},100)}function a(e,a,i,o,l){var r=$(a[i]),s=o,p=$(a[s]);"carousel"==e?($(a).removeClass("pip-next").removeClass("pip-prev"),l&&"prev"==l?n(p,r):l&&"next"==l?t(p,r):o&&i>o?n(p,r):t(p,r)):(r.addClass("animated").removeClass("pip-show"),p.addClass("animated").addClass("pip-show"))}var i=550;return{nextCarousel:t,prevCarousel:n,toBlock:a}}])}(),function(){"use strict";var e=angular.module("pipInformationDialog",["ngMaterial","pipUtils","pipTranslate","pipBasicControls.Templates"]);e.config(["pipTranslateProvider",function(e){e.translations("en",{INFORMATION_TITLE:"Information"}),e.translations("ru",{INFORMATION_TITLE:"Информация"})}]),e.factory("pipInformationDialog",["$mdDialog","$timeout",function(e,t){return{show:function(t,n){e.show({targetEvent:t.event,templateUrl:"information_dialog/information_dialog.html",controller:"pipInformationDialogController",locals:{params:t},clickOutsideToClose:!0}).then(function(){n&&n()})}}}]),e.controller("pipInformationDialogController",["$scope","$rootScope","$mdDialog","pipTranslate","params","pipUtils",function(e,t,n,a,i,o){e.theme=t.$theme,e.title=i.title||"INFORMATION_TITLE";var l=a.translate(i.message);if(i.item){var r=_.truncate(i.item,25);l=o.sprintf(l,r)}e.content=l,e.ok=i.ok||"OK",e.onOk=function(){n.hide()}}])}(),function(){"use strict";var e=angular.module("pipMarkdown",["ngSanitize","pipUtils","pipTranslate"]);e.config(["pipTranslateProvider",function(e){e.translations("en",{MARKDOWN_ATTACHMENTS:"Attachments:",checklist:"Checklist",documents:"Documents",pictures:"Pictures",location:"Location",time:"Time"}),e.translations("ru",{MARKDOWN_ATTACHMENTS:"Вложения:",checklist:"Список",documents:"Документы",pictures:"Изображения",location:"Местонахождение",time:"Время"})}]),e.directive("pipMarkdown",["$parse","pipUtils","pipTranslate",function(e,t,n){return{restrict:"EA",scope:!1,link:function(a,i,o){function l(e){var t="",a=[];return _.each(e,function(e){e.type&&"text"!=e.type&&(0==t.length&&(t=n.translate("MARKDOWN_ATTACHMENTS")),a.indexOf(e.type)<0&&(a.push(e.type),t+=(a.length>1?", ":" ")+n.translate(e.type)))}),t}function r(e){var t;if(_.isArray(e)){var n=_.find(e,function(e){return"text"==e.type&&e.text});t=n?n.text:l(e)}else t=e;var a,r=o.pipLineCount&&_.isNumber(d())&&t&&t.length>0,s={gfm:!0,tables:!0,breaks:!0,sanitize:!0,pedantic:!0,smartLists:!0,smartypents:!1};t=marked(t||"",s),r&&(a=1.5*d()),i.html("<div"+(r?' class="pip-markdown-content" style="max-height: '+a+'em">':">")+t+"</div>"),i.find("a").attr("target","blank"),!p()&&r&&i.append('<div class="pip-gradient-block"></div>')}var s=e(o.pipText),p=e(o.pipList),d=e(o.pipLineCount);r(s(a)),t.toBoolean(o.pipRebind)&&a.$watch(s,function(e){r(e)}),a.$on("pipWindowResized",function(){r(s(a))}),i.addClass("pip-markdown")}}}])}(),function(){"use strict";var e=angular.module("pipOptionsDialog",["ngMaterial","pipUtils","pipTranslate","pipBasicControls.Templates"]);e.config(["pipTranslateProvider",function(e){e.translations("en",{OPTIONS_TITLE:"Choose Option"}),e.translations("ru",{OPTIONS_TITLE:"Выберите опцию"})}]),e.factory("pipOptionsDialog",["$mdDialog",function(e){return{show:function(t,n,a){function i(){t.event&&t.event.currentTarget&&t.event.currentTarget.focus()}t.event&&(t.event.stopPropagation(),t.event.preventDefault()),e.show({targetEvent:t.event,templateUrl:"options_dialog/options_dialog.html",controller:"pipOptionsDialogController",locals:{params:t},clickOutsideToClose:!0}).then(function(e){i(),n&&n(e)},function(){i(),a&&a()})}}}]),e.controller("pipOptionsDialogController",["$scope","$rootScope","$mdDialog","params",function(e,t,n,a){function i(){var e=$(".pip-options-dialog .pip-list");e.focus()}e.theme=t.$theme,e.title=a.title||"OPTIONS_TITLE",e.options=a.options,e.selectedOption=_.find(a.options,{active:!0})||{},e.selectedOptionName=e.selectedOption.name,e.applyButtonTitle=a.appleButtonTitle||"SELECT",e.deleted=a.deleted,e.deletedTitle=a.deletedTitle,e.onOptionSelect=function(t,n){t.stopPropagation(),e.selectedOptionName=n.name},e.onKeyPress=function(t){32!=t.keyCode&&13!=t.keyCode||(t.stopPropagation(),t.preventDefault(),e.onSelect())},e.onCancel=function(){n.cancel()},e.onSelect=function(){var t=_.find(a.options,{name:e.selectedOptionName});n.hide({option:t,deleted:e.deleted})},setTimeout(i,500)}])}(),function(){"use strict";var e=angular.module("pipOptionsBigDialog",["ngMaterial","pipUtils","pipTranslate","pipBasicControls.Templates"]);e.config(["pipTranslateProvider",function(e){e.translations("en",{OPTIONS_TITLE:"Choose Option"}),e.translations("ru",{OPTIONS_TITLE:"Выберите опцию"})}]),e.factory("pipOptionsBigDialog",["$mdDialog",function(e){return{show:function(t,n,a){function i(){t.event&&t.event.currentTarget&&t.event.currentTarget.focus()}t.event&&(t.event.stopPropagation(),t.event.preventDefault()),e.show({targetEvent:t.event,templateUrl:"options_dialog/options_dialog_big.html",controller:"pipOptionsDialogBigController",locals:{params:t},clickOutsideToClose:!0}).then(function(e){i(),n&&n(e)},function(){i(),a&&a()})}}}]),e.controller("pipOptionsDialogBigController",["$scope","$rootScope","$mdDialog","params",function(e,t,n,a){function i(){var e=$(".pip-options-dialog .pip-list");e.focus()}e.theme=t.$theme,e.title=a.title||"OPTIONS_TITLE",e.options=a.options,e.noActions=a.noActions||!1,e.noTitle=a.noTitle||!1,e.hint=a.hint||"",e.selectedOption=_.find(a.options,{active:!0})||{},e.selectedOptionName=e.selectedOption.name,e.optionIndex=_.findIndex(a.options,e.selectedOption),e.applyButtonTitle=a.applyButtonTitle||"SELECT",e.deleted=a.deleted,e.deletedTitle=a.deletedTitle,e.onOptionSelect=function(t,n){t.stopPropagation(),e.selectedOptionName=n.name,e.noActions&&e.onSelect()},e.onSelected=function(t){e.selectedOptionName=e.options[e.optionIndex].name,e.noActions},e.onKeyUp=function(t,n){32!=t.keyCode&&13!=t.keyCode||(t.stopPropagation(),t.preventDefault(),void 0!=n&&n>-1&&n<e.options.length&&(e.selectedOptionName=e.options[n].name,e.onSelect()))},e.onCancel=function(){n.cancel()},e.onSelect=function(){var t=_.find(e.options,{name:e.selectedOptionName});n.hide({option:t,deleted:e.deleted})},setTimeout(i,500)}])}(),function(){"use strict";var e=angular.module("pipPopover",["pipAssert"]);e.directive("pipPopover",function(){return{restrict:"EA",scope:!0,templateUrl:"popover/popover.template.html",controller:["$scope","$rootScope","$element","$timeout","$compile",function(e,t,n,a,i){function o(){u.addClass("opened"),$(".pip-popover-backdrop").focus(),e.params.timeout&&a(function(){r()},e.params.timeout)}function l(){e.params.cancelCallback&&e.params.cancelCallback(),r()}function r(){u.removeClass("opened"),a(function(){u.remove()},100)}function s(e){e.stopPropagation()}function p(){if(e.params.element){var t=$(e.params.element),n=t.offset(),a=t.width(),i=t.height(),o=$(document).width(),l=$(document).height(),r=u.find(".pip-popover");n&&r.css("max-width",o-(o-n.left)).css("max-height",l-(n.top+i)-32,0).css("left",n.left-r.width()+a/2).css("top",n.top+i+16)}}function d(){if(e.params.calcHeight!==!1){var t=u.find(".pip-popover"),n=t.find(".pip-title"),a=t.find(".pip-footer"),i=t.find(".pip-content"),o=t.height()-n.outerHeight(!0)-a.outerHeight(!0);i.css("max-height",Math.max(o,0)+"px").css("box-sizing","border-box")}}function c(){console.log("resized func"),u.find(".pip-popover").find(".pip-content").css("max-height","100%"),p(),d()}var u=$(".pip-popover-backdrop");u.on("click keydown scroll",l),u.addClass(e.params.responsive!==!1?"pip-responsive":""),a(function(){if(p(),e.params.template){var t=i(e.params.template)(e);n.find(".pip-popover").append(t)}o()}),a(function(){d()},200),e.onPopoverClick=s,e=_.defaults(e,e.$parent),t.$on("pipPopoverResize",c),$(window).resize(c)}]}}),e.service("$pipPopover",["$compile","$rootScope","$timeout",function(e,t,n){function a(n){var a=$("body");if(!(a.find("md-backdrop").length>0)){i();var o,r=t.$new(),n=n&&_.isObject(n)?n:{};r.params=n,r.locals=n.locals,o=e(l)(r),a.append(o)}}function i(){var e=$(".pip-popover-backdrop");e.removeClass("opened"),n(function(){e.remove()},100)}function o(){t.$broadcast("pipPopoverResize")}var l="<div class='pip-popover-backdrop {{ params.class }}' ng-controller='params.controller' tabindex='1'><pip-popover pip-params='params'></pip-popover></div>";return{show:a,hide:i,resize:o}}])}(),function(){"use strict";var e=angular.module("pipRoutingProgress",["ngMaterial"]);e.directive("pipRoutingProgress",function(){return{restrict:"EA",replace:!0,templateUrl:"progress/routing_progress.html"}})}(),function(){"use strict";var e=angular.module("pipRefreshButton",["ngMaterial"]);e.directive("pipRefreshButton",["$parse",function(e){return{restrict:"EA",scope:!1,template:String()+'<md-button class="pip-refresh-button" tabindex="-1" ng-click="onClick($event)" aria-label="REFRESH"><md-icon md-svg-icon="icons:refresh"></md-icon> <span class="pip-refresh-text"></span></md-button>',replace:!1,link:function(t,n,a){function i(){s.hide()}var o=e(a.pipText),l=e(a.pipVisible),r=e(a.pipRefresh),s=n.children(".md-button"),p=s.children(".pip-refresh-text"),d=function(){var e=o(t);p.text(e),s.show();var n=s.width();s.css("margin-left","-"+n/2+"px")};t.onClick=function(e){r(t)},t.$watch(l,function(e){1==e?d():i()}),t.$watch(o,function(e){p.text(e)})}}}])}(),function(){"use strict";var e=angular.module("pipTagList",["pipCore"]);e.directive("pipTagList",["$parse",function(e){return{restrict:"EA",scope:{pipTags:"=",pipType:"=",pipTypeLocal:"="},templateUrl:"tags/tag_list.html",controller:["$scope","$element","$attrs","pipUtils",function(t,n,a,i){var o=e(a.pipTags);n.css("display","block"),t.tags=o(t),i.toBoolean(a.pipRebind)&&t.$watch(o,function(e){t.tags=o(t)}),n.addClass("pip-tag-list")}]}}])}(),function(){"use strict";var e=angular.module("pipTimeEdit",["pipUtils","pipTranslate"]);e.directive("pipTimeEdit",function(){return{restrict:"EA",scope:{pipStartDate:"=",pipChanged:"&",pipEndDate:"=",pipStartLabel:"@",pipEndLabel:"@",disabled:"&ngDisabled",pipSize:"="},templateUrl:"time_edit/time_edit.html",controller:"pipTimeEditController"}}),e.controller("pipTimeEditController",["$scope","$element","$attrs","pipDates","pipTranslate",function(e,t,n,a,i){function o(e){var t=e?new Date(e):null;return t}function l(){if(!e.data.startDate||!e.data.endDate)return null;var t,n;return t=new Date(e.data.startDate.getTime()+60*e.data.startTime*1e3),n=new Date(e.data.endDate.getTime()+60*e.data.endTime*1e3),n-t}function r(){if(!e.data.startDate)return void(e.data.startTime=null);if(!e.data.startTime)if(e.data.endTime)e.data.startTime=0==e.data.endTime?0:e.data.endTime-30;else{var t=new Date;e.data.startTime=30*Math.floor((t.getTime()-a.toStartDay(t))/18e5)}if(!e.data.endDate)return void(e.data.endTime=null);var n,i;n=new Date(e.data.startDate.getTime()+60*e.data.startTime*1e3),e.data.duration?(i=new Date(n.getTime()+e.data.duration),e.data.endDate=a.toStartDay(i),e.data.endTime=30*Math.floor((i.getTime()-e.data.endDate.getTime())/18e5)):(i=new Date(e.data.endDate.getTime()+60*e.data.endTime*1e3),n>=i&&(e.data.endDate=a.toStartDay(new Date(n.getTime()+18e5)),e.data.endTime=(e.data.startTime+30)%1440))}function s(){if(!e.data.endDate)return void(e.data.endTime=null);if(!e.data.endTime)if(e.data.startTime)e.data.endTime=1410==e.data.startTime?1410:e.data.startTime+30;else{var t=new Date;e.data.endTime=30*Math.floor((t.getTime()-a.toStartDay(t))/18e5)}if(!e.data.startDate)return void(e.data.startTime=null);var n,i;n=new Date(e.data.startDate.getTime()+60*e.data.startTime*1e3),i=new Date(e.data.endDate.getTime()+60*e.data.endTime*1e3),n>=i&&(e.data.startDate=a.toStartDay(new Date(i.getTime()-18e5)),e.data.startTime=e.data.endTime%1440==0?1410:e.data.endTime-30),e.data.duration=l()}function p(){if(e.data.bind=!1,e.data.startDate){var t=e.data.startTime?60*e.data.startTime*1e3:0;e.pipStartDate=new Date(e.data.startDate.getTime()+t)}if(e.data.endDate){var t=e.data.endTime?60*e.data.endTime*1e3:0;e.pipEndDate=new Date(e.data.endDate.getTime()+t)}e.data.bind=!0}function d(){var t,n;if(null!==e.pipStartDate&&void 0!==e.pipStartDate){var t=_.isDate(e.pipStartDate)?e.pipStartDate:null;t||(t=o(e.pipStartDate)),e.data.startDate=a.toStartDay(t),e.data.startTime=(new Date(t)-e.data.startDate)/6e4}if(null!==e.pipEndDate&&void 0!==e.pipEndDate){var n=_.isDate(e.pipEndDate)?e.pipEndDate:null;t||(n=o(e.pipEndDate)),e.data.endDate=a.toStartDay(n),e.data.endTime=(new Date(n)-e.data.endDate)/6e4}r(),e.data.duration=l(),p()}function c(){for(var e=[],t=0;24>t;t++)for(var n=0;2>n;n++){var a=30*n;e.push({id:60*t+a,time:_.pad(t.toString(),3,"0").substr(0,2)+":"+_.pad(a.toString(),2,"0")})}return e}function u(){e.data.startDate=null,e.data.startTime=null,e.data.endDate=null,e.data.endTime=null,e.data.duration=null}e.intervalTimeCollection=c(),e.data={},e.startLabel=e.pipStartLabel?i.translate(e.pipStartLabel):i.translate("EVENT_NEW_START_TIME"),e.endLabel=e.pipEndLabel?i.translate(e.pipEndLabel):i.translate("EVENT_NEW_END_TIME"),u(),d(),e.onChangeStartDate=function(){r(),e.data.duration=l(),p(),e.pipChanged()},e.onChangeEndDate=function(){s(),e.data.duration=l(),p(),e.pipChanged()},e.onChangeStartTime=function(){e.data.startDate||(e.data.startDate=a.toStartDay(new Date)),r(),e.data.duration=l(),p(),e.pipChanged()},e.onChangeEndTime=function(){e.data.endDate||(e.data.endDate=a.toStartDay(new Date)),s(),e.data.duration=l(),p(),e.pipChanged()},e.isDisabled=function(){return e.disabled?e.disabled():!1},e.$watchGroup([e.pipStartDate,e.pipEndDate],function(){e.data.bind&&(u(),d())}),e.$watch(e.disabled,function(t){e.disableControls=t}),t.addClass("pip-time-edit")}])}(),function(){"use strict";var e=angular.module("pipTimeView",["pipUtils"]);e.directive("pipTimeView",["pipUtils",function(e){return{restrict:"EA",scope:{pipStartDate:"=",pipEndDate:"="},templateUrl:"time_view/time_view.html",link:function(t,n,a){function i(e){var t=e?new Date(e):null;return t}function o(){null!==t.pipStartDate&&void 0!==t.pipStartDate&&(t.data.start=_.isDate(t.pipStartDate)?t.pipStartDate:i(t.pipStartDate))}function l(){null!==t.pipEndDate&&void 0!==t.pipEndDate&&(t.data.end=_.isDate(t.pipEndDate)?t.pipEndDate:i(t.pipEndDate))}t.data={},t.data.start=null,t.data.end=null,o(),l(),e.toBoolean(a.pipRebind)&&(t.$watch("pipStartDate",function(e){t.data.start=null,o()}),t.$watch("pipEndDate",function(e){t.data.end=null,l()})),n.addClass("pip-time-view")}}}])}(),function(){"use strict";var e=angular.module("pipToasts",["pipTranslate","ngMaterial","pipAssert"]);e.controller("pipToastController",["$scope","$mdToast","toast","pipErrorDetailsDialog","sounds",function(e,t,n,a,i){e.message=n.message,e.actions=n.actions,e.toast=n,console.log(e.toast),e.onDetails=function(n){t.hide(),a.show({error:e.toast.error,ok:"Ok"},function(){console.log("You agreed")},function(){console.log("You disagreed")})},e.onAction=function(e){t.hide({action:e})}}]),e.service("pipToasts",["$rootScope","$mdToast","pipAssert",function(e,t,n){function a(){if(C.length>0){var e=C[0];C.splice(0,1),i(e)}}function i(e){console.log(e),h=e,t.show({templateUrl:"toast/toast.html",hideDelay:e.duration||v,position:"bottom left",controller:"pipToastController",locals:{toast:h,sounds:y}}).then(function(e){h.successCallback&&h.successCallback(e),h=null,a()},function(e){h.cancelCallback&&h.cancelCallback(e),h=null,a()})}function o(e){h&&"error"!=e.type?C.push(e):i(e)}function l(e){var t=[];_.each(C,function(n){n.type&&n.type==e||t.push(n)}),C=_.cloneDeep(t)}function r(e){_.remove(C,{id:e})}function s(e){return _.find(C,{id:e})}function p(e,n,i,o,l){C=_.reject(C,function(e){return"error"==e.type}),h&&"error"==h.type&&(t.cancel(),a())}function d(e){f()}function c(e,t,a,i,l){n.isDef(e,"pipToasts.showNotification: message should be defined"),n.isString(e,"pipToasts.showNotification: message should be a string"),n.isArray(t||[],"pipToasts.showNotification: actions should be an array"),a&&n.isFunction(a,"pipToasts.showNotification: successCallback should be a function"),i&&n.isFunction(i,"pipToasts.showNotification: cancelCallback should be a function"),o({id:l||null,type:"notification",message:e,actions:t||["ok"],successCallback:a,cancelCallback:i,duration:T})}function u(e,t,a,i){n.isDef(e,"pipToasts.showMessage: message should be defined"),n.isString(e,"pipToasts.showMessage: message should be a string"),t&&n.isFunction(t,"pipToasts.showMessage: successCallback should be a function"),a&&n.isFunction(a,"pipToasts.showMessage: cancelCallback should be a function"),o({id:i||null,type:"message",message:e,actions:["ok"],successCallback:t,cancelCallback:a})}function m(e,t,a,i,l){n.isDef(e,"pipToasts.showError: message should be defined"),n.isString(e,"pipToasts.showError: message should be a string"),t&&n.isFunction(t,"pipToasts.showError: successCallback should be a function"),a&&n.isFunction(a,"pipToasts.showError: cancelCallback should be a function"),o({id:i||null,error:l,type:"error",message:e,actions:["ok"],successCallback:t,cancelCallback:a})}function g(){t.cancel(),C=[]}function f(e){e?(n.isString(e,"pipToasts.clearToasts: type should be a string"),l(e)):(t.cancel(),C=[])}var h,v=2e4,T=2e4,C=[],y={};return e.$on("$stateChangeSuccess",p),e.$on("pipSessionClosed",d),{showNotification:c,showMessage:u,showError:m,hideAllToasts:g,clearToasts:f,removeToastsById:r,getToastById:s}}])}(),function(){"use strict";var e=angular.module("pipToggleButtons",["pipBasicControls.Templates"]);e.directive("pipToggleButtons",function(){return{restrict:"EA",scope:{ngDisabled:"&",buttons:"=pipButtons",currentButtonValue:"=ngModel",currentButton:"=?pipButtonObject",change:"&ngChange"},templateUrl:"toggle_buttons/toggle_buttons.html",controller:["$scope","$element","$attrs","$mdMedia","$timeout",function(e,t,n,a,i){e.$mdMedia=a,e["class"]=n["class"]||"",(!e.buttons||_.isArray(e.buttons)&&0===e.buttons.length)&&(e.buttons=[],console.error("PipToggleButtons: attribute pipButtons should take array of buttons"));var o=_.indexOf(e.buttons,_.find(e.buttons,{id:e.currentButtonValue}));e.currentButtonIndex=0>o?0:o,e.currentButton=e.buttons.length>0?e.buttons[e.currentButtonIndex]:e.currentButton,e.buttonSelected=function(t,n){e.disabled()||(e.currentButtonIndex=t,e.currentButton=e.buttons[e.currentButtonIndex],e.currentButtonValue=e.currentButton.id||t,i(function(){e.$apply(),e.change&&e.change()}))},e.enterSpacePress=function(t){e.buttonSelected(t.index)},e.disabled=function(){return e.ngDisabled?e.ngDisabled():void 0}}],link:function(e,t,n){t.on("focusin",function(){t.addClass("focused-container")}).on("focusout",function(){t.removeClass("focused-container")})}}})}();