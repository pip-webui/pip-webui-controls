!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,(e.pip||(e.pip={})).controls=t()}}(function(){return function t(e,i,o){function n(r,a){if(!i[r]){if(!e[r]){var p="function"==typeof require&&require;if(!a&&p)return p(r,!0);if(s)return s(r,!0);var l=new Error("Cannot find module '"+r+"'");throw l.code="MODULE_NOT_FOUND",l}var c=i[r]={exports:{}};e[r][0].call(c.exports,function(t){var i=e[r][1][t];return n(i?i:t)},c,c.exports,t,e,i,o)}return i[r].exports}for(var s="function"==typeof require&&require,r=0;r<o.length;r++)n(o[r]);return n}({1:[function(t,e,i){var o={ngDisabled:"<?ngDisabled",colors:"<pipColors",currentColor:"=ngModel",colorChange:"&?ngChange"},n=(function(){function t(){}return t}(),["purple","lightgreen","green","darkred","pink","yellow","cyan"]),s=function(){function t(t,e,i,o){this.$scope=t,this.$element=e,this.$timeout=o,this.class=i.class||""}return t.prototype.$onChanges=function(t){this.colors=t.colors&&_.isArray(t.colors.currentValue)&&0!==t.colors.currentValue.length?t.colors.currentValue:n,this.currentColor=this.currentColor||this.colors[0],this.currentColorIndex=this.colors.indexOf(this.currentColor),this.ngDisabled=t.ngDisabled.currentValue},t.prototype.selectColor=function(t){var e=this;this.ngDisabled||(this.currentColorIndex=t,this.currentColor=this.colors[this.currentColorIndex],this.$timeout(function(){e.$scope.$apply()}),this.colorChange&&this.colorChange())},t.prototype.enterSpacePress=function(t){this.selectColor(t.index)},t}(),r={bindings:o,templateUrl:"color_picker/ColorPicker.html",controller:s};angular.module("pipColorPicker",["pipControls.Templates"]).component("pipColorPicker",r)},{}],2:[function(t,e,i){var o={ngDisabled:"<?ngDisabled",colors:"<pipColors",currentColor:"=ngModel",colorChange:"&?ngChange"},n=(function(){function t(){}return t}(),["purple","lightgreen","green","darkred","pink","yellow","cyan"]),s=function(){function t(t,e,i,o){this.$scope=t,this.$element=e,this.$timeout=o,this.class=i.class||""}return t.prototype.$onChanges=function(t){this.colors=t.colors&&_.isArray(t.colors.currentValue)&&0!==t.colors.currentValue.length?t.colors.currentValue:n,this.currentColor=this.currentColor||this.colors[0],this.currentColorIndex=this.colors.indexOf(this.currentColor),this.ngDisabled=t.ngDisabled.currentValue},t.prototype.selectColor=function(t){var e=this;this.ngDisabled||(this.currentColorIndex=t,this.currentColor=this.colors[this.currentColorIndex],this.$timeout(function(){e.$scope.$apply()}),this.colorChange&&this.colorChange())},t.prototype.enterSpacePress=function(t){this.selectColor(t.index)},t}(),r={bindings:o,templateUrl:"color_picker/ColorPicker.html",controller:s};angular.module("pipColorPicker",["pipControls.Templates"]).component("pipColorPicker",r)},{}],3:[function(t,e,i){function o(t){var e=t.has("pipTranslate")?t.get("pipTranslate"):null;return function(t){return e?e.translate(t)||t:t}}o.$inject=["$injector"],angular.module("pipControls.Translate",[]).filter("translate",o)},{}],4:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0})},{}],5:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function t(t,e,i,o,n,s,r){var a=this;this.$scope=t,this.$element=e,this.$attrs=i,this.$parse=o,this.$timeout=n,this.$interval=s,this.pipImageSlider=r,this._index=0,this.DEFAULT_INTERVAL=4500,this.swipeStart=0,this._type=this.type(),this._interval=this.interval(),this.slideTo=this.slideToPrivate,e.addClass("pip-image-slider"),e.addClass("pip-animation-"+this._type),this.setIndex(),n(function(){a._blocks=e.find(".pip-animation-block"),a._blocks.length>0&&$(a._blocks[0]).addClass("pip-show")}),this.startInterval(),this._throttled=_.throttle(function(){r.toBlock(a._type,a._blocks,a._index,a._newIndex,a._direction),a._index=a._newIndex,a.setIndex()},700),i.id&&r.registerSlider(i.id,t),t.$on("$destroy",function(){a.stopInterval(),r.removeSlider(i.id)})}return t.$inject=["$scope","$element","$attrs","$parse","$timeout","$interval","pipImageSlider"],t.prototype.nextBlock=function(){this.restartInterval(),this._newIndex=this._index+1===this._blocks.length?0:this._index+1,this._direction="next",this._throttled()},t.prototype.prevBlock=function(){this.restartInterval(),this._newIndex=this._index-1<0?this._blocks.length-1:this._index-1,this._direction="prev",this._throttled()},t.prototype.slideToPrivate=function(t){t===this._index||t>this._blocks.length-1||(this.restartInterval(),this._newIndex=t,this._direction=t>this._index?"next":"prev",this._throttled())},t.prototype.setIndex=function(){this.$attrs.pipImageIndex&&(this.sliderIndex=this._index)},t.prototype.startInterval=function(){var t=this;this._timePromises=this.$interval(function(){t._newIndex=t._index+1===t._blocks.length?0:t._index+1,t._direction="next",t._throttled()},Number(this._interval||this.DEFAULT_INTERVAL))},t.prototype.stopInterval=function(){this.$interval.cancel(this._timePromises)},t.prototype.restartInterval=function(){this.stopInterval(),this.startInterval()},t}(),n=function(){return{scope:{sliderIndex:"=pipImageIndex",type:"&pipAnimationType",interval:"&pipAnimationInterval"},bindToController:!0,controller:o,controllerAs:"vm"}};angular.module("pipImageSlider").directive("pipImageSlider",n)},{}],6:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function t(t){this.$timeout=t,this.ANIMATION_DURATION=550,this._sliders={}}return t.$inject=["$timeout"],t.prototype.registerSlider=function(t,e){this._sliders[t]=e},t.prototype.removeSlider=function(t){delete this._sliders[t]},t.prototype.getSliderScope=function(t){return this._sliders[t]},t.prototype.nextCarousel=function(t,e){t.addClass("pip-next"),this.$timeout(function(){t.addClass("animated").addClass("pip-show").removeClass("pip-next"),e.addClass("animated").removeClass("pip-show")},100)},t.prototype.prevCarousel=function(t,e){this.$timeout(function(){t.addClass("animated").addClass("pip-show"),e.addClass("animated").addClass("pip-next").removeClass("pip-show")},100)},t.prototype.toBlock=function(t,e,i,o,n){var s=$(e[i]),r=o,a=$(e[r]);"carousel"===t?($(e).removeClass("pip-next").removeClass("pip-prev").removeClass("animated"),!n||"prev"!==n&&"next"!==n?o&&o<i?this.prevCarousel(a,s):this.nextCarousel(a,s):"prev"===n?this.prevCarousel(a,s):this.nextCarousel(a,s)):(s.addClass("animated").removeClass("pip-show"),a.addClass("animated").addClass("pip-show"))},t}();angular.module("pipImageSlider.Service",[]).service("pipImageSlider",o)},{}],7:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function t(t,e){var i=this;t.on("click",function(){i.sliderId()&&i.direction()&&e.getSliderScope(i.sliderId()).vm[i.direction()+"Block"]()})}return t.$inject=["$element","pipImageSlider"],t}(),n=function(){return{scope:{direction:"&pipButtonType",sliderId:"&pipSliderId"},controllerAs:"$ctlr",bindToController:!0,controller:o}};angular.module("pipSliderButton",[]).directive("pipSliderButton",n)},{}],8:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function t(t,e){var i=this;t.css("cursor","pointer"),t.on("click",function(){i.sliderId()&&void 0!==i.slideTo()&&e.getSliderScope(i.sliderId()).vm.slideTo(i.slideTo())})}return t.$inject=["$element","pipImageSlider"],t}(),n=function(){return{scope:{slideTo:"&pipSlideTo",sliderId:"&pipSliderId"},controllerAs:"$ctlr",bindToController:!0,controller:o}};angular.module("pipSliderIndicator",[]).directive("pipSliderIndicator",n)},{}],9:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function t(t,e,i,o,n,s,r){var a=this;this.$scope=t,this.$element=e,this.$attrs=i,this.$parse=o,this.$timeout=n,this.$interval=s,this.pipImageSlider=r,this._index=0,this.DEFAULT_INTERVAL=4500,this.swipeStart=0,this._type=this.type(),this._interval=this.interval(),this.slideTo=this.slideToPrivate,e.addClass("pip-image-slider"),e.addClass("pip-animation-"+this._type),this.setIndex(),n(function(){a._blocks=e.find(".pip-animation-block"),a._blocks.length>0&&$(a._blocks[0]).addClass("pip-show")}),this.startInterval(),this._throttled=_.throttle(function(){r.toBlock(a._type,a._blocks,a._index,a._newIndex,a._direction),a._index=a._newIndex,a.setIndex()},700),i.id&&r.registerSlider(i.id,t),t.$on("$destroy",function(){a.stopInterval(),r.removeSlider(i.id)})}return t.$inject=["$scope","$element","$attrs","$parse","$timeout","$interval","pipImageSlider"],t.prototype.nextBlock=function(){this.restartInterval(),this._newIndex=this._index+1===this._blocks.length?0:this._index+1,this._direction="next",this._throttled()},t.prototype.prevBlock=function(){this.restartInterval(),this._newIndex=this._index-1<0?this._blocks.length-1:this._index-1,this._direction="prev",this._throttled()},t.prototype.slideToPrivate=function(t){t===this._index||t>this._blocks.length-1||(this.restartInterval(),this._newIndex=t,this._direction=t>this._index?"next":"prev",this._throttled())},t.prototype.setIndex=function(){this.$attrs.pipImageIndex&&(this.sliderIndex=this._index)},t.prototype.startInterval=function(){var t=this;this._timePromises=this.$interval(function(){t._newIndex=t._index+1===t._blocks.length?0:t._index+1,t._direction="next",t._throttled()},Number(this._interval||this.DEFAULT_INTERVAL))},t.prototype.stopInterval=function(){this.$interval.cancel(this._timePromises)},t.prototype.restartInterval=function(){this.stopInterval(),this.startInterval()},t}(),n=function(){return{scope:{sliderIndex:"=pipImageIndex",type:"&pipAnimationType",interval:"&pipAnimationInterval"},bindToController:!0,controller:o,controllerAs:"vm"}};angular.module("pipImageSlider").directive("pipImageSlider",n)},{}],10:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function t(t){this.$timeout=t,this.ANIMATION_DURATION=550,this._sliders={}}return t.$inject=["$timeout"],t.prototype.registerSlider=function(t,e){this._sliders[t]=e},t.prototype.removeSlider=function(t){delete this._sliders[t]},t.prototype.getSliderScope=function(t){return this._sliders[t]},t.prototype.nextCarousel=function(t,e){t.addClass("pip-next"),this.$timeout(function(){t.addClass("animated").addClass("pip-show").removeClass("pip-next"),e.addClass("animated").removeClass("pip-show")},100)},t.prototype.prevCarousel=function(t,e){this.$timeout(function(){t.addClass("animated").addClass("pip-show"),e.addClass("animated").addClass("pip-next").removeClass("pip-show")},100)},t.prototype.toBlock=function(t,e,i,o,n){var s=$(e[i]),r=o,a=$(e[r]);"carousel"===t?($(e).removeClass("pip-next").removeClass("pip-prev").removeClass("animated"),!n||"prev"!==n&&"next"!==n?o&&o<i?this.prevCarousel(a,s):this.nextCarousel(a,s):"prev"===n?this.prevCarousel(a,s):this.nextCarousel(a,s)):(s.addClass("animated").removeClass("pip-show"),a.addClass("animated").addClass("pip-show"))},t}();angular.module("pipImageSlider.Service",[]).service("pipImageSlider",o)},{}],11:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),angular.module("pipImageSlider",["pipSliderButton","pipSliderIndicator","pipImageSlider.Service"]),t("./ImageSlider"),t("./ImageSliderService"),t("./SliderButton"),t("./SliderIndicator")},{"./ImageSlider":5,"./ImageSliderService":6,"./SliderButton":7,"./SliderIndicator":8}],12:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function t(t,e){var i=this;t.on("click",function(){i.sliderId()&&i.direction()&&e.getSliderScope(i.sliderId()).vm[i.direction()+"Block"]()})}return t.$inject=["$element","pipImageSlider"],t}(),n=function(){return{scope:{direction:"&pipButtonType",sliderId:"&pipSliderId"},controllerAs:"$ctlr",bindToController:!0,controller:o}};angular.module("pipSliderButton",[]).directive("pipSliderButton",n)},{}],13:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function t(t,e){var i=this;t.css("cursor","pointer"),t.on("click",function(){i.sliderId()&&void 0!==i.slideTo()&&e.getSliderScope(i.sliderId()).vm.slideTo(i.slideTo())})}return t.$inject=["$element","pipImageSlider"],t}(),n=function(){return{scope:{slideTo:"&pipSlideTo",sliderId:"&pipSliderId"},controllerAs:"$ctlr",bindToController:!0,controller:o}};angular.module("pipSliderIndicator",[]).directive("pipSliderIndicator",n)},{}],14:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),t("./dependencies/TranslateFilter"),t("./color_picker/ColorPicker"),t("./image_slider"),t("./markdown/Markdown"),t("./popover"),t("./progress/RoutingProgress"),t("./toast"),angular.module("pipControls",["pipMarkdown","pipColorPicker","pipRoutingProgress","pipPopover","pipImageSlider","pipToasts","pipControls.Translate"])},{"./color_picker/ColorPicker":1,"./dependencies/TranslateFilter":3,"./image_slider":11,"./markdown/Markdown":15,"./popover":20,"./progress/RoutingProgress":23,"./toast":28}],15:[function(t,e,i){var o=function(t){var e=t.has("pipTranslate")?t.get("pipTranslate"):null;e&&(e.setTranslations("en",{MARKDOWN_ATTACHMENTS:"Attachments:",checklist:"Checklist",documents:"Documents",pictures:"Pictures",location:"Location",time:"Time"}),e.setTranslations("ru",{MARKDOWN_ATTACHMENTS:"Вложения:",checklist:"Список",documents:"Документы",pictures:"Изображения",location:"Местонахождение",time:"Время"}))};o.$inject=["$injector"];var n={text:"<pipText",isList:"<?pipList",clamp:"<?pipLineCount",rebind:"<?pipRebind"},s=(function(){function t(){}return t}(),function(){function t(t,e,i){this.$scope=t,this.$element=e,this._pipTranslate=i.has("pipTranslate")?i.get("pipTranslate"):null}return t.prototype.$postLink=function(){this.bindText(this.text),this.$scope.$on("pipWindowResized",function(){this.bindText&&this.bindText(this._text(this._$scope))}),this.$element.addClass("pip-markdown")},t.prototype.$onChanges=function(t){var e=t.text.currentValue;this.rebind&&(this.text=e,this.bindText(this.text))},t.prototype.describeAttachments=function(t){var e="",i=[];return _.each(t,function(t){t.type&&"text"!==t.type&&(0===e.length&&this._pipTranslate&&(e=this._pipTranslate.translate("MARKDOWN_ATTACHMENTS")),i.indexOf(t.type)<0&&(i.push(t.type),e+=i.length>1?", ":" ",this._pipTranslate&&(e+=this._pipTranslate.translate(t.type))))}),e},t.prototype.bindText=function(t){var e,i,o,n,s;_.isArray(t)?(s=_.find(t,function(t){return"text"===t.type&&t.text}),e=s?s.text:this.describeAttachments(t)):e=t,i=this.clamp&&_.isNumber(this.clamp),i=i&&e&&e.length>0,n={gfm:!0,tables:!0,breaks:!0,sanitize:!0,pedantic:!0,smartLists:!0,smartypents:!1},e=marked(e||"",n),i&&(o=1.5*Number(this.clamp)),this.$element.html("<div"+(i?this.isList?'class="pip-markdown-content pip-markdown-list" style="max-height: '+o+'em">':' class="pip-markdown-content" style="max-height: '+o+'em">':this.isList?' class="pip-markdown-list">':">")+e+"</div>"),this.$element.find("a").attr("target","blank"),!this.isList&&i&&this.$element.append('<div class="pip-gradient-block"></div>')},t}()),r={controller:s,bindings:n};angular.module("pipMarkdown",["ngSanitize"]).run(o).component("pipMarkdown",r)},{}],16:[function(t,e,i){var o=function(t){var e=t.has("pipTranslate")?t.get("pipTranslate"):null;e&&(e.setTranslations("en",{MARKDOWN_ATTACHMENTS:"Attachments:",checklist:"Checklist",documents:"Documents",pictures:"Pictures",location:"Location",time:"Time"}),e.setTranslations("ru",{MARKDOWN_ATTACHMENTS:"Вложения:",checklist:"Список",documents:"Документы",pictures:"Изображения",location:"Местонахождение",time:"Время"}))};o.$inject=["$injector"];var n={text:"<pipText",isList:"<?pipList",clamp:"<?pipLineCount",rebind:"<?pipRebind"},s=(function(){function t(){}return t}(),function(){function t(t,e,i){this.$scope=t,this.$element=e,this._pipTranslate=i.has("pipTranslate")?i.get("pipTranslate"):null}return t.prototype.$postLink=function(){this.bindText(this.text),this.$scope.$on("pipWindowResized",function(){this.bindText&&this.bindText(this._text(this._$scope))}),this.$element.addClass("pip-markdown")},t.prototype.$onChanges=function(t){var e=t.text.currentValue;this.rebind&&(this.text=e,this.bindText(this.text))},t.prototype.describeAttachments=function(t){var e="",i=[];return _.each(t,function(t){t.type&&"text"!==t.type&&(0===e.length&&this._pipTranslate&&(e=this._pipTranslate.translate("MARKDOWN_ATTACHMENTS")),i.indexOf(t.type)<0&&(i.push(t.type),e+=i.length>1?", ":" ",this._pipTranslate&&(e+=this._pipTranslate.translate(t.type))))}),e},t.prototype.bindText=function(t){var e,i,o,n,s;_.isArray(t)?(s=_.find(t,function(t){return"text"===t.type&&t.text}),e=s?s.text:this.describeAttachments(t)):e=t,i=this.clamp&&_.isNumber(this.clamp),i=i&&e&&e.length>0,n={gfm:!0,tables:!0,breaks:!0,sanitize:!0,pedantic:!0,smartLists:!0,smartypents:!1},e=marked(e||"",n),i&&(o=1.5*Number(this.clamp)),this.$element.html("<div"+(i?this.isList?'class="pip-markdown-content pip-markdown-list" style="max-height: '+o+'em">':' class="pip-markdown-content" style="max-height: '+o+'em">':this.isList?' class="pip-markdown-list">':">")+e+"</div>"),this.$element.find("a").attr("target","blank"),!this.isList&&i&&this.$element.append('<div class="pip-gradient-block"></div>')},t}()),r={controller:s,bindings:n};angular.module("pipMarkdown",["ngSanitize"]).run(o).component("pipMarkdown",r)},{}],17:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0})},{}],18:[function(t,e,i){var o={params:"<pipParams"},n=function(){function t(t,e,i,o,n,s){var r=this;this.$scope=t,this.$timeout=o,this.$compile=n,this.$templateRequest=s,this.backdropElement=$(".pip-popover-backdrop"),this.backdropElement.on("click keydown scroll",function(){r.backdropClick()}),this.backdropElement.addClass(this.params.responsive!==!1?"pip-responsive":""),o(function(){r.position(),angular.extend(t,r.params.locals),r.params.template?(r.content=n(r.params.template)(t),i.find(".pip-popover").append(r.content),r.init()):r.$templateRequest(r.params.templateUrl,!1).then(function(e){r.content=n(e)(t),i.find(".pip-popover").append(r.content),r.init()})}),o(function(){r.calcHeight()},200),e.$on("pipPopoverResize",function(){r.onResize()}),$(window).resize(function(){r.onResize()})}return t.prototype.backdropClick=function(){this.params.cancelCallback&&this.params.cancelCallback(),this.closePopover()},t.prototype.closePopover=function(){var t=this;this.backdropElement.removeClass("opened"),this.$timeout(function(){t.backdropElement.remove()},100)},t.prototype.onPopoverClick=function(t){t.stopPropagation()},t.prototype.init=function(){this.backdropElement.addClass("opened"),$(".pip-popover-backdrop").focus(),this.params.timeout&&this.$timeout(function(){this.closePopover()},this.params.timeout)},t.prototype.position=function(){if(this.params.element){var t=$(this.params.element),e=t.offset(),i=t.width(),o=t.height(),n=$(document).width(),s=$(document).height(),r=this.backdropElement.find(".pip-popover");e&&r.css("max-width",n-(n-e.left)).css("max-height",s-(e.top+o)-32,0).css("left",e.left-r.width()+i/2).css("top",e.top+o+16)}},t.prototype.onResize=function(){this.backdropElement.find(".pip-popover").find(".pip-content").css("max-height","100%"),this.position(),this.calcHeight()},t.prototype.calcHeight=function(){if(this.params.calcHeight!==!1){var t=this.backdropElement.find(".pip-popover"),e=t.find(".pip-title"),i=t.find(".pip-footer"),o=t.find(".pip-content"),n=t.height()-e.outerHeight(!0)-i.outerHeight(!0);o.css("max-height",Math.max(n,0)+"px").css("box-sizing","border-box")}},t}(),s={bindings:o,templateUrl:"popover/Popover.html",controller:n};angular.module("pipPopover").component("pipPopover",s)},{}],19:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function t(t,e,i){this.$compile=t,this.$rootScope=e,this.$timeout=i,this.popoverTemplate="<div class='pip-popover-backdrop {{ params.class }}' ng-controller='params.controller' tabindex='1'> <pip-popover pip-params='params'> </pip-popover> </div>"}return t.$inject=["$compile","$rootScope","$timeout"],t.prototype.show=function(t){var e,i,o,n;e=$("body"),e.find("md-backdrop").length>0||(this.hide(),i=this.$rootScope.$new(),o=t&&_.isObject(t)?t:{},i.params=o,i.locals=o.locals,n=this.$compile(this.popoverTemplate)(i),e.append(n))},t.prototype.hide=function(){var t=$(".pip-popover-backdrop");t.removeClass("opened"),this.$timeout(function(){t.remove()},100)},t.prototype.resize=function(){this.$rootScope.$broadcast("pipPopoverResize")},t}();angular.module("pipPopover.Service",[]).service("pipPopoverService",o)},{}],20:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),angular.module("pipPopover",["pipPopover.Service"]),t("./Popover"),t("./PopoverService")},{"./Popover":18,"./PopoverService":19}],21:[function(t,e,i){var o={params:"<pipParams"},n=function(){function t(t,e,i,o,n,s){var r=this;this.$scope=t,this.$timeout=o,this.$compile=n,this.$templateRequest=s,this.backdropElement=$(".pip-popover-backdrop"),this.backdropElement.on("click keydown scroll",function(){r.backdropClick()}),this.backdropElement.addClass(this.params.responsive!==!1?"pip-responsive":""),o(function(){r.position(),angular.extend(t,r.params.locals),r.params.template?(r.content=n(r.params.template)(t),i.find(".pip-popover").append(r.content),r.init()):r.$templateRequest(r.params.templateUrl,!1).then(function(e){r.content=n(e)(t),i.find(".pip-popover").append(r.content),r.init()})}),o(function(){r.calcHeight()},200),e.$on("pipPopoverResize",function(){r.onResize()}),$(window).resize(function(){r.onResize()})}return t.prototype.backdropClick=function(){this.params.cancelCallback&&this.params.cancelCallback(),this.closePopover()},t.prototype.closePopover=function(){var t=this;this.backdropElement.removeClass("opened"),this.$timeout(function(){t.backdropElement.remove()},100)},t.prototype.onPopoverClick=function(t){t.stopPropagation()},t.prototype.init=function(){this.backdropElement.addClass("opened"),$(".pip-popover-backdrop").focus(),this.params.timeout&&this.$timeout(function(){this.closePopover()},this.params.timeout)},t.prototype.position=function(){if(this.params.element){var t=$(this.params.element),e=t.offset(),i=t.width(),o=t.height(),n=$(document).width(),s=$(document).height(),r=this.backdropElement.find(".pip-popover");e&&r.css("max-width",n-(n-e.left)).css("max-height",s-(e.top+o)-32,0).css("left",e.left-r.width()+i/2).css("top",e.top+o+16)}},t.prototype.onResize=function(){this.backdropElement.find(".pip-popover").find(".pip-content").css("max-height","100%"),this.position(),this.calcHeight()},t.prototype.calcHeight=function(){if(this.params.calcHeight!==!1){var t=this.backdropElement.find(".pip-popover"),e=t.find(".pip-title"),i=t.find(".pip-footer"),o=t.find(".pip-content"),n=t.height()-e.outerHeight(!0)-i.outerHeight(!0);o.css("max-height",Math.max(n,0)+"px").css("box-sizing","border-box")}},t}(),s={bindings:o,templateUrl:"popover/Popover.html",controller:n};angular.module("pipPopover").component("pipPopover",s)},{}],22:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function t(t,e,i){this.$compile=t,this.$rootScope=e,this.$timeout=i,this.popoverTemplate="<div class='pip-popover-backdrop {{ params.class }}' ng-controller='params.controller' tabindex='1'> <pip-popover pip-params='params'> </pip-popover> </div>"}return t.$inject=["$compile","$rootScope","$timeout"],t.prototype.show=function(t){var e,i,o,n;e=$("body"),e.find("md-backdrop").length>0||(this.hide(),i=this.$rootScope.$new(),o=t&&_.isObject(t)?t:{},i.params=o,i.locals=o.locals,n=this.$compile(this.popoverTemplate)(i),e.append(n))},t.prototype.hide=function(){var t=$(".pip-popover-backdrop");t.removeClass("opened"),this.$timeout(function(){t.remove()},100)},t.prototype.resize=function(){this.$rootScope.$broadcast("pipPopoverResize")},t}();angular.module("pipPopover.Service",[]).service("pipPopoverService",o)},{}],23:[function(t,e,i){var o={showProgress:"&",logoUrl:"@"},n=function(){function t(t,e){this.$element=e}return t.prototype.$postLink=function(){this._image=this.$element.find("img"),this.loadProgressImage()},t.prototype.loadProgressImage=function(){this.logoUrl&&this._image.attr("src",this.logoUrl)},t}(),s={bindings:o,templateUrl:"progress/RoutingProgress.html",controller:n};angular.module("pipRoutingProgress",["ngMaterial"]).component("pipRoutingProgress",s)},{}],24:[function(t,e,i){var o={showProgress:"&",logoUrl:"@"},n=function(){function t(t,e){this.$element=e}return t.prototype.$postLink=function(){this._image=this.$element.find("img"),this.loadProgressImage()},t.prototype.loadProgressImage=function(){this.logoUrl&&this._image.attr("src",this.logoUrl)},t}(),s={bindings:o,templateUrl:"progress/RoutingProgress.html",controller:n};angular.module("pipRoutingProgress",["ngMaterial"]).component("pipRoutingProgress",s)},{}],25:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0})},{}],26:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function t(){}return t}();i.Toast=o},{}],27:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function t(t,e,i){this.$mdToast=t,this.toast=e,this._pipErrorDetailsDialog=i.has("pipErrorDetailsDialog")?i.get("pipErrorDetailsDialog"):null,this.message=e.message,this.actions=e.actions,0===e.actions.length?this.actionLenght=0:this.actionLenght=1===e.actions.length?e.actions[0].toString().length:null,this.showDetails=null!=this._pipErrorDetailsDialog}return t.prototype.onDetails=function(){this.$mdToast.hide(),this._pipErrorDetailsDialog&&this._pipErrorDetailsDialog.show({error:this.toast.error,ok:"Ok"},angular.noop,angular.noop)},t.prototype.onAction=function(t){this.$mdToast.hide({action:t,id:this.toast.id,message:this.message})},t}(),n=function(){function t(t,e){var i=this;this.$mdToast=e,this.SHOW_TIMEOUT=2e4,this.SHOW_TIMEOUT_NOTIFICATIONS=2e4,this.toasts=[],this.sounds={},t.$on("$stateChangeSuccess",function(){i.onStateChangeSuccess()}),t.$on("pipSessionClosed",function(){i.onClearToasts()}),t.$on("pipIdentityChanged",function(){i.onClearToasts()})}return t.$inject=["$rootScope","$mdToast"],t.prototype.showNextToast=function(){var t;this.toasts.length>0&&(t=this.toasts[0],this.toasts.splice(0,1),this.showToast(t))},t.prototype.showToast=function(t){var e=this;this.currentToast=t,this.$mdToast.show({templateUrl:"toast/Toast.html",hideDelay:t.duration||this.SHOW_TIMEOUT,position:"bottom left",controller:o,controllerAs:"vm",locals:{toast:this.currentToast,sounds:this.sounds}}).then(function(t){e.showToastOkResult(t)},function(t){e.showToastCancelResult(t)})},t.prototype.showToastCancelResult=function(t){this.currentToast.cancelCallback&&this.currentToast.cancelCallback(t),this.currentToast=null,this.showNextToast()},t.prototype.showToastOkResult=function(t){this.currentToast.successCallback&&this.currentToast.successCallback(t),this.currentToast=null,this.showNextToast()},t.prototype.addToast=function(t){this.currentToast&&"error"!==t.type?this.toasts.push(t):this.showToast(t)},t.prototype.removeToasts=function(t){var e=[];_.each(this.toasts,function(i){i.type&&i.type===t||e.push(i)}),this.toasts=_.cloneDeep(e)},t.prototype.removeToastsById=function(t){_.remove(this.toasts,{id:t})},t.prototype.getToastById=function(t){return _.find(this.toasts,{id:t})},t.prototype.onStateChangeSuccess=function(){},t.prototype.onClearToasts=function(){this.clearToasts(null)},t.prototype.showNotification=function(t,e,i,o,n){this.addToast({id:n||null,type:"notification",message:t,actions:e||["ok"],successCallback:i,cancelCallback:o,duration:this.SHOW_TIMEOUT_NOTIFICATIONS})},t.prototype.showMessage=function(t,e,i,o){this.addToast({id:o||null,type:"message",message:t,actions:["ok"],successCallback:e,cancelCallback:i})},t.prototype.showError=function(t,e,i,o,n){this.addToast({id:o||null,error:n,type:"error",message:t||"Unknown error.",actions:["ok"],successCallback:e,cancelCallback:i})},t.prototype.hideAllToasts=function(){this.$mdToast.cancel(),this.toasts=[]},t.prototype.clearToasts=function(t){t?this.removeToasts(t):(this.$mdToast.cancel(),this.toasts=[])},t}();angular.module("pipToasts").service("pipToasts",n)},{}],28:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),angular.module("pipToasts",["ngMaterial","pipControls.Translate"]),t("./ToastService"),t("./Toast")},{"./Toast":26,"./ToastService":27}],29:[function(t,e,i){!function(t){try{t=angular.module("pipControls.Templates")}catch(e){t=angular.module("pipControls.Templates",[])}t.run(["$templateCache",function(t){t.put("color_picker/colorPicker.html",'<ul class="pip-color-picker {{$ctrl.class}}" pip-selected="$ctrl.currentColorIndex" pip-enter-space-press="$ctrl.enterSpacePress($event)"><li tabindex="-1" ng-repeat="color in $ctrl.colors track by color"><md-button tabindex="-1" class="md-icon-button pip-selectable" ng-click="$ctrl.selectColor($index)" aria-label="color" ng-disabled="$ctrl.ngDisabled"><md-icon ng-style="{\'color\': color}" md-svg-icon="icons:{{ color == $ctrl.currentColor ? \'circle\' : \'radio-off\' }}"></md-icon></md-button></li></ul>')}])}(),function(t){try{t=angular.module("pipControls.Templates")}catch(e){t=angular.module("pipControls.Templates",[])}t.run(["$templateCache",function(t){t.put("popover/popover.html",'<div class="pip-popover" ng-click="$ctrl.params.onPopoverClick($event)"></div>')}])}(),function(t){try{t=angular.module("pipControls.Templates")}catch(e){t=angular.module("pipControls.Templates",[])}t.run(["$templateCache",function(t){t.put("progress/routingProgress.html",'<div class="layout-column layout-align-center-center" ng-show="$ctrl.showProgress()"><div class="loader"><svg class="circular" viewbox="25 25 50 50"><circle class="path" cx="50" cy="50" r="20" fill="none" stroke-width="2" stroke-miterlimit="10"></circle></svg></div><img src="" height="40" width="40" class="pip-img"><md-progress-circular md-diameter="96" class="fix-ie"></md-progress-circular></div>')}])}(),function(t){try{t=angular.module("pipControls.Templates")}catch(e){t=angular.module("pipControls.Templates",[])}t.run(["$templateCache",function(t){t.put("toast/toast.html",'<md-toast class="md-action pip-toast" ng-class="{\'pip-error\': vm.toast.type==\'error\', \'pip-column-toast\': vm.toast.actions.length > 1 || vm.actionLenght > 4, \'pip-no-action-toast\': vm.actionLenght == 0}" style="height:initial; max-height: initial;"><span class="flex-var pip-text" ng-bind-html="vm.message"></span><div class="layout-row layout-align-end-start pip-actions" ng-if="vm.actions.length > 0 || (vm.toast.type==\'error\' && vm.toast.error)"><div class="flex" ng-if="vm.toast.actions.length > 1"></div><md-button class="flex-fixed pip-toast-button" ng-if="vm.toast.type==\'error\' && vm.toast.error && vm.showDetails" ng-click="vm.onDetails()">Details</md-button><md-button class="flex-fixed pip-toast-button" ng-click="vm.onAction(action)" ng-repeat="action in vm.actions" aria-label="{{::action| translate}}">{{::action| translate}}</md-button></div></md-toast>')}])}()},{}]},{},[29,2,3,4,9,10,11,12,13,14,16,20,17,21,22,24,28,25,26,27])(29)});
//# sourceMappingURL=pip-webui-controls.min.js.map
