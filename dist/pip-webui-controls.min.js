!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var n;n="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,(n.pip||(n.pip={})).controls=e()}}(function(){return function e(n,t,o){function i(a,s){if(!t[a]){if(!n[a]){var l="function"==typeof require&&require;if(!s&&l)return l(a,!0);if(r)return r(a,!0);var p=new Error("Cannot find module '"+a+"'");throw p.code="MODULE_NOT_FOUND",p}var c=t[a]={exports:{}};n[a][0].call(c.exports,function(e){var t=n[a][1][e];return i(t?t:e)},c,c.exports,e,n,t,o)}return t[a].exports}for(var r="function"==typeof require&&require,a=0;a<o.length;a++)i(o[a]);return i}({1:[function(e,n,t){!function(){"use strict";var e=angular.module("pipColorPicker",["pipControls.Templates"]);e.directive("pipColorPicker",function(){return{restrict:"EA",scope:{ngDisabled:"&",colors:"=pipColors",currentColor:"=ngModel",colorChange:"&ngChange"},templateUrl:"color_picker/color_picker.html",controller:"pipColorPickerController"}}),e.controller("pipColorPickerController",["$scope","$element","$attrs","$timeout",function(e,n,t,o){var i=["purple","lightgreen","green","darkred","pink","yellow","cyan"];e.class=t.class||"",(!e.colors||_.isArray(e.colors)&&0===e.colors.length)&&(e.colors=i),e.currentColor=e.currentColor||e.colors[0],e.currentColorIndex=e.colors.indexOf(e.currentColor),e.disabled=function(){return!e.ngDisabled||e.ngDisabled()},e.selectColor=function(n){e.disabled()||(e.currentColorIndex=n,e.currentColor=e.colors[e.currentColorIndex],o(function(){e.$apply()}),e.colorChange&&e.colorChange())},e.enterSpacePress=function(n){e.selectColor(n.index)}}])}()},{}],2:[function(e,n,t){!function(){"use strict";angular.module("pipControls",["pipMarkdown","pipColorPicker","pipRoutingProgress","pipPopover","pipImageSlider","pipToasts","pipControls.Translate"])}()},{}],3:[function(e,n,t){!function(){"use strict";var e=angular.module("pipControls.Translate",[]);e.filter("translate",["$injector",function(e){var n=e.has("pipTranslate")?e.get("pipTranslate"):null;return function(e){return n?n.translate(e)||e:e}}])}()},{}],4:[function(e,n,t){!function(){"use strict";var e=angular.module("pipImageSlider",["pipSliderButton","pipSliderIndicator","pipImageSlider.Service"]);e.directive("pipImageSlider",function(){return{scope:{sliderIndex:"=pipImageIndex"},controller:["$scope","$element","$attrs","$parse","$timeout","$interval","$pipImageSlider",function(e,n,t,o,i,r,a){function s(){t.pipImageIndex&&(e.sliderIndex=v)}function l(){m=r(function(){d=v+1===u.length?0:v+1,f="next",g()},k||C)}function p(){r.cancel(m)}function c(){p(),l()}var u,d,f,m,g,v=0,h=o(t.pipAnimationType)(e),C=4500,k=o(t.pipAnimationInterval)(e);n.addClass("pip-image-slider"),n.addClass("pip-animation-"+h),e.swipeStart=0,s(),i(function(){u=n.find(".pip-animation-block"),u.length>0&&$(u[0]).addClass("pip-show")}),l(),g=_.throttle(function(){a.toBlock(h,u,v,d,f),v=d,s()},700),e.nextBlock=function(){c(),d=v+1===u.length?0:v+1,f="next",g()},e.prevBlock=function(){c(),d=v-1<0?u.length-1:v-1,f="prev",g()},e.slideTo=function(e){e===v||e>u.length-1||(c(),d=e,f=e>v?"next":"prev",g())},t.id&&a.registerSlider(t.id,e),n.on("$destroy",function(){p(),a.removeSlider(t.id)})}]}})}()},{}],5:[function(e,n,t){!function(){"use strict";var e=angular.module("pipImageSlider.Service",[]);e.service("$pipImageSlider",["$timeout",function(e){function n(e,n){s[e]=n}function t(e){delete s[e]}function o(e){return s[e]}function i(n,t){n.addClass("pip-next"),e(function(){n.addClass("animated").addClass("pip-show").removeClass("pip-next"),t.addClass("animated").removeClass("pip-show")},100)}function r(n,t){e(function(){n.addClass("animated").addClass("pip-show"),t.addClass("animated").addClass("pip-next").removeClass("pip-show")},100)}function a(e,n,t,o,a){var s=$(n[t]),l=o,p=$(n[l]);"carousel"===e?($(n).removeClass("pip-next").removeClass("pip-prev").removeClass("animated"),!a||"prev"!==a&&"next"!==a?o&&o<t?r(p,s):i(p,s):"prev"===a?r(p,s):i(p,s)):(s.addClass("animated").removeClass("pip-show"),p.addClass("animated").addClass("pip-show"))}var s={};return{nextCarousel:i,prevCarousel:r,toBlock:a,registerSlider:n,removeSlider:t,getSliderScope:o}}])}()},{}],6:[function(e,n,t){!function(){"use strict";var e=angular.module("pipSliderButton",[]);e.directive("pipSliderButton",function(){return{scope:{},controller:["$scope","$element","$parse","$attrs","$pipImageSlider",function(e,n,t,o,i){var r=t(o.pipButtonType)(e),a=t(o.pipSliderId)(e);n.on("click",function(){a&&r&&i.getSliderScope(a)[r+"Block"]()})}]}})}()},{}],7:[function(e,n,t){!function(){"use strict";var e=angular.module("pipSliderIndicator",[]);e.directive("pipSliderIndicator",function(){return{scope:!1,controller:["$scope","$element","$parse","$attrs","$pipImageSlider",function(e,n,t,o,i){var r=t(o.pipSliderId)(e),a=t(o.pipSlideTo)(e);n.css("cursor","pointer"),n.on("click",function(){!r||a&&a<0||i.getSliderScope(r).slideTo(a)})}]}})}()},{}],8:[function(e,n,t){!function(){"use strict";var e=angular.module("pipMarkdown",["ngSanitize"]);e.run(["$injector",function(e){var n=e.has("pipTranslate")?e.get("pipTranslate"):null;n&&(n.setTranslations("en",{MARKDOWN_ATTACHMENTS:"Attachments:",checklist:"Checklist",documents:"Documents",pictures:"Pictures",location:"Location",time:"Time"}),n.setTranslations("ru",{MARKDOWN_ATTACHMENTS:"Вложения:",checklist:"Список",documents:"Документы",pictures:"Изображения",location:"Местонахождение",time:"Время"}))}]),e.directive("pipMarkdown",["$parse","$injector",function(e,n){var t=n.has("pipTranslate")?n.get("pipTranslate"):null;return{restrict:"EA",scope:!1,link:function(n,o,i){function r(e){var n="",o=[];return _.each(e,function(e){e.type&&"text"!==e.type&&(0===n.length&&t&&(n=t.translate("MARKDOWN_ATTACHMENTS")),o.indexOf(e.type)<0&&(o.push(e.type),n+=o.length>1?", ":" ",t&&(n+=t.translate(e.type))))}),n}function a(e){return null!=e&&(!!e&&(e=e.toString().toLowerCase(),"1"==e||"true"==e))}function s(e){var n,t,a,s,l;_.isArray(e)?(l=_.find(e,function(e){return"text"===e.type&&e.text}),n=l?l.text:r(e)):n=e,t=i.pipLineCount&&_.isNumber(c()),t=t&&n&&n.length>0,s={gfm:!0,tables:!0,breaks:!0,sanitize:!0,pedantic:!0,smartLists:!0,smartypents:!1},n=marked(n||"",s),t&&(a=1.5*c()),o.html("<div"+(t?p()?'class="pip-markdown-content pip-markdown-list" style="max-height: '+a+'em">':' class="pip-markdown-content" style="max-height: '+a+'em">':p()?' class="pip-markdown-list">':">")+n+"</div>"),o.find("a").attr("target","blank"),!p()&&t&&o.append('<div class="pip-gradient-block"></div>')}var l=e(i.pipText),p=e(i.pipList),c=e(i.pipLineCount);s(l(n)),a(i.pipRebind)&&n.$watch(l,function(e){s(e)}),n.$on("pipWindowResized",function(){s(l(n))}),o.addClass("pip-markdown")}}}])}()},{}],9:[function(e,n,t){!function(){"use strict";var e=angular.module("pipPopover",["pipPopover.Service"]);e.directive("pipPopover",function(){return{restrict:"EA",scope:!0,templateUrl:"popover/popover.html",controller:["$scope","$rootScope","$element","$timeout","$compile",function(e,n,t,o,i){function r(){d.addClass("opened"),$(".pip-popover-backdrop").focus(),e.params.timeout&&o(function(){s()},e.params.timeout)}function a(){e.params.cancelCallback&&e.params.cancelCallback(),s()}function s(){d.removeClass("opened"),o(function(){d.remove()},100)}function l(e){e.stopPropagation()}function p(){if(e.params.element){var n=$(e.params.element),t=n.offset(),o=n.width(),i=n.height(),r=$(document).width(),a=$(document).height(),s=d.find(".pip-popover");t&&s.css("max-width",r-(r-t.left)).css("max-height",a-(t.top+i)-32,0).css("left",t.left-s.width()+o/2).css("top",t.top+i+16)}}function c(){if(e.params.calcHeight!==!1){var n=d.find(".pip-popover"),t=n.find(".pip-title"),o=n.find(".pip-footer"),i=n.find(".pip-content"),r=n.height()-t.outerHeight(!0)-o.outerHeight(!0);i.css("max-height",Math.max(r,0)+"px").css("box-sizing","border-box")}}function u(){d.find(".pip-popover").find(".pip-content").css("max-height","100%"),p(),c()}var d,f;d=$(".pip-popover-backdrop"),d.on("click keydown scroll",a),d.addClass(e.params.responsive!==!1?"pip-responsive":""),o(function(){p(),e.params.template&&(f=i(e.params.template)(e),t.find(".pip-popover").append(f)),r()}),o(function(){c()},200),e.onPopoverClick=l,e=_.defaults(e,e.$parent),n.$on("pipPopoverResize",u),$(window).resize(u)}]}})}()},{}],10:[function(e,n,t){!function(){"use strict";var e=angular.module("pipPopover.Service",[]);e.service("pipPopoverService",["$compile","$rootScope","$timeout",function(e,n,t){function o(t){var o,r,s,l;o=$("body"),o.find("md-backdrop").length>0||(i(),r=n.$new(),s=t&&_.isObject(t)?t:{},r.params=s,r.locals=s.locals,l=e(a)(r),o.append(l))}function i(){var e=$(".pip-popover-backdrop");e.removeClass("opened"),t(function(){e.remove()},100)}function r(){n.$broadcast("pipPopoverResize")}var a;return a="<div class='pip-popover-backdrop {{ params.class }}' ng-controller='params.controller' tabindex='1'> <pip-popover pip-params='params'> </pip-popover> </div>",{show:o,hide:i,resize:r}}])}()},{}],11:[function(e,n,t){!function(){"use strict";var e=angular.module("pipRoutingProgress",["ngMaterial"]);e.directive("pipRoutingProgress",function(){return{restrict:"EA",replace:!0,scope:{showProgress:"&",logoUrl:"@"},templateUrl:"progress/routing_progress.html",controller:"pipRoutingProgressController"}}),e.controller("pipRoutingProgressController",["$scope","$element","$attrs",function(e,n,t){function o(){e.logoUrl&&i.attr("src",e.logoUrl)}var i=n.children("img");o()}])}()},{}],12:[function(e,n,t){!function(){"use strict";var e=angular.module("pipToasts",["ngMaterial","pipControls.Translate"]);e.controller("pipToastController",["$scope","$mdToast","toast","$injector",function(e,n,t,o){var i=o.has("pipErrorDetailsDialog")?o.get("pipErrorDetailsDialog"):null;e.message=t.message,e.actions=t.actions,e.toast=t,0===t.actions.length?e.actionLenght=0:1===t.actions.length?e.actionLenght=t.actions[0].toString().length:e.actionLenght=null,e.showDetails=null!=i,e.onDetails=function(){n.hide(),i&&i.show({error:e.toast.error,ok:"Ok"},angular.noop,angular.noop)},e.onAction=function(e){n.hide({action:e,id:t.id,message:t.message})}}]),e.service("pipToasts",["$rootScope","$mdToast",function(e,n){function t(){var e;C.length>0&&(e=C[0],C.splice(0,1),o(e))}function o(e){g=e,n.show({templateUrl:"toast/toast.html",hideDelay:e.duration||v,position:"bottom left",controller:"pipToastController",locals:{toast:g,sounds:$}}).then(function(e){g.successCallback&&g.successCallback(e),g=null,t()},function(e){g.cancelCallback&&g.cancelCallback(e),g=null,t()})}function i(e){g&&"error"!==e.type?C.push(e):o(e)}function r(e){var n=[];_.each(C,function(t){t.type&&t.type===e||n.push(t)}),C=_.cloneDeep(n)}function a(e){_.remove(C,{id:e})}function s(e){return _.find(C,{id:e})}function l(){C=_.reject(C,function(e){return"error"===e.type}),g&&"error"===g.type&&(n.cancel(),t())}function p(){m()}function c(e,n,t,o,r){i({id:r||null,type:"notification",message:e,actions:n||["ok"],successCallback:t,cancelCallback:o,duration:h})}function u(e,n,t,o){i({id:o||null,type:"message",message:e,actions:["ok"],successCallback:n,cancelCallback:t})}function d(e,n,t,o,r){i({id:o||null,error:r,type:"error",message:e,actions:["ok"],successCallback:n,cancelCallback:t})}function f(){n.cancel(),C=[]}function m(e){e?r(e):(n.cancel(),C=[])}var g,v=2e4,h=2e4,C=[],$={};return e.$on("$stateChangeSuccess",l),e.$on("pipSessionClosed",p),e.$on("pipIdentityChanged",p),{showNotification:c,showMessage:u,showError:d,hideAllToasts:f,clearToasts:m,removeToastsById:a,getToastById:s}}])}()},{}],13:[function(e,n,t){!function(e){try{e=angular.module("pipControls.Templates")}catch(n){e=angular.module("pipControls.Templates",[])}e.run(["$templateCache",function(e){e.put("color_picker/color_picker.html",'<ul class="pip-color-picker {{class}}" pip-selected="currentColorIndex" pip-enter-space-press="enterSpacePress($event)">\n    <li tabindex="-1" ng-repeat="color in colors track by color">\n        <md-button  tabindex="-1" class="md-icon-button pip-selectable" ng-click="selectColor($index)" aria-label="color" ng-disabled="disabled()">\n            <md-icon ng-style="{\'color\': color}" md-svg-icon="icons:{{ color == currentColor ? \'circle\' : \'radio-off\' }}">\n            </md-icon>\n        </md-button>\n    </li>\n</ul>\n')}])}(),function(e){try{e=angular.module("pipControls.Templates")}catch(n){e=angular.module("pipControls.Templates",[])}e.run(["$templateCache",function(e){e.put("popover/popover.html",'<div ng-if="params.templateUrl" class=\'pip-popover flex layout-column\'\n     ng-click="onPopoverClick($event)" ng-include="params.templateUrl">\n</div>\n\n<div ng-if="params.template" class=\'pip-popover\' ng-click="onPopoverClick($event)">\n</div>\n')}])}(),function(e){try{e=angular.module("pipControls.Templates")}catch(n){e=angular.module("pipControls.Templates",[])}e.run(["$templateCache",function(e){e.put("progress/routing_progress.html",'<div class="pip-routing-progress layout-column layout-align-center-center"\n        ng-show="showProgress()">\n     <!--ng-show="$routing || $reset || toolInitialized">-->\n    <div class="loader">\n        <svg class="circular" viewBox="25 25 50 50">\n            <circle class="path" cx="50" cy="50" r="20" fill="none" stroke-width="2" stroke-miterlimit="10"/>\n        </svg>\n    </div>\n\n    <img src=""  height="40" width="40" class="pip-img">\n\n    <md-progress-circular md-diameter="96"\n                          class="fix-ie"></md-progress-circular>\n\n</div>\n')}])}(),function(e){try{e=angular.module("pipControls.Templates")}catch(n){e=angular.module("pipControls.Templates",[])}e.run(["$templateCache",function(e){e.put("toast/toast.html","<md-toast class=\"md-action pip-toast\"\n          ng-class=\"{'pip-error': toast.type=='error',\n          'pip-column-toast': toast.type == 'error' || toast.actions.length > 1 || actionLenght > 4,\n          'pip-no-action-toast': actionLenght == 0}\"\n          style=\"height:initial; max-height: initial; \">\n\n"+'    <span class="flex-var pip-text" ng-bind-html="message"></span>\n    <div class="layout-row layout-align-end-start" class="pip-actions" ng-if="actions.length > 0 || (toast.type==\'error\' && toast.error)">\n        <md-button class="flex-fixed pip-toast-button" ng-if="toast.type==\'error\' && toast.error && showDetails" ng-click="onDetails()">Details</md-button>\n        <md-button class="flex-fixed pip-toast-button"\n                   ng-click="onAction(action)"\n                   ng-repeat="action in actions"\n                   aria-label="{{::action| translate}}">\n            {{::action| translate}}\n        </md-button>\n    </div>\n\n</md-toast>')}])}()},{}]},{},[1,2,3,5,4,6,7,8,10,9,11,12,13])(13)});
//# sourceMappingURL=pip-webui-controls.min.js.map
