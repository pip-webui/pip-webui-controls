!function(e){try{e=angular.module("pipControls.Templates")}catch(t){e=angular.module("pipControls.Templates",[])}e.run(["$templateCache",function(e){e.put("color_picker/color_picker.html",'<ul class="pip-color-picker {{class}}" pip-selected="currentColorIndex" pip-enter-space-press="enterSpacePress($event)"><li tabindex="-1" ng-repeat="color in colors track by color"><md-button tabindex="-1" class="md-icon-button pip-selectable" ng-click="selectColor($index)" aria-label="color" ng-disabled="disabled()"><md-icon ng-style="{\'color\': color}" md-svg-icon="icons:{{ color == currentColor ? \'circle\' : \'radio-off\' }}"></md-icon></md-button></li></ul>')}])}(),function(e){try{e=angular.module("pipControls.Templates")}catch(t){e=angular.module("pipControls.Templates",[])}e.run(["$templateCache",function(e){e.put("popover/popover.html",'<div ng-if="params.templateUrl" class="pip-popover flex layout-column" ng-click="onPopoverClick($event)" ng-include="params.templateUrl"></div><div ng-if="params.template" class="pip-popover" ng-click="onPopoverClick($event)"></div>')}])}(),function(e){try{e=angular.module("pipControls.Templates")}catch(t){e=angular.module("pipControls.Templates",[])}e.run(["$templateCache",function(e){e.put("progress/routing_progress.html",'<div class="pip-routing-progress layout-column layout-align-center-center" ng-show="showProgress()"><div class="loader"><svg class="circular" viewbox="25 25 50 50"><circle class="path" cx="50" cy="50" r="20" fill="none" stroke-width="2" stroke-miterlimit="10"></circle></svg></div><img src="" height="40" width="40" class="pip-img"><md-progress-circular md-diameter="96" class="fix-ie"></md-progress-circular></div>')}])}(),function(e){try{e=angular.module("pipControls.Templates")}catch(t){e=angular.module("pipControls.Templates",[])}e.run(["$templateCache",function(e){e.put("toast/toast.html",'<md-toast class="md-action pip-toast" ng-class="{\'pip-error\': toast.type==\'error\', \'pip-column-toast\': toast.type == \'error\' || toast.actions.length > 1 || actionLenght > 4, \'pip-no-action-toast\': actionLenght == 0}" style="height:initial; max-height: initial;"><span class="flex-var pip-text" ng-bind-html="message"></span><div class="layout-row layout-align-end-start" ng-if="actions.length > 0 || (toast.type==\'error\' && toast.error)"><md-button class="flex-fixed pip-toast-button" ng-if="toast.type==\'error\' && toast.error && showDetails" ng-click="onDetails()">Details</md-button><md-button class="flex-fixed pip-toast-button" ng-click="onAction(action)" ng-repeat="action in actions" aria-label="{{::action| translate}}">{{::action| translate}}</md-button></div></md-toast>')}])}(),function(){"use strict";angular.module("pipControls",["pipMarkdown","pipColorPicker","pipRoutingProgress","pipPopover","pipImageSlider","pipToasts","pipUnsavedChanges","pipControls.Translate","pipDraggable"])}(),function(){"use strict";var e=angular.module("pipColorPicker",["pipControls.Templates"]);e.directive("pipColorPicker",function(){return{restrict:"EA",scope:{ngDisabled:"&",colors:"=pipColors",currentColor:"=ngModel",colorChange:"&ngChange"},templateUrl:"color_picker/color_picker.html",controller:"pipColorPickerController"}}),e.controller("pipColorPickerController",["$scope","$element","$attrs","$timeout",function(e,t,n,o){var i=["purple","lightgreen","green","darkred","pink","yellow","cyan"];e.class=n.class||"",(!e.colors||_.isArray(e.colors)&&0===e.colors.length)&&(e.colors=i),e.currentColor=e.currentColor||e.colors[0],e.currentColorIndex=e.colors.indexOf(e.currentColor),e.disabled=function(){return!e.ngDisabled||e.ngDisabled()},e.selectColor=function(t){e.disabled()||(e.currentColorIndex=t,e.currentColor=e.colors[e.currentColorIndex],o(function(){e.$apply()}),e.colorChange&&e.colorChange())},e.enterSpacePress=function(t){e.selectColor(t.index)}}])}(),function(){"use strict";var e=angular.module("pipControls.Translate",[]);e.filter("translate",["$injector",function(e){var t=e.has("pipTranslate")?e.get("pipTranslate"):null;return function(e){return t?t.translate(e)||e:e}}])}(),function(){"use strict";var e=angular.module("pipDraggable",[]);e.service("pipDraggable",function(){var e=this;e.inputEvent=function(e){return angular.isDefined(e.touches)?e.touches[0]:angular.isDefined(e.originalEvent)&&angular.isDefined(e.originalEvent.touches)?e.originalEvent.touches[0]:e}}),e.directive("pipDrag",["$rootScope","$parse","$document","$window","pipDraggable",function(e,t,n,o,i){return{restrict:"A",link:function(r,a,l){function s(){a.attr("pip-draggable","false");var e;e=a[0].querySelectorAll?angular.element(a[0].querySelectorAll("[pip-drag-handle]")):a.find("[pip-drag-handle]"),e.length&&(E=e),c(!0),te=ee?angular.element(a.parent()):l.pipScrollContainer?angular.element(ne(r)):angular.element(window)}function p(e){return null!=e&&(!!e&&(e=e.toString().toLowerCase(),"1"==e||"true"==e))}function c(e){e&&(r.$on("$destroy",u),r.$watch(l.pipDrag,d),r.$watch(l.pipCenterAnchor,g),E?E.on(B,m):a.on(B,m),U||"img"!=a[0].nodeName.toLowerCase()||a.on("mousedown",function(){return!1}))}function u(e){c(!1)}function d(e,t){X=e}function g(e,t){angular.isDefined(e)&&(M=e||"true")}function f(e){return angular.isDefined(angular.element(e.target).attr("pip-cancel-drag"))}function m(e){X&&(f(e)||"mousedown"==e.type&&0!=e.button||(v(),U?(h(),Y=setTimeout(function(){h(),$(e)},L),n.on(R,h),n.on(z,h)):$(e)))}function v(){j.left=a.css("css")||0,j.top=a.css("top")||0,j.position=a.css("position"),j.width=a.css("width")}function h(){clearTimeout(Y),n.off(R,h),n.off(z,h)}function $(t){X&&(t.preventDefault(),S=a[0].getBoundingClientRect(),N=q?S:{left:document.body.scrollLeft,top:document.body.scrollTop},a.centerX=a[0].offsetWidth/2,a.centerY=a[0].offsetHeight/2,D=i.inputEvent(t).pageX,T=i.inputEvent(t).pageY,I=D-S.left,_=T-S.top,M?(A=D-a.centerX-o.pageXOffset,P=T-a.centerY-o.pageYOffset):(A=D-I-o.pageXOffset,P=T-_-o.pageYOffset),n.on(R,C),n.on(z,b),oe=e.$on("draggable:_triggerHandlerMove",function(e,t){C(t)}))}function C(t){X&&(t.preventDefault(),a.hasClass("pip-dragging")||(H=V(r),a.addClass("pip-dragging"),e.$broadcast("draggable:start",{x:D,y:T,tx:A,ty:P,event:t,element:a,data:H}),W&&r.$apply(function(){W(r,{$data:H,$event:t})})),D=i.inputEvent(t).pageX,T=i.inputEvent(t).pageY,(J||G)&&y(),M?(A=D-a.centerX-N.left,P=T-a.centerY-N.top):(A=D-I-N.left,P=T-_-N.top),x(A,P),e.$broadcast("draggable:move",{x:D,y:T,tx:A,ty:P,event:t,element:a,data:H,uid:O,dragOffset:N}))}function b(t){X&&(t.preventDefault(),e.$broadcast("draggable:end",{x:D,y:T,tx:A,ty:P,event:t,element:a,data:H,callback:k,uid:O}),a.removeClass("pip-dragging"),a.parent().find(".pip-drag-enter").removeClass("pip-drag-enter"),w(),n.off(R,C),n.off(z,b),F&&r.$apply(function(){F(r,{$data:H,$event:t})}),oe())}function k(e){K&&r.$apply(function(){K(r,{$data:H,$event:e})})}function w(){q?a.css({transform:"","z-index":"","-webkit-transform":"","-ms-transform":""}):a.css({position:j.position,top:j.top,left:j.left,"z-index":"",width:j.width})}function x(e,t){var n=a.css("width");q?a.css({transform:"matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, "+e+", "+t+", 0, 1)","z-index":99999,"-webkit-transform":"matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, "+e+", "+t+", 0, 1)","-ms-transform":"matrix(1, 0, 0, 1, "+e+", "+t+")"}):a.css({left:e+"px",top:t+"px",position:"fixed","z-index":100,width:n})}function y(){var e=0,t=0,n=function(e){return e.offset()||{left:0,top:0}};if(J){var o=n(te).left,i=te.innerWidth(),r=o+i;D-o<Q?e=-Z:r-D<Q&&(e=Z)}if(G){var a=n(te).top,l=te.innerHeight(),s=a+l;T-a<Q?t=-Z+30:s-T<Q&&(t=Z-30)}if(0!==e||0!==t){var p=te.scrollLeft(),c=te.scrollTop();te.scrollLeft(p+e),te.scrollTop(c+t)}}r.value=l.ngDrag;var S,D,T,A,P,I,_,E,L=50,M=!1,U="ontouchstart"in window||window.DocumentTouch,B="touchstart mousedown",R="touchmove mousemove",z="touchend mouseup",O=r.$id,H=null,N=null,X=!1,Y=null,j={},W=t(l.pipDragStart)||null,F=t(l.pipDragStop)||null,K=t(l.pipDragSuccess)||null,q=!!angular.isDefined(l.allowTransform)&&r.$eval(l.allowTransform),V=t(l.pipDragData),G=p(l.pipVerticalScroll)||!0,J=p(l.pipHorizontalScroll)||!0,Q=parseFloat(l.pipActivationDistance)||75,Z=parseFloat(l.pipScrollDistance)||50,ee=!1,te=angular.element(window),ne=t(l.pipScrollContainer),oe=angular.noop;s()}}}]),e.directive("pipDrop",["$parse","$timeout","$window","$document","pipDraggable",function(e,t,n,o,i){return{restrict:"A",link:function(n,i,r){function a(){l(!0)}function l(e){e&&(n.$watch(r.pipDrop,p),n.$on("$destroy",s),n.$on("draggable:start",c),n.$on("draggable:move",u),n.$on("draggable:end",d))}function s(e){l(!1)}function p(e,t){$=e}function c(e,o){$&&(g(o.x,o.y,o.element),r.pipDragStart&&t(function(){b(n,{$data:o.data,$event:o})}))}function u(e,o){$&&(g(o.x,o.y,o.element),r.pipDragMove&&t(function(){w(n,{$data:o.data,$event:o})}))}function d(e,o){return $&&h!==o.uid?(g(o.x,o.y,o.element)&&(o.callback&&o.callback(o),r.pipDropSuccess&&t(function(){C(n,{$data:o.data,$event:o,$target:n.$eval(n.value)})})),r.pipDragStop&&t(function(){k(n,{$data:o.data,$event:o})}),void f(!1,o.element)):void f(!1,o.element)}function g(e,t,o){var r=m(e,t);return n.isTouching=r,r&&(v=i),f(r,o),r}function f(e,t){e?(i.addClass("pip-drag-enter"),t.addClass("pip-drag-over")):v==i&&(v=null,i.removeClass("pip-drag-enter"),t.removeClass("pip-drag-over"))}function m(e,t){var n=i[0].getBoundingClientRect();return e-=o[0].body.scrollLeft+o[0].documentElement.scrollLeft,t-=o[0].body.scrollTop+o[0].documentElement.scrollTop,e>=n.left&&e<=n.right&&t<=n.bottom&&t>=n.top}n.value=r.pipDrop,n.isTouching=!1;var v=null,h=n.$id,$=!1,C=e(r.pipDropSuccess),b=e(r.pipDragStart),k=e(r.pipDragStop),w=e(r.pipDragMove);a()}}}]),e.directive("pipPreventDrag",["$parse","$timeout",function(e,t){return{restrict:"A",link:function(e,t,n){function o(){t.attr("pip-draggable","false"),i(!0)}function i(e){e&&t.on("mousedown touchstart touchmove touchend touchcancel",r)}function r(e){var t=e.originalEvent;return t.preventDefault&&t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.cancelBubble=!0,t.returnValue=!1,!1}o()}}}]),e.directive("pipCancelDrag",function(){return{restrict:"A",link:function(e,t,n){t.find("*").attr("pip-cancel-drag","pip-cancel-drag")}}})}(),function(){"use strict";var e=angular.module("pipImageSlider",["pipSliderButton","pipSliderIndicator","pipImageSlider.Service"]);e.directive("pipImageSlider",function(){return{scope:{sliderIndex:"=pipImageIndex"},controller:["$scope","$element","$attrs","$parse","$timeout","$interval","$pipImageSlider",function(e,t,n,o,i,r,a){function l(){n.pipImageIndex&&(e.sliderIndex=v)}function s(){f=r(function(){d=v+1===u.length?0:v+1,g="next",m()},b||C)}function p(){r.cancel(f)}function c(){p(),s()}var u,d,g,f,m,v=0,h=o(n.pipAnimationType)(e),C=4500,b=o(n.pipAnimationInterval)(e);t.addClass("pip-image-slider"),t.addClass("pip-animation-"+h),e.swipeStart=0,l(),i(function(){u=t.find(".pip-animation-block"),u.length>0&&$(u[0]).addClass("pip-show")}),s(),m=_.throttle(function(){a.toBlock(h,u,v,d,g),v=d,l()},700),e.nextBlock=function(){c(),d=v+1===u.length?0:v+1,g="next",m()},e.prevBlock=function(){c(),d=v-1<0?u.length-1:v-1,g="prev",m()},e.slideTo=function(e){e===v||e>u.length-1||(c(),d=e,g=e>v?"next":"prev",m())},n.id&&a.registerSlider(n.id,e),t.on("$destroy",function(){p(),a.removeSlider(n.id)})}]}})}(),function(){"use strict";var e=angular.module("pipImageSlider.Service",[]);e.service("$pipImageSlider",["$timeout",function(e){function t(e,t){l[e]=t}function n(e){delete l[e]}function o(e){return l[e]}function i(t,n){t.addClass("pip-next"),e(function(){t.addClass("animated").addClass("pip-show").removeClass("pip-next"),n.addClass("animated").removeClass("pip-show")},100)}function r(t,n){e(function(){t.addClass("animated").addClass("pip-show"),n.addClass("animated").addClass("pip-next").removeClass("pip-show")},100)}function a(e,t,n,o,a){var l=$(t[n]),s=o,p=$(t[s]);"carousel"===e?($(t).removeClass("pip-next").removeClass("pip-prev").removeClass("animated"),!a||"prev"!==a&&"next"!==a?o&&o<n?r(p,l):i(p,l):"prev"===a?r(p,l):i(p,l)):(l.addClass("animated").removeClass("pip-show"),p.addClass("animated").addClass("pip-show"))}var l={};return{nextCarousel:i,prevCarousel:r,toBlock:a,registerSlider:t,removeSlider:n,getSliderScope:o}}])}(),function(){"use strict";var e=angular.module("pipSliderButton",[]);e.directive("pipSliderButton",function(){return{scope:{},controller:["$scope","$element","$parse","$attrs","$pipImageSlider",function(e,t,n,o,i){var r=n(o.pipButtonType)(e),a=n(o.pipSliderId)(e);t.on("click",function(){a&&r&&i.getSliderScope(a)[r+"Block"]()})}]}})}(),function(){"use strict";var e=angular.module("pipSliderIndicator",[]);e.directive("pipSliderIndicator",function(){return{scope:!1,controller:["$scope","$element","$parse","$attrs","$pipImageSlider",function(e,t,n,o,i){var r=n(o.pipSliderId)(e),a=n(o.pipSlideTo)(e);t.css("cursor","pointer"),t.on("click",function(){!r||a&&a<0||i.getSliderScope(r).slideTo(a)})}]}})}(),function(){"use strict";var e=angular.module("pipMarkdown",["ngSanitize"]);e.run(["$injector",function(e){var t=e.has("pipTranslate")?e.get("pipTranslate"):null;t&&(t.translations("en",{MARKDOWN_ATTACHMENTS:"Attachments:",checklist:"Checklist",documents:"Documents",pictures:"Pictures",location:"Location",time:"Time"}),t.translations("ru",{MARKDOWN_ATTACHMENTS:"Вложения:",checklist:"Список",documents:"Документы",pictures:"Изображения",location:"Местонахождение",time:"Время"}))}]),e.directive("pipMarkdown",["$parse","$injector",function(e,t){var n=t.has("pipTranslate")?t.get("pipTranslate"):null;return{restrict:"EA",scope:!1,link:function(t,o,i){function r(e){var t="",o=[];return _.each(e,function(e){e.type&&"text"!==e.type&&(0===t.length&&n&&(t=n.translate("MARKDOWN_ATTACHMENTS")),o.indexOf(e.type)<0&&(o.push(e.type),t+=o.length>1?", ":" ",n&&(t+=n.translate(e.type))))}),t}function a(e){return null!=e&&(!!e&&(e=e.toString().toLowerCase(),"1"==e||"true"==e))}function l(e){var t,n,a,l,s;_.isArray(e)?(s=_.find(e,function(e){return"text"===e.type&&e.text}),t=s?s.text:r(e)):t=e,n=i.pipLineCount&&_.isNumber(c()),n=n&&t&&t.length>0,l={gfm:!0,tables:!0,breaks:!0,sanitize:!0,pedantic:!0,smartLists:!0,smartypents:!1},t=marked(t||"",l),n&&(a=1.5*c()),o.html("<div"+(n?p()?'class="pip-markdown-content pip-markdown-list" style="max-height: '+a+'em">':' class="pip-markdown-content" style="max-height: '+a+'em">':p()?' class="pip-markdown-list">':">")+t+"</div>"),o.find("a").attr("target","blank"),!p()&&n&&o.append('<div class="pip-gradient-block"></div>')}var s=e(i.pipText),p=e(i.pipList),c=e(i.pipLineCount);l(s(t)),a(i.pipRebind)&&t.$watch(s,function(e){l(e)}),t.$on("pipWindowResized",function(){l(s(t))}),o.addClass("pip-markdown")}}}])}(),function(){"use strict";var e=angular.module("pipPopover",["pipPopover.Service"]);e.directive("pipPopover",function(){return{restrict:"EA",scope:!0,templateUrl:"popover/popover.html",controller:["$scope","$rootScope","$element","$timeout","$compile",function(e,t,n,o,i){function r(){d.addClass("opened"),$(".pip-popover-backdrop").focus(),e.params.timeout&&o(function(){l()},e.params.timeout)}function a(){e.params.cancelCallback&&e.params.cancelCallback(),l()}function l(){d.removeClass("opened"),o(function(){d.remove()},100)}function s(e){e.stopPropagation()}function p(){if(e.params.element){var t=$(e.params.element),n=t.offset(),o=t.width(),i=t.height(),r=$(document).width(),a=$(document).height(),l=d.find(".pip-popover");n&&l.css("max-width",r-(r-n.left)).css("max-height",a-(n.top+i)-32,0).css("left",n.left-l.width()+o/2).css("top",n.top+i+16)}}function c(){if(e.params.calcHeight!==!1){var t=d.find(".pip-popover"),n=t.find(".pip-title"),o=t.find(".pip-footer"),i=t.find(".pip-content"),r=t.height()-n.outerHeight(!0)-o.outerHeight(!0);i.css("max-height",Math.max(r,0)+"px").css("box-sizing","border-box")}}function u(){d.find(".pip-popover").find(".pip-content").css("max-height","100%"),p(),c()}var d,g;d=$(".pip-popover-backdrop"),d.on("click keydown scroll",a),d.addClass(e.params.responsive!==!1?"pip-responsive":""),o(function(){p(),e.params.template&&(g=i(e.params.template)(e),n.find(".pip-popover").append(g)),r()}),o(function(){c()},200),e.onPopoverClick=s,e=_.defaults(e,e.$parent),t.$on("pipPopoverResize",u),$(window).resize(u)}]}})}(),function(){"use strict";var e=angular.module("pipPopover.Service",[]);e.service("pipPopoverService",["$compile","$rootScope","$timeout",function(e,t,n){function o(n){var o,r,l,s;o=$("body"),o.find("md-backdrop").length>0||(i(),r=t.$new(),l=n&&_.isObject(n)?n:{},r.params=l,r.locals=l.locals,s=e(a)(r),o.append(s))}function i(){var e=$(".pip-popover-backdrop");e.removeClass("opened"),n(function(){e.remove()},100)}function r(){t.$broadcast("pipPopoverResize")}var a;return a="<div class='pip-popover-backdrop {{ params.class }}' ng-controller='params.controller' tabindex='1'> <pip-popover pip-params='params'> </pip-popover> </div>",{show:o,hide:i,resize:r}}])}(),function(){"use strict";var e=angular.module("pipRoutingProgress",["ngMaterial"]);e.directive("pipRoutingProgress",function(){return{restrict:"EA",replace:!0,scope:{showProgress:"&",logoUrl:"@"},templateUrl:"progress/routing_progress.html",controller:"pipRoutingProgressController"}}),e.controller("pipRoutingProgressController",["$scope","$element","$attrs",function(e,t,n){function o(){e.logoUrl&&i.attr("src",e.logoUrl)}var i=t.children("img");o()}])}(),function(){"use strict";var e=angular.module("pipToasts",["ngMaterial","pipControls.Translate"]);e.controller("pipToastController",["$scope","$mdToast","toast","$injector",function(e,t,n,o){var i=o.has("pipErrorDetailsDialog")?o.get("pipErrorDetailsDialog"):null;e.message=n.message,e.actions=n.actions,e.toast=n,0===n.actions.length?e.actionLenght=0:1===n.actions.length?e.actionLenght=n.actions[0].toString().length:e.actionLenght=null,e.showDetails=null!=i,e.onDetails=function(){t.hide(),i&&i.show({error:e.toast.error,ok:"Ok"},angular.noop,angular.noop)},e.onAction=function(e){t.hide({action:e,id:n.id,message:n.message})}}]),e.service("pipToasts",["$rootScope","$mdToast",function(e,t){function n(){var e;$.length>0&&(e=$[0],$.splice(0,1),o(e))}function o(e){m=e,t.show({templateUrl:"toast/toast.html",hideDelay:e.duration||v,position:"bottom left",controller:"pipToastController",locals:{toast:m,sounds:C}}).then(function(e){m.successCallback&&m.successCallback(e),m=null,n()},function(e){m.cancelCallback&&m.cancelCallback(e),m=null,n()})}function i(e){m&&"error"!==e.type?$.push(e):o(e)}function r(e){var t=[];_.each($,function(n){n.type&&n.type===e||t.push(n)}),$=_.cloneDeep(t)}function a(e){_.remove($,{id:e})}function l(e){return _.find($,{id:e})}function s(){$=_.reject($,function(e){return"error"===e.type}),m&&"error"===m.type&&(t.cancel(),n())}function p(){f()}function c(e,t,n,o,r){i({id:r||null,type:"notification",message:e,actions:t||["ok"],successCallback:n,cancelCallback:o,duration:h})}function u(e,t,n,o){i({id:o||null,type:"message",message:e,actions:["ok"],successCallback:t,cancelCallback:n})}function d(e,t,n,o,r){i({id:o||null,error:r,type:"error",message:e,actions:["ok"],successCallback:t,cancelCallback:n})}function g(){t.cancel(),$=[]}function f(e){e?r(e):(t.cancel(),$=[])}var m,v=2e4,h=2e4,$=[],C={};return e.$on("$stateChangeSuccess",s),e.$on("pipSessionClosed",p),e.$on("pipIdentityChanged",p),{showNotification:c,showMessage:u,showError:d,hideAllToasts:g,clearToasts:f,removeToastsById:a,getToastById:l}}])}(),function(){"use strict";var e=angular.module("pipUnsavedChanges",[]);e.directive("pipUnsavedChanges",["$window","$rootScope",function(e,t){return{restrict:"AE",scope:{unsavedChangesAvailable:"&pipUnsavedChangesAvailable",unsavedChangesMessage:"@pipUnsavedChangesMessage",afterLeave:"&pipUnsavedChangesAfterLeave"},link:function(n){e.onbeforeunload=function(){if(n.unsavedChangesAvailable())return t.$routing=!1,n.unsavedChangesMessage};var o=n.$on("$stateChangeStart",function(o){n.unsavedChangesAvailable()&&!e.confirm(n.unsavedChangesMessage)?(t.$routing=!1,o.preventDefault()):_.isFunction(n.afterLeave)&&n.afterLeave()});n.$on("$destroy",function(){e.onbeforeunload=null,o()})}}}])}();